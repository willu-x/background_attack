Test set:local_trigger2Poison Accuracy: 1/4000 (0%)
Test set:local_trigger3Poison Accuracy: 1/4000 (0%)
Test set:Main Accuracy: 39644/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 0/4000 (0%)
Done in 12.764467477798462 sec.
select client [676, 554, 456, 564, 107, 434, 334, 573, 787, 97]
l2 norm of benign user before server clipping 0.41717044711112977
l2 norm of benign user after server clipping 0.41717044711112977
___Test : epoch: 1834: Average loss: 0.0319, Accuracy: 39622/40000.0 (99.0550%)
benign test loss (after fedavg) 0.03190089237615466
benign test acc (after fedavg) 99.055
Test set:local_trigger0Poison Accuracy: 24/4000 (1%)
Traceback (most recent call last):
  File "/home/hjb/src/eminist_attack_from_epoch1800_four_trigger_accNum=12.py", line 171, in <module>
    util.test_poison_model_with_local_trigger(target_model, test_loader,trigger1.reshape(1,3,3),25,22,'trigger1')
  File "/home/hjb/src/eminist_util.py", line 1432, in test_poison_model_with_local_trigger
    for data, target in testloader:
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torch/utils/data/dataloader.py", line 634, in __next__
    data = self._next_data()
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torch/utils/data/dataloader.py", line 1329, in _next_data
    idx, data = self._get_data()
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torch/utils/data/dataloader.py", line 1295, in _get_data
    success, data = self._try_get_data()
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torch/utils/data/dataloader.py", line 1133, in _try_get_data
    data = self._data_queue.get(timeout=timeout)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/multiprocessing/queues.py", line 122, in get
    return _ForkingPickler.loads(res)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torch/multiprocessing/reductions.py", line 307, in rebuild_storage_fd
    fd = df.detach()
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/multiprocessing/resource_sharer.py", line 57, in detach
    with _resource_sharer.get_connection(self._id) as conn:
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/multiprocessing/resource_sharer.py", line 86, in get_connection
    c = Client(address, authkey=process.current_process().authkey)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/multiprocessing/connection.py", line 508, in Client
    answer_challenge(c, authkey)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/multiprocessing/connection.py", line 752, in answer_challenge
    message = connection.recv_bytes(256)         # reject large message
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/multiprocessing/connection.py", line 216, in recv_bytes
    buf = self._recv_bytes(maxlength)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/multiprocessing/connection.py", line 414, in _recv_bytes
    buf = self._recv(4)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/multiprocessing/connection.py", line 379, in _recv
    chunk = read(handle, remaining)
KeyboardInterrupt
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
load data success
select client [245, 325, 493, 538, 491, 162, 690, 158, 180, 738]
l2 norm of benign user before server clipping 2.602550137042999
l2 norm of benign user after server clipping 0.6000000178813935
/home/hjb/src/eminist_util.py:240: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  update_per_layer = torch.tensor(update_per_layer, dtype=data.dtype)
___Test : epoch: 1800: Average loss: 0.7831, Accuracy: 32047/40000.0 (80.1175%)
benign test loss (after fedavg) 0.7830687873363494
benign test acc (after fedavg) 80.11749999999999
Done in 5.031097888946533 sec.
select client [438, 835, 663, 790, 727, 483, 80, 995, 334, 480]
l2 norm of benign user before server clipping 1.1704745233058929
l2 norm of benign user after server clipping 0.6000000178813935
___Test : epoch: 1801: Average loss: 0.1958, Accuracy: 37494/40000.0 (93.7350%)
benign test loss (after fedavg) 0.19577666015625
benign test acc (after fedavg) 93.735
Done in 4.318916082382202 sec.
select client [171, 246, 515, 51, 686, 248, 947, 966, 358, 219]
l2 norm of benign user before server clipping 1.0468333274126054
l2 norm of benign user after server clipping 0.5873691767454148
___Test : epoch: 1802: Average loss: 0.1766, Accuracy: 37972/40000.0 (94.9300%)
benign test loss (after fedavg) 0.17662922415733337
benign test acc (after fedavg) 94.93
Done in 3.5843005180358887 sec.
select client [141, 727, 604, 587, 143, 629, 70, 892, 795, 77]
l2 norm of benign user before server clipping 1.5913597106933595
l2 norm of benign user after server clipping 0.5939354658126831
___Test : epoch: 1803: Average loss: 0.2631, Accuracy: 36270/40000.0 (90.6750%)
benign test loss (after fedavg) 0.2630550361871719
benign test acc (after fedavg) 90.675
Done in 3.7596964836120605 sec.
select client [865, 879, 400, 355, 324, 167, 512, 983, 10, 477]
l2 norm of benign user before server clipping 1.0460535168647767
l2 norm of benign user after server clipping 0.6000000059604644
___Test : epoch: 1804: Average loss: 0.1001, Accuracy: 38791/40000.0 (96.9775%)
benign test loss (after fedavg) 0.10011861002743244
benign test acc (after fedavg) 96.9775
Done in 3.7551820278167725 sec.
select client [741, 134, 359, 424, 787, 970, 991, 422, 292]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.9645575682322184
l2 norm of benign user after server clipping 0.5950231088532342
Gen Trigger0 loss tensor(207.1876, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(203.0428, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(203.0436, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(203.0427, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(203.0432, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.054836
Poison Train Epoch: 1 	Loss: 0.075413
Poison Train Epoch: 2 	Loss: 0.105536
Poison Train Epoch: 3 	Loss: 0.021047
Poison Train Epoch: 4 	Loss: 0.276834
Poison Train Epoch: 5 	Loss: 0.131117
Poison Train Epoch: 6 	Loss: 0.041295
Poison Train Epoch: 7 	Loss: 0.018470
Poison Train Epoch: 8 	Loss: 0.061233
Poison Train Epoch: 9 	Loss: 0.132501
Poison Train Epoch: 10 	Loss: 0.052182
Poison Train Epoch: 11 	Loss: 0.042008
Poison Train Epoch: 12 	Loss: 0.037405
Poison Train Epoch: 13 	Loss: 0.038608
Poison Train Epoch: 14 	Loss: 0.019028
Poison Train Epoch: 15 	Loss: 0.056024
Poison Train Epoch: 16 	Loss: 0.024555
Poison Train Epoch: 17 	Loss: 0.018673
Poison Train Epoch: 18 	Loss: 0.153810
Poison Train Epoch: 19 	Loss: 0.168744
Test set:local_trigger0_poison_local_testPoison Accuracy: 3974/4000 (99%)
___Test : epoch: 1805: Average loss: 0.0899, Accuracy: 38965/40000.0 (97.4125%)
benign test loss (after fedavg) 0.08985959732234478
benign test acc (after fedavg) 97.41250000000001
Done in 35.12245965003967 sec.
select client [123, 342, 785, 901, 453, 547, 972, 307, 166, 743]
l2 norm of benign user before server clipping 0.8923927456140518
l2 norm of benign user after server clipping 0.5749067574739456
___Test : epoch: 1806: Average loss: 0.0887, Accuracy: 38975/40000.0 (97.4375%)
benign test loss (after fedavg) 0.0886599369943142
benign test acc (after fedavg) 97.4375
Test set:local_trigger0Poison Accuracy: 1/4000 (0%)
Done in 5.148142099380493 sec.
select client [45, 835, 883, 316, 813, 331, 141, 740, 598, 423]
l2 norm of benign user before server clipping 0.7879679143428803
l2 norm of benign user after server clipping 0.5567351281642914
___Test : epoch: 1807: Average loss: 0.0735, Accuracy: 39195/40000.0 (97.9875%)
benign test loss (after fedavg) 0.07350474432706833
benign test acc (after fedavg) 97.98750000000001
Test set:local_trigger0Poison Accuracy: 9/4000 (0%)
Done in 5.12138032913208 sec.
select client [777, 251, 104, 247, 585, 867, 630, 388, 187, 671]
l2 norm of benign user before server clipping 1.0653444409370423
l2 norm of benign user after server clipping 0.582375556230545
___Test : epoch: 1808: Average loss: 0.0626, Accuracy: 39331/40000.0 (98.3275%)
benign test loss (after fedavg) 0.06255870343744754
benign test acc (after fedavg) 98.3275
Test set:local_trigger0Poison Accuracy: 62/4000 (2%)
Done in 5.408492803573608 sec.
select client [443, 30, 69, 315, 598, 265, 99, 68, 583, 677]
l2 norm of benign user before server clipping 0.5722520172595977
l2 norm of benign user after server clipping 0.4600786089897156
___Test : epoch: 1809: Average loss: 0.0548, Accuracy: 39414/40000.0 (98.5350%)
benign test loss (after fedavg) 0.05483341021239758
benign test acc (after fedavg) 98.535
Test set:local_trigger0Poison Accuracy: 15/4000 (0%)
Done in 5.170642375946045 sec.
select client [906, 500, 253, 271, 127, 369, 543, 746, 37]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.8495670225885179
l2 norm of benign user after server clipping 0.5244937141736349
Gen Trigger1 loss tensor(200.9041, device='cuda:0', grad_fn=<AddBackward0>)
Traceback (most recent call last):
  File "/home/hjb/src/eminist_attack_from_epoch1800_four_trigger_accNum=12.py", line 94, in <module>
    trigger1 = util.generate_trigger('Trigger1',poison_model_with_hook, mask_grad_list, 25, 22)
  File "/home/hjb/src/eminist_util.py", line 756, in generate_trigger
    target_outputs.append(outputs[j][0][target_layer_neuron[list(
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torch/_tensor.py", line 820, in unique
    return torch.unique(
KeyboardInterrupt
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
load data success
select client [245, 325, 493, 538, 491, 162, 690, 158, 180, 738]
l2 norm of benign user before server clipping 2.6111751556396485
l2 norm of benign user after server clipping 0.600000011920929
/home/hjb/src/eminist_util.py:240: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  update_per_layer = torch.tensor(update_per_layer, dtype=data.dtype)
___Test : epoch: 1800: Average loss: 0.7943, Accuracy: 31949/40000.0 (79.8725%)
benign test loss (after fedavg) 0.7943281599998474
benign test acc (after fedavg) 79.8725
Done in 5.249755620956421 sec.
select client [438, 835, 663, 790, 727, 483, 80, 995, 334, 480]
l2 norm of benign user before server clipping 1.1674857974052428
l2 norm of benign user after server clipping 0.6000000178813935
___Test : epoch: 1801: Average loss: 0.1918, Accuracy: 37569/40000.0 (93.9225%)
benign test loss (after fedavg) 0.19180311529636382
benign test acc (after fedavg) 93.9225
Done in 4.448350191116333 sec.
select client [171, 246, 515, 51, 686, 248, 947, 966, 358, 219]
l2 norm of benign user before server clipping 1.0520341008901597
l2 norm of benign user after server clipping 0.586169770359993
___Test : epoch: 1802: Average loss: 0.1442, Accuracy: 38381/40000.0 (95.9525%)
benign test loss (after fedavg) 0.14424591838121414
benign test acc (after fedavg) 95.9525
Done in 3.618788003921509 sec.
select client [141, 727, 604, 587, 143, 629, 70, 892, 795, 77]
l2 norm of benign user before server clipping 1.5499324262142182
l2 norm of benign user after server clipping 0.5908849895000458
___Test : epoch: 1803: Average loss: 0.2718, Accuracy: 36154/40000.0 (90.3850%)
benign test loss (after fedavg) 0.271840358376503
benign test acc (after fedavg) 90.385
Done in 3.766937017440796 sec.
select client [865, 879, 400, 355, 324, 167, 512, 983, 10, 477]
l2 norm of benign user before server clipping 1.0107295274734498
l2 norm of benign user after server clipping 0.600000011920929
___Test : epoch: 1804: Average loss: 0.1154, Accuracy: 38605/40000.0 (96.5125%)
benign test loss (after fedavg) 0.11536564570069313
benign test acc (after fedavg) 96.5125
Done in 3.683271884918213 sec.
select client [741, 134, 359, 424, 787, 970, 991, 422, 292]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.9839489459991455
l2 norm of benign user after server clipping 0.6000000172191196
Gen Trigger0 loss tensor(212.0665, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(208.3712, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(207.7945, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(207.5979, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(207.5749, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.074843
Poison Train Epoch: 1 	Loss: 0.112783
Poison Train Epoch: 2 	Loss: 0.167722
Poison Train Epoch: 3 	Loss: 0.078301
Poison Train Epoch: 4 	Loss: 0.259628
Poison Train Epoch: 5 	Loss: 0.141959
Poison Train Epoch: 6 	Loss: 0.055072
Poison Train Epoch: 7 	Loss: 0.030645
Poison Train Epoch: 8 	Loss: 0.046480
Poison Train Epoch: 9 	Loss: 0.136647
Poison Train Epoch: 10 	Loss: 0.081677
Poison Train Epoch: 11 	Loss: 0.038284
Poison Train Epoch: 12 	Loss: 0.048612
Poison Train Epoch: 13 	Loss: 0.070934
Poison Train Epoch: 14 	Loss: 0.069080
Poison Train Epoch: 15 	Loss: 0.028493
Poison Train Epoch: 16 	Loss: 0.042011
Poison Train Epoch: 17 	Loss: 0.036951
Poison Train Epoch: 18 	Loss: 0.195683
Poison Train Epoch: 19 	Loss: 0.257830
Test set:local_trigger0_poison_local_testPoison Accuracy: 3976/4000 (99%)
___Test : epoch: 1805: Average loss: 1.3677, Accuracy: 22401/40000.0 (56.0025%)
benign test loss (after fedavg) 1.367735424041748
benign test acc (after fedavg) 56.0025
Done in 33.763129234313965 sec.
select client [123, 342, 785, 901, 453, 547, 972, 307, 166, 743]
l2 norm of benign user before server clipping 0.9175814807415008
l2 norm of benign user after server clipping 0.5789185404777527
___Test : epoch: 1806: Average loss: 0.0831, Accuracy: 39118/40000.0 (97.7950%)
benign test loss (after fedavg) 0.08314355433881283
benign test acc (after fedavg) 97.795
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.8545567989349365 sec.
select client [45, 835, 883, 316, 813, 331, 141, 740, 598, 423]
l2 norm of benign user before server clipping 0.8293171942234039
l2 norm of benign user after server clipping 0.5612373113632202
___Test : epoch: 1807: Average loss: 0.0681, Accuracy: 39239/40000.0 (98.0975%)
benign test loss (after fedavg) 0.06806583415567875
benign test acc (after fedavg) 98.09750000000001
Test set:local_trigger0Poison Accuracy: 23/4000 (1%)
Done in 5.067174434661865 sec.
select client [777, 251, 104, 247, 585, 867, 630, 388, 187, 671]
l2 norm of benign user before server clipping 1.0734853804111482
l2 norm of benign user after server clipping 0.5827036738395691
___Test : epoch: 1808: Average loss: 0.0661, Accuracy: 39266/40000.0 (98.1650%)
benign test loss (after fedavg) 0.06610378403514623
benign test acc (after fedavg) 98.165
Test set:local_trigger0Poison Accuracy: 658/4000 (16%)
Done in 5.230448007583618 sec.
select client [443, 30, 69, 315, 598, 265, 99, 68, 583, 677]
l2 norm of benign user before server clipping 0.5502298325300217
l2 norm of benign user after server clipping 0.45946996510028837
___Test : epoch: 1809: Average loss: 0.0458, Accuracy: 39507/40000.0 (98.7675%)
benign test loss (after fedavg) 0.045807045497000216
benign test acc (after fedavg) 98.7675
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.802412271499634 sec.
select client [906, 500, 253, 271, 127, 369, 543, 746, 37]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.8100366261270311
l2 norm of benign user after server clipping 0.5208812289767795
Gen Trigger1 loss tensor(199.0075, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(192.0274, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(191.8183, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(191.7618, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(191.7376, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.259760
Poison Train Epoch: 1 	Loss: 0.012673
Poison Train Epoch: 2 	Loss: 0.028577
Poison Train Epoch: 3 	Loss: 0.015204
Poison Train Epoch: 4 	Loss: 0.037162
Poison Train Epoch: 5 	Loss: 0.055355
Poison Train Epoch: 6 	Loss: 0.034188
Poison Train Epoch: 7 	Loss: 0.064979
Poison Train Epoch: 8 	Loss: 0.088857
Poison Train Epoch: 9 	Loss: 0.019511
Poison Train Epoch: 10 	Loss: 0.295072
Poison Train Epoch: 11 	Loss: 0.065611
Poison Train Epoch: 12 	Loss: 0.121201
Poison Train Epoch: 13 	Loss: 0.121630
Poison Train Epoch: 14 	Loss: 0.009353
Poison Train Epoch: 15 	Loss: 0.012235
Poison Train Epoch: 16 	Loss: 0.142224
Poison Train Epoch: 17 	Loss: 0.095552
Poison Train Epoch: 18 	Loss: 0.159717
Poison Train Epoch: 19 	Loss: 0.019680
Test set:local_trigger1_poison_local_testPoison Accuracy: 3410/4000 (85%)
___Test : epoch: 1810: Average loss: 0.3208, Accuracy: 35840/40000.0 (89.6000%)
benign test loss (after fedavg) 0.32081094217300415
benign test acc (after fedavg) 89.60000000000001
Test set:local_trigger0Poison Accuracy: 875/4000 (22%)
Done in 35.000200510025024 sec.
select client [308, 120, 221, 700, 133, 95, 815, 705, 476, 305]
l2 norm of benign user before server clipping 0.8571590185165405
l2 norm of benign user after server clipping 0.5216717422008514
___Test : epoch: 1811: Average loss: 0.1159, Accuracy: 38611/40000.0 (96.5275%)
benign test loss (after fedavg) 0.11591885390281677
benign test acc (after fedavg) 96.5275
Test set:local_trigger0Poison Accuracy: 78/4000 (2%)
Done in 4.675281286239624 sec.
select client [984, 370, 69, 681, 706, 633, 993, 981, 164, 374]
l2 norm of benign user before server clipping 0.9006856620311737
l2 norm of benign user after server clipping 0.5891025543212891
___Test : epoch: 1812: Average loss: 0.0902, Accuracy: 39047/40000.0 (97.6175%)
benign test loss (after fedavg) 0.09022946022748947
benign test acc (after fedavg) 97.6175
Test set:local_trigger0Poison Accuracy: 2/4000 (0%)
Done in 5.018340349197388 sec.
select client [791, 427, 228, 434, 704, 182, 804, 699, 44, 352]
l2 norm of benign user before server clipping 0.515379735827446
l2 norm of benign user after server clipping 0.49371699392795565
___Test : epoch: 1813: Average loss: 0.0420, Accuracy: 39537/40000.0 (98.8425%)
benign test loss (after fedavg) 0.041980705380439756
benign test acc (after fedavg) 98.8425
Test set:local_trigger0Poison Accuracy: 3/4000 (0%)
Done in 4.813639402389526 sec.
select client [700, 77, 447, 890, 953, 353, 719, 195, 574, 676]
l2 norm of benign user before server clipping 0.7609043657779694
l2 norm of benign user after server clipping 0.49338448643684385
___Test : epoch: 1814: Average loss: 0.0415, Accuracy: 39525/40000.0 (98.8125%)
benign test loss (after fedavg) 0.04154486584365368
benign test acc (after fedavg) 98.8125
Test set:local_trigger0Poison Accuracy: 34/4000 (1%)
Done in 5.112445116043091 sec.
select client [210, 749, 999, 10, 844, 914, 764, 351, 423]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.70427239437898
l2 norm of benign user after server clipping 0.5242382138967514
Gen Trigger2 loss tensor(199.2010, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(196.2186, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(196.2183, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(196.2181, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(196.2185, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.280984
Poison Train Epoch: 1 	Loss: 0.172534
Poison Train Epoch: 2 	Loss: 0.265481
Poison Train Epoch: 3 	Loss: 0.060936
Poison Train Epoch: 4 	Loss: 0.098958
Poison Train Epoch: 5 	Loss: 0.042989
Poison Train Epoch: 6 	Loss: 0.017086
Poison Train Epoch: 7 	Loss: 0.086261
Poison Train Epoch: 8 	Loss: 0.092914
Poison Train Epoch: 9 	Loss: 0.037421
Poison Train Epoch: 10 	Loss: 0.014566
Poison Train Epoch: 11 	Loss: 0.048015
Poison Train Epoch: 12 	Loss: 0.021788
Poison Train Epoch: 13 	Loss: 0.066897
Poison Train Epoch: 14 	Loss: 0.011828
Poison Train Epoch: 15 	Loss: 0.033263
Poison Train Epoch: 16 	Loss: 0.015918
Poison Train Epoch: 17 	Loss: 0.029065
Poison Train Epoch: 18 	Loss: 0.104257
Poison Train Epoch: 19 	Loss: 0.133934
Test set:local_trigger2_poison_local_testPoison Accuracy: 160/4000 (4%)
___Test : epoch: 1815: Average loss: 0.0424, Accuracy: 39521/40000.0 (98.8025%)
benign test loss (after fedavg) 0.04241786005795002
benign test acc (after fedavg) 98.80250000000001
Test set:local_trigger0Poison Accuracy: 33/4000 (1%)
Done in 35.83632302284241 sec.
select client [545, 432, 975, 467, 544, 863, 669, 13, 522, 331]
l2 norm of benign user before server clipping 0.5818296641111373
l2 norm of benign user after server clipping 0.4972036391496658
___Test : epoch: 1816: Average loss: 0.0555, Accuracy: 39358/40000.0 (98.3950%)
benign test loss (after fedavg) 0.05546539893299341
benign test acc (after fedavg) 98.395
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.940235137939453 sec.
select client [566, 854, 956, 111, 981, 310, 406, 473, 30, 26]
l2 norm of benign user before server clipping 0.5773914784193039
l2 norm of benign user after server clipping 0.459846231341362
___Test : epoch: 1817: Average loss: 0.0351, Accuracy: 39590/40000.0 (98.9750%)
benign test loss (after fedavg) 0.035065604801476004
benign test acc (after fedavg) 98.97500000000001
Test set:local_trigger0Poison Accuracy: 9/4000 (0%)
Done in 4.87961220741272 sec.
select client [985, 818, 477, 343, 230, 500, 37, 280, 318, 976]
l2 norm of benign user before server clipping 0.5976687535643578
l2 norm of benign user after server clipping 0.46472380608320235
___Test : epoch: 1818: Average loss: 0.0374, Accuracy: 39575/40000.0 (98.9375%)
benign test loss (after fedavg) 0.03743585708141327
benign test acc (after fedavg) 98.9375
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.839940071105957 sec.
select client [64, 787, 702, 367, 671, 404, 770, 745, 38, 306]
l2 norm of benign user before server clipping 0.7653083980083466
l2 norm of benign user after server clipping 0.48890862464904783
___Test : epoch: 1819: Average loss: 0.0655, Accuracy: 39254/40000.0 (98.1350%)
benign test loss (after fedavg) 0.06553204057961702
benign test acc (after fedavg) 98.13499999999999
Test set:local_trigger0Poison Accuracy: 1/4000 (0%)
Done in 5.0537519454956055 sec.
select client [846, 657, 161, 444, 804, 328, 142, 481, 300]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.9463982946342893
l2 norm of benign user after server clipping 0.5321761402818892
Gen Trigger3 loss tensor(179.2010, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger3 loss tensor(173.8531, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger3 loss tensor(173.4212, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger3 loss tensor(173.3927, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger3 loss tensor(173.3813, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.195027
Poison Train Epoch: 1 	Loss: 0.134497
Poison Train Epoch: 2 	Loss: 0.076682
Poison Train Epoch: 3 	Loss: 0.057366
Poison Train Epoch: 4 	Loss: 0.007972
Poison Train Epoch: 5 	Loss: 0.044742
Poison Train Epoch: 6 	Loss: 0.116712
Poison Train Epoch: 7 	Loss: 0.143989
Poison Train Epoch: 8 	Loss: 0.033954
Poison Train Epoch: 9 	Loss: 0.010854
Poison Train Epoch: 10 	Loss: 0.018726
Poison Train Epoch: 11 	Loss: 0.068419
Poison Train Epoch: 12 	Loss: 0.012415
Poison Train Epoch: 13 	Loss: 0.043007
Poison Train Epoch: 14 	Loss: 0.119880
Poison Train Epoch: 15 	Loss: 0.182211
Poison Train Epoch: 16 	Loss: 0.069867
Poison Train Epoch: 17 	Loss: 0.194207
Poison Train Epoch: 18 	Loss: 0.011128
Poison Train Epoch: 19 	Loss: 0.085750
Test set:local_trigger3_poison_local_testPoison Accuracy: 1945/4000 (49%)
___Test : epoch: 1820: Average loss: 0.0970, Accuracy: 38852/40000.0 (97.1300%)
benign test loss (after fedavg) 0.09695995012223721
benign test acc (after fedavg) 97.13000000000001
Test set:local_trigger0Poison Accuracy: 3431/4000 (86%)
Done in 33.79811191558838 sec.
select client [637, 796, 351, 825, 501, 51, 23, 671, 566, 394]
l2 norm of benign user before server clipping 0.6217417806386948
l2 norm of benign user after server clipping 0.539878848195076
___Test : epoch: 1821: Average loss: 0.0423, Accuracy: 39536/40000.0 (98.8400%)
benign test loss (after fedavg) 0.042294821147620676
benign test acc (after fedavg) 98.83999999999999
Test set:local_trigger0Poison Accuracy: 27/4000 (1%)
Done in 4.930613994598389 sec.
select client [751, 453, 863, 552, 896, 738, 463, 665, 634, 572]
l2 norm of benign user before server clipping 0.5551032871007919
l2 norm of benign user after server clipping 0.48779599368572235
___Test : epoch: 1822: Average loss: 0.0374, Accuracy: 39589/40000.0 (98.9725%)
benign test loss (after fedavg) 0.03735002965182066
benign test acc (after fedavg) 98.9725
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.941249370574951 sec.
select client [530, 48, 643, 285, 189, 210, 407, 34, 42, 306]
l2 norm of benign user before server clipping 0.6983622312545776
l2 norm of benign user after server clipping 0.52381911277771
___Test : epoch: 1823: Average loss: 0.0395, Accuracy: 39531/40000.0 (98.8275%)
benign test loss (after fedavg) 0.039490929084271195
benign test acc (after fedavg) 98.8275
Test set:local_trigger0Poison Accuracy: 644/4000 (16%)
Done in 5.102314472198486 sec.
select client [911, 932, 843, 494, 586, 348, 481, 958, 604, 733]
l2 norm of benign user before server clipping 0.566654485464096
l2 norm of benign user after server clipping 0.4499176681041718
___Test : epoch: 1824: Average loss: 0.0281, Accuracy: 39647/40000.0 (99.1175%)
benign test loss (after fedavg) 0.028132599564641713
benign test acc (after fedavg) 99.1175
Test set:local_trigger0Poison Accuracy: 3/4000 (0%)
Done in 5.161858558654785 sec.
select client [905, 507, 632, 448, 119, 100, 82, 483, 410, 469]
l2 norm of benign user before server clipping 0.48454590439796447
l2 norm of benign user after server clipping 0.45129928588867185
___Test : epoch: 1825: Average loss: 0.0280, Accuracy: 39669/40000.0 (99.1725%)
benign test loss (after fedavg) 0.028006202118471265
benign test acc (after fedavg) 99.1725
Test set:local_trigger0Poison Accuracy: 57/4000 (1%)
Done in 4.882603883743286 sec.
select client [900, 957, 46, 717, 616, 357, 837, 662, 422, 713]
l2 norm of benign user before server clipping 0.5015090674161911
l2 norm of benign user after server clipping 0.44934597313404084
___Test : epoch: 1826: Average loss: 0.0298, Accuracy: 39658/40000.0 (99.1450%)
benign test loss (after fedavg) 0.02979377851970494
benign test acc (after fedavg) 99.14500000000001
Test set:local_trigger0Poison Accuracy: 5/4000 (0%)
Done in 4.929675102233887 sec.
select client [519, 68, 971, 277, 147, 891, 721, 547, 729, 897]
l2 norm of benign user before server clipping 0.5236401200294495
l2 norm of benign user after server clipping 0.47885751724243164
___Test : epoch: 1827: Average loss: 0.0283, Accuracy: 39681/40000.0 (99.2025%)
benign test loss (after fedavg) 0.028251876217499375
benign test acc (after fedavg) 99.2025
Test set:local_trigger0Poison Accuracy: 35/4000 (1%)
Done in 4.982355356216431 sec.
select client [638, 411, 424, 310, 164, 246, 512, 509, 841, 190]
l2 norm of benign user before server clipping 1.0615315333008766
l2 norm of benign user after server clipping 0.49902103692293165
___Test : epoch: 1828: Average loss: 0.1994, Accuracy: 37258/40000.0 (93.1450%)
benign test loss (after fedavg) 0.19944442781209945
benign test acc (after fedavg) 93.145
Test set:local_trigger0Poison Accuracy: 310/4000 (8%)
Done in 5.041766166687012 sec.
select client [767, 803, 862, 585, 646, 73, 684, 536, 936, 214]
l2 norm of benign user before server clipping 0.6504425436258316
l2 norm of benign user after server clipping 0.555462846159935
___Test : epoch: 1829: Average loss: 0.0531, Accuracy: 39401/40000.0 (98.5025%)
benign test loss (after fedavg) 0.05313901938945055
benign test acc (after fedavg) 98.5025
Test set:local_trigger0Poison Accuracy: 2/4000 (0%)
Done in 5.034740686416626 sec.
select client [489, 93, 716, 518, 651, 85, 202, 721, 717, 764]
l2 norm of benign user before server clipping 0.5777812004089355
l2 norm of benign user after server clipping 0.4532636165618896
___Test : epoch: 1830: Average loss: 0.0320, Accuracy: 39599/40000.0 (98.9975%)
benign test loss (after fedavg) 0.03198012689203024
benign test acc (after fedavg) 98.9975
Test set:local_trigger0Poison Accuracy: 312/4000 (8%)
Done in 4.883407115936279 sec.
select client [980, 755, 884, 324, 494, 433, 627, 858, 479, 77]
l2 norm of benign user before server clipping 0.7807529538869857
l2 norm of benign user after server clipping 0.4995411306619644
___Test : epoch: 1831: Average loss: 0.0368, Accuracy: 39582/40000.0 (98.9550%)
benign test loss (after fedavg) 0.03682784166038036
benign test acc (after fedavg) 98.955
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.69278621673584 sec.
select client [865, 317, 384, 892, 937, 583, 32, 427, 332, 540]
l2 norm of benign user before server clipping 0.41342258304357526
l2 norm of benign user after server clipping 0.41278200000524523
___Test : epoch: 1832: Average loss: 0.0330, Accuracy: 39617/40000.0 (99.0425%)
benign test loss (after fedavg) 0.03301021628603339
benign test acc (after fedavg) 99.0425
Test set:local_trigger0Poison Accuracy: 326/4000 (8%)
Done in 4.694360256195068 sec.
select client [256, 980, 246, 453, 63, 951, 512, 287, 129, 26]/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
load data success
select client [245, 325, 493, 538, 491, 162, 690, 158, 180, 738]
l2 norm of benign user before server clipping 0.43557017147541044
l2 norm of benign user after server clipping 0.40475604236125945
/home/hjb/src/eminist_util.py:240: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  update_per_layer = torch.tensor(update_per_layer, dtype=data.dtype)
___Test : epoch: 1950: Average loss: 0.7050, Accuracy: 31546/40000.0 (78.8650%)
benign test loss (after fedavg) 0.7050352197170258
benign test acc (after fedavg) 78.865
Done in 4.927478313446045 sec.
select client [438, 835, 663, 790, 727, 483, 80, 995, 334, 480]
l2 norm of benign user before server clipping 0.34641306549310685
l2 norm of benign user after server clipping 0.34641306549310685
___Test : epoch: 1951: Average loss: 0.1164, Accuracy: 38637/40000.0 (96.5925%)
benign test loss (after fedavg) 0.11643342771828175
benign test acc (after fedavg) 96.5925
Done in 4.013238906860352 sec.
select client [171, 246, 515, 51, 686, 248, 947, 966, 358, 219]
l2 norm of benign user before server clipping 0.3662342518568039
l2 norm of benign user after server clipping 0.33975898921489717
___Test : epoch: 1952: Average loss: 0.2032, Accuracy: 37772/40000.0 (94.4300%)
benign test loss (after fedavg) 0.20322409658432006
benign test acc (after fedavg) 94.43
Done in 3.559936046600342 sec.
select client [141, 727, 604, 587, 143, 629, 70, 892, 795, 77]
l2 norm of benign user before server clipping 0.4345275655388832
l2 norm of benign user after server clipping 0.37503035813570024
___Test : epoch: 1953: Average loss: 0.1253, Accuracy: 38845/40000.0 (97.1125%)
benign test loss (after fedavg) 0.12532416310310363
benign test acc (after fedavg) 97.1125
Done in 3.59968900680542 sec.
select client [865, 879, 400, 355, 324, 167, 512, 983, 10, 477]
l2 norm of benign user before server clipping 0.3022292360663414
l2 norm of benign user after server clipping 0.3022292360663414
___Test : epoch: 1954: Average loss: 0.0934, Accuracy: 39008/40000.0 (97.5200%)
benign test loss (after fedavg) 0.09343076152205468
benign test acc (after fedavg) 97.52
Done in 4.219367027282715 sec.
select client [741, 134, 359, 424, 787, 970, 991, 422, 292]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.3326970256037182
l2 norm of benign user after server clipping 0.32713128957483506
Gen Trigger0 loss tensor(174.7783, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(170.7420, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(170.7422, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(170.7429, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(170.7428, device='cuda:0', grad_fn=<AddBackward0>)

/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
load data success
select client [245, 325, 493, 538, 491, 162, 690, 158, 180, 738]
l2 norm of benign user before server clipping 0.435112339258194
l2 norm of benign user after server clipping 0.4042894721031189
/home/hjb/src/eminist_util.py:240: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  update_per_layer = torch.tensor(update_per_layer, dtype=data.dtype)
___Test : epoch: 1950: Average loss: 0.6509, Accuracy: 32035/40000.0 (80.0875%)
benign test loss (after fedavg) 0.6509285487651825
benign test acc (after fedavg) 80.0875
Done in 5.142605781555176 sec.
select client [438, 835, 663, 790, 727, 483, 80, 995, 334, 480]
l2 norm of benign user before server clipping 0.3441770076751709
l2 norm of benign user after server clipping 0.3441770076751709
___Test : epoch: 1951: Average loss: 0.1247, Accuracy: 38543/40000.0 (96.3575%)
benign test loss (after fedavg) 0.12466473506093025
benign test acc (after fedavg) 96.3575
Done in 3.842148542404175 sec.
select client [171, 246, 515, 51, 686, 248, 947, 966, 358, 219]
l2 norm of benign user before server clipping 0.3645304799079895
l2 norm of benign user after server clipping 0.33810978531837466
___Test : epoch: 1952: Average loss: 0.1509, Accuracy: 38322/40000.0 (95.8050%)
benign test loss (after fedavg) 0.15093217025995254
benign test acc (after fedavg) 95.80499999999999
Done in 3.4968111515045166 sec.
select client [141, 727, 604, 587, 143, 629, 70, 892, 795, 77]
l2 norm of benign user before server clipping 0.4375529855489731
l2 norm of benign user after server clipping 0.38176088631153104
___Test : epoch: 1953: Average loss: 0.1902, Accuracy: 38340/40000.0 (95.8500%)
benign test loss (after fedavg) 0.1901873345375061
benign test acc (after fedavg) 95.85000000000001
Done in 3.5629570484161377 sec.
select client [865, 879, 400, 355, 324, 167, 512, 983, 10, 477]
l2 norm of benign user before server clipping 0.3056726843118668
l2 norm of benign user after server clipping 0.3056726843118668
___Test : epoch: 1954: Average loss: 0.0827, Accuracy: 39062/40000.0 (97.6550%)
benign test loss (after fedavg) 0.0827353930413723
benign test acc (after fedavg) 97.655
Done in 3.7257559299468994 sec.
select client [741, 134, 359, 424, 787, 970, 991, 422, 292]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.3342185252242618
l2 norm of benign user after server clipping 0.32645172211858964
Gen Trigger0 loss tensor(156.9146, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(156.6714, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(156.6622, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(156.6675, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(156.6645, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.059957
Poison Train Epoch: 1 	Loss: 0.053769
Poison Train Epoch: 2 	Loss: 0.106238
Poison Train Epoch: 3 	Loss: 0.040858
Poison Train Epoch: 4 	Loss: 0.050393
Poison Train Epoch: 5 	Loss: 0.051353
Poison Train Epoch: 6 	Loss: 0.127400
Poison Train Epoch: 7 	Loss: 0.181022
Poison Train Epoch: 8 	Loss: 0.011131
Poison Train Epoch: 9 	Loss: 0.015372
Poison Train Epoch: 10 	Loss: 0.016172
Poison Train Epoch: 11 	Loss: 0.017986
Poison Train Epoch: 12 	Loss: 0.042800
Poison Train Epoch: 13 	Loss: 0.084029
Poison Train Epoch: 14 	Loss: 0.148545
Poison Train Epoch: 15 	Loss: 0.053091
Poison Train Epoch: 16 	Loss: 0.031825
Poison Train Epoch: 17 	Loss: 0.076861
Poison Train Epoch: 18 	Loss: 0.033534
Poison Train Epoch: 19 	Loss: 0.045089

/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
load data success
select client [245, 325, 493, 538, 491, 162, 690, 158, 180, 738]
l2 norm of benign user before server clipping 0.43533425480127336
l2 norm of benign user after server clipping 0.4055778279900551
/home/hjb/src/eminist_util.py:240: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  update_per_layer = torch.tensor(update_per_layer, dtype=data.dtype)
___Test : epoch: 1950: Average loss: 0.6659, Accuracy: 31923/40000.0 (79.8075%)
benign test loss (after fedavg) 0.6659191327095032
benign test acc (after fedavg) 79.8075
Done in 4.986006021499634 sec.
select client [438, 835, 663, 790, 727, 483, 80, 995, 334, 480]
l2 norm of benign user before server clipping 0.3468579277396202
l2 norm of benign user after server clipping 0.3468579277396202
___Test : epoch: 1951: Average loss: 0.1396, Accuracy: 38361/40000.0 (95.9025%)
benign test loss (after fedavg) 0.1395660819530487
benign test acc (after fedavg) 95.9025
Done in 4.243119955062866 sec.
select client [171, 246, 515, 51, 686, 248, 947, 966, 358, 219]
l2 norm of benign user before server clipping 0.3612616747617722
l2 norm of benign user after server clipping 0.3362011820077896
___Test : epoch: 1952: Average loss: 0.2088, Accuracy: 37745/40000.0 (94.3625%)
benign test loss (after fedavg) 0.20879959089756012
benign test acc (after fedavg) 94.36250000000001
Done in 3.4044137001037598 sec.
select client [141, 727, 604, 587, 143, 629, 70, 892, 795, 77]
l2 norm of benign user before server clipping 0.4395917072892189
l2 norm of benign user after server clipping 0.38475502878427503
___Test : epoch: 1953: Average loss: 0.0894, Accuracy: 39212/40000.0 (98.0300%)
benign test loss (after fedavg) 0.08942464413046837
benign test acc (after fedavg) 98.03
Done in 3.59706711769104 sec.
select client [865, 879, 400, 355, 324, 167, 512, 983, 10, 477]
l2 norm of benign user before server clipping 0.29802040457725526
l2 norm of benign user after server clipping 0.29802040457725526
___Test : epoch: 1954: Average loss: 0.0720, Accuracy: 39246/40000.0 (98.1150%)
benign test loss (after fedavg) 0.07201254093050957
benign test acc (after fedavg) 98.115
Done in 3.6864423751831055 sec.
select client [741, 134, 359, 424, 787, 970, 991, 422, 292]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.3319280727042092
l2 norm of benign user after server clipping 0.32324396736092037
Gen Trigger0 loss tensor(190.4525, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(188.7278, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(188.7280, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(188.7280, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(188.7318, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.055492
Poison Train Epoch: 1 	Loss: 0.056099
Poison Train Epoch: 2 	Loss: 0.096338
Poison Train Epoch: 3 	Loss: 0.036736
Poison Train Epoch: 4 	Loss: 0.034388
Poison Train Epoch: 5 	Loss: 0.049872
Poison Train Epoch: 6 	Loss: 0.112257
Poison Train Epoch: 7 	Loss: 0.175276
Poison Train Epoch: 8 	Loss: 0.009830
Poison Train Epoch: 9 	Loss: 0.019468
Poison Train Epoch: 10 	Loss: 0.016304
Poison Train Epoch: 11 	Loss: 0.016800
Poison Train Epoch: 12 	Loss: 0.033860
Poison Train Epoch: 13 	Loss: 0.063385
Poison Train Epoch: 14 	Loss: 0.121689
Poison Train Epoch: 15 	Loss: 0.054490
Poison Train Epoch: 16 	Loss: 0.035739
Poison Train Epoch: 17 	Loss: 0.070885
Poison Train Epoch: 18 	Loss: 0.029626
Poison Train Epoch: 19 	Loss: 0.033205
Test set:local_trigger0_poison_local_testPoison Accuracy: 3988/4000 (100%)
___Test : epoch: 1955: Average loss: 0.0916, Accuracy: 39062/40000.0 (97.6550%)
benign test loss (after fedavg) 0.09160896825194359
benign test acc (after fedavg) 97.655
Done in 33.6587347984314 sec.
select client [123, 342, 785, 901, 453, 547, 972, 307, 166, 743]
l2 norm of benign user before server clipping 0.2558128535747528
l2 norm of benign user after server clipping 0.2558128535747528
___Test : epoch: 1956: Average loss: 0.0709, Accuracy: 39344/40000.0 (98.3600%)
benign test loss (after fedavg) 0.07088657692074776
benign test acc (after fedavg) 98.36
Test set:local_trigger0Poison Accuracy: 11/4000 (0%)
Done in 4.99741268157959 sec.
select client [45, 835, 883, 316, 813, 331, 141, 740, 598, 423]
l2 norm of benign user before server clipping 0.23759383335709572
l2 norm of benign user after server clipping 0.23759383335709572
___Test : epoch: 1957: Average loss: 0.0465, Accuracy: 39518/40000.0 (98.7950%)
benign test loss (after fedavg) 0.04650873720794916
benign test acc (after fedavg) 98.795
Test set:local_trigger0Poison Accuracy: 19/4000 (0%)
Done in 5.393873453140259 sec.
select client [777, 251, 104, 247, 585, 867, 630, 388, 187, 671]
l2 norm of benign user before server clipping 0.34710630476474763
l2 norm of benign user after server clipping 0.3329480975866318
___Test : epoch: 1958: Average loss: 0.0799, Accuracy: 39185/40000.0 (97.9625%)
benign test loss (after fedavg) 0.07985272948145866
benign test acc (after fedavg) 97.96249999999999
Test set:local_trigger0Poison Accuracy: 373/4000 (9%)
Done in 5.396333932876587 sec.
select client [443, 30, 69, 315, 598, 265, 99, 68, 583, 677]
l2 norm of benign user before server clipping 0.19967798367142678
l2 norm of benign user after server clipping 0.19967798367142678
___Test : epoch: 1959: Average loss: 0.0619, Accuracy: 39370/40000.0 (98.4250%)
benign test loss (after fedavg) 0.06186452403366566
benign test acc (after fedavg) 98.425
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.835420608520508 sec.
select client [906, 500, 253, 271, 127, 369, 543, 746, 37]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.2870192320810424
l2 norm of benign user after server clipping 0.27188460611634785
Gen Trigger1 loss tensor(158.2522, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(157.9560, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(157.9366, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(157.9514, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(157.9444, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.025846
Poison Train Epoch: 1 	Loss: 0.134649
Poison Train Epoch: 2 	Loss: 0.029765
Poison Train Epoch: 3 	Loss: 0.022521
Poison Train Epoch: 4 	Loss: 0.052029
Poison Train Epoch: 5 	Loss: 0.112276
Poison Train Epoch: 6 	Loss: 0.046761
Poison Train Epoch: 7 	Loss: 0.052649
Poison Train Epoch: 8 	Loss: 0.019258
Poison Train Epoch: 9 	Loss: 0.081938
Poison Train Epoch: 10 	Loss: 0.095500
Poison Train Epoch: 11 	Loss: 0.019756
Poison Train Epoch: 12 	Loss: 0.064366
Poison Train Epoch: 13 	Loss: 0.028714
Poison Train Epoch: 14 	Loss: 0.017283
Poison Train Epoch: 15 	Loss: 0.024723
Poison Train Epoch: 16 	Loss: 0.030041
Poison Train Epoch: 17 	Loss: 0.083303
Poison Train Epoch: 18 	Loss: 0.035901
Poison Train Epoch: 19 	Loss: 0.050499
Test set:local_trigger1_poison_local_testPoison Accuracy: 3967/4000 (99%)
___Test : epoch: 1960: Average loss: 0.0484, Accuracy: 39548/40000.0 (98.8700%)
benign test loss (after fedavg) 0.048379820305109025
benign test acc (after fedavg) 98.87
Test set:local_trigger0Poison Accuracy: 50/4000 (1%)
Done in 34.01585531234741 sec.
select client [308, 120, 221, 700, 133, 95, 815, 705, 476, 305]
l2 norm of benign user before server clipping 0.23173737525939941
l2 norm of benign user after server clipping 0.23173737525939941
___Test : epoch: 1961: Average loss: 0.0629, Accuracy: 39394/40000.0 (98.4850%)
benign test loss (after fedavg) 0.06293161485791206
benign test acc (after fedavg) 98.485
Test set:local_trigger0Poison Accuracy: 4/4000 (0%)
Done in 4.91038179397583 sec.
select client [984, 370, 69, 681, 706, 633, 993, 981, 164, 374]
l2 norm of benign user before server clipping 0.22320508062839509
l2 norm of benign user after server clipping 0.22320508062839509
___Test : epoch: 1962: Average loss: 0.0557, Accuracy: 39470/40000.0 (98.6750%)
benign test loss (after fedavg) 0.05572794397473335
benign test acc (after fedavg) 98.675
Test set:local_trigger0Poison Accuracy: 24/4000 (1%)
Done in 5.611495494842529 sec.
select client [791, 427, 228, 434, 704, 182, 804, 699, 44, 352]
l2 norm of benign user before server clipping 0.18300046026706696
l2 norm of benign user after server clipping 0.18300046026706696
___Test : epoch: 1963: Average loss: 0.0508, Accuracy: 39452/40000.0 (98.6300%)
benign test loss (after fedavg) 0.05078673955798149
benign test acc (after fedavg) 98.63
Test set:local_trigger0Poison Accuracy: 2/4000 (0%)
Done in 5.06556248664856 sec.
select client [700, 77, 447, 890, 953, 353, 719, 195, 574, 676]
l2 norm of benign user before server clipping 0.2434534728527069
l2 norm of benign user after server clipping 0.2327478289604187
___Test : epoch: 1964: Average loss: 0.0556, Accuracy: 39478/40000.0 (98.6950%)
benign test loss (after fedavg) 0.05559207360446453
benign test acc (after fedavg) 98.695
Test set:local_trigger0Poison Accuracy: 51/4000 (1%)
Done in 5.249021053314209 sec.
select client [210, 749, 999, 10, 844, 914, 764, 351, 423]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.22486226343446308
l2 norm of benign user after server clipping 0.22486226343446308
Gen Trigger2 loss tensor(201.6295, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(201.5177, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(201.2372, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(201.2082, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(201.1970, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.021457
Poison Train Epoch: 1 	Loss: 0.092017
Poison Train Epoch: 2 	Loss: 0.139291
Poison Train Epoch: 3 	Loss: 0.023395
Poison Train Epoch: 4 	Loss: 0.018058
Poison Train Epoch: 5 	Loss: 0.013602
Poison Train Epoch: 6 	Loss: 0.106149
Poison Train Epoch: 7 	Loss: 0.007400
Poison Train Epoch: 8 	Loss: 0.026286
Poison Train Epoch: 9 	Loss: 0.077621
Poison Train Epoch: 10 	Loss: 0.024642
Poison Train Epoch: 11 	Loss: 0.023966
Poison Train Epoch: 12 	Loss: 0.100558
Poison Train Epoch: 13 	Loss: 0.023240
Poison Train Epoch: 14 	Loss: 0.011619
Poison Train Epoch: 15 	Loss: 0.100563
Poison Train Epoch: 16 	Loss: 0.044991
Poison Train Epoch: 17 	Loss: 0.008835
Poison Train Epoch: 18 	Loss: 0.069961
Poison Train Epoch: 19 	Loss: 0.034129
Test set:local_trigger2_poison_local_testPoison Accuracy: 3959/4000 (99%)
___Test : epoch: 1965: Average loss: 0.0518, Accuracy: 39510/40000.0 (98.7750%)
benign test loss (after fedavg) 0.05184699845910072
benign test acc (after fedavg) 98.775
Test set:local_trigger0Poison Accuracy: 105/4000 (3%)
Done in 36.78378653526306 sec.
select client [545, 432, 975, 467, 544, 863, 669, 13, 522, 331]
l2 norm of benign user before server clipping 0.20864425748586654
l2 norm of benign user after server clipping 0.20864425748586654
___Test : epoch: 1966: Average loss: 0.0578, Accuracy: 39384/40000.0 (98.4600%)
benign test loss (after fedavg) 0.05782530361413956
benign test acc (after fedavg) 98.46000000000001
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 5.230236291885376 sec.
select client [566, 854, 956, 111, 981, 310, 406, 473, 30, 26]
l2 norm of benign user before server clipping 0.19836339652538298
l2 norm of benign user after server clipping 0.19836339652538298
___Test : epoch: 1967: Average loss: 0.0452, Accuracy: 39549/40000.0 (98.8725%)
benign test loss (after fedavg) 0.045161866255104544
benign test acc (after fedavg) 98.8725
Test set:local_trigger0Poison Accuracy: 105/4000 (3%)
Done in 4.875059127807617 sec.
select client [985, 818, 477, 343, 230, 500, 37, 280, 318, 976]
l2 norm of benign user before server clipping 0.1960013724863529
l2 norm of benign user after server clipping 0.1960013724863529
___Test : epoch: 1968: Average loss: 0.0433, Accuracy: 39581/40000.0 (98.9525%)
benign test loss (after fedavg) 0.043331412628293035
benign test acc (after fedavg) 98.9525
Test set:local_trigger0Poison Accuracy: 31/4000 (1%)
Done in 4.9773571491241455 sec.
select client [64, 787, 702, 367, 671, 404, 770, 745, 38, 306]
l2 norm of benign user before server clipping 0.200404354929924
l2 norm of benign user after server clipping 0.19969461262226104
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
Traceback (most recent call last):
  File "/home/hjb/src/eminist_attack_from_epoch1800_four_trigger_accNum=12.py", line 34, in <module>
    train_loaders,test_loader=util.load_Non_IID_clean_data(number_of_total_participants=participant_population,dirichlet_alpha=0.9)
  File "/home/hjb/src/eminist_util.py", line 36, in load_Non_IID_clean_data
    indices_per_participant = sample_dirichlet_train_data(dataset=train_set,
  File "/home/hjb/src/eminist_util.py", line 58, in sample_dirichlet_train_data
    for ind, data in enumerate(dataset):
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torchvision/datasets/mnist.py", line 145, in __getitem__
    img = self.transform(img)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torchvision/transforms/transforms.py", line 95, in __call__
    img = t(img)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torchvision/transforms/transforms.py", line 137, in __call__
    return F.to_tensor(pic)
  File "/home/hjb/miniconda3/envs/py39/lib/python3.9/site-packages/torchvision/transforms/functional.py", line 172, in to_tensor
    img = img.permute((2, 0, 1)).contiguous()
KeyboardInterrupt
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
/home/hjb/src/backup/fed_learning_test/saved_models/emnist_resnet_Snorm_1_checkpoint_model_epoch_1950.pth
load data success
select client [245, 325, 493, 538, 491, 162, 690, 158, 180, 738]
l2 norm of benign user before server clipping 0.4377594381570816
l2 norm of benign user after server clipping 0.40640216767787934
/home/hjb/src/eminist_util.py:240: UserWarning: To copy construct from a tensor, it is recommended to use sourceTensor.clone().detach() or sourceTensor.clone().detach().requires_grad_(True), rather than torch.tensor(sourceTensor).
  update_per_layer = torch.tensor(update_per_layer, dtype=data.dtype)
___Test : epoch: 1950: Average loss: 0.7083, Accuracy: 31513/40000.0 (78.7825%)
benign test loss (after fedavg) 0.7082621563911438
benign test acc (after fedavg) 78.7825
Done in 5.051433324813843 sec.
select client [438, 835, 663, 790, 727, 483, 80, 995, 334, 480]
l2 norm of benign user before server clipping 0.3484636828303337
l2 norm of benign user after server clipping 0.3484636828303337
___Test : epoch: 1951: Average loss: 0.1277, Accuracy: 38493/40000.0 (96.2325%)
benign test loss (after fedavg) 0.12772973518967629
benign test acc (after fedavg) 96.2325
Done in 4.366569519042969 sec.
select client [171, 246, 515, 51, 686, 248, 947, 966, 358, 219]
l2 norm of benign user before server clipping 0.3631105676293373
l2 norm of benign user after server clipping 0.3376764789223671
___Test : epoch: 1952: Average loss: 0.2121, Accuracy: 37655/40000.0 (94.1375%)
benign test loss (after fedavg) 0.21209411408901216
benign test acc (after fedavg) 94.1375
Done in 3.614604949951172 sec.
select client [141, 727, 604, 587, 143, 629, 70, 892, 795, 77]
l2 norm of benign user before server clipping 0.4375054255127907
l2 norm of benign user after server clipping 0.37844407707452776
___Test : epoch: 1953: Average loss: 0.1303, Accuracy: 38862/40000.0 (97.1550%)
benign test loss (after fedavg) 0.13027011363506316
benign test acc (after fedavg) 97.155
Done in 3.7809622287750244 sec.
select client [865, 879, 400, 355, 324, 167, 512, 983, 10, 477]
l2 norm of benign user before server clipping 0.30004761219024656
l2 norm of benign user after server clipping 0.30004761219024656
___Test : epoch: 1954: Average loss: 0.0672, Accuracy: 39272/40000.0 (98.1800%)
benign test loss (after fedavg) 0.06716344338804484
benign test acc (after fedavg) 98.18
Done in 3.8260583877563477 sec.
select client [741, 134, 359, 424, 787, 970, 991, 422, 292]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.3371674915154775
l2 norm of benign user after server clipping 0.3281609250439538
Gen Trigger0 loss tensor(184.1897, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(180.8541, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(180.8472, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(180.8394, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger0 loss tensor(180.8396, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.039336
Poison Train Epoch: 1 	Loss: 0.091976
Poison Train Epoch: 2 	Loss: 0.032279
Poison Train Epoch: 3 	Loss: 0.016067
Poison Train Epoch: 4 	Loss: 0.188140
Poison Train Epoch: 5 	Loss: 0.056421
Poison Train Epoch: 6 	Loss: 0.044201
Poison Train Epoch: 7 	Loss: 0.020733
Poison Train Epoch: 8 	Loss: 0.080970
Poison Train Epoch: 9 	Loss: 0.141124
Poison Train Epoch: 10 	Loss: 0.034397
Poison Train Epoch: 11 	Loss: 0.031084
Poison Train Epoch: 12 	Loss: 0.032665
Poison Train Epoch: 13 	Loss: 0.052880
Poison Train Epoch: 14 	Loss: 0.016617
Poison Train Epoch: 15 	Loss: 0.032265
Poison Train Epoch: 16 	Loss: 0.023999
Poison Train Epoch: 17 	Loss: 0.020021
Poison Train Epoch: 18 	Loss: 0.096088
Poison Train Epoch: 19 	Loss: 0.081233
Test set:local_trigger0_poison_local_testPoison Accuracy: 3999/4000 (100%)
___Test : epoch: 1955: Average loss: 0.1502, Accuracy: 38423/40000.0 (96.0575%)
benign test loss (after fedavg) 0.15021962574720382
benign test acc (after fedavg) 96.05749999999999
Done in 33.01639199256897 sec.
select client [123, 342, 785, 901, 453, 547, 972, 307, 166, 743]
l2 norm of benign user before server clipping 0.27901989966630936
l2 norm of benign user after server clipping 0.2754629567265511
___Test : epoch: 1956: Average loss: 0.0708, Accuracy: 39341/40000.0 (98.3525%)
benign test loss (after fedavg) 0.07080537436008454
benign test acc (after fedavg) 98.35249999999999
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.921663761138916 sec.
select client [45, 835, 883, 316, 813, 331, 141, 740, 598, 423]
l2 norm of benign user before server clipping 0.2343520537018776
l2 norm of benign user after server clipping 0.2343520537018776
___Test : epoch: 1957: Average loss: 0.0468, Accuracy: 39542/40000.0 (98.8550%)
benign test loss (after fedavg) 0.04684382262825966
benign test acc (after fedavg) 98.855
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 5.412019491195679 sec.
select client [777, 251, 104, 247, 585, 867, 630, 388, 187, 671]
l2 norm of benign user before server clipping 0.32482107132673266
l2 norm of benign user after server clipping 0.32482107132673266
___Test : epoch: 1958: Average loss: 0.0653, Accuracy: 39397/40000.0 (98.4925%)
benign test loss (after fedavg) 0.0653054108440876
benign test acc (after fedavg) 98.4925
Test set:local_trigger0Poison Accuracy: 26/4000 (1%)
Done in 5.516295909881592 sec.
select client [443, 30, 69, 315, 598, 265, 99, 68, 583, 677]
l2 norm of benign user before server clipping 0.18787286281585694
l2 norm of benign user after server clipping 0.18787286281585694
___Test : epoch: 1959: Average loss: 0.0546, Accuracy: 39463/40000.0 (98.6575%)
benign test loss (after fedavg) 0.05457992746531963
benign test acc (after fedavg) 98.6575
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 5.119077205657959 sec.
select client [906, 500, 253, 271, 127, 369, 543, 746, 37]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.29572997821701896
l2 norm of benign user after server clipping 0.2869906524817149
Gen Trigger1 loss tensor(192.8562, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(192.1046, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(192.0780, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(192.0419, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger1 loss tensor(192.0334, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.177043
Poison Train Epoch: 1 	Loss: 0.057770
Poison Train Epoch: 2 	Loss: 0.020060
Poison Train Epoch: 3 	Loss: 0.016250
Poison Train Epoch: 4 	Loss: 0.080318
Poison Train Epoch: 5 	Loss: 0.051820
Poison Train Epoch: 6 	Loss: 0.028491
Poison Train Epoch: 7 	Loss: 0.084792
Poison Train Epoch: 8 	Loss: 0.086042
Poison Train Epoch: 9 	Loss: 0.020376
Poison Train Epoch: 10 	Loss: 0.077791
Poison Train Epoch: 11 	Loss: 0.025981
Poison Train Epoch: 12 	Loss: 0.244028
Poison Train Epoch: 13 	Loss: 0.039793
Poison Train Epoch: 14 	Loss: 0.012927
Poison Train Epoch: 15 	Loss: 0.014038
Poison Train Epoch: 16 	Loss: 0.060487
Poison Train Epoch: 17 	Loss: 0.051756
Poison Train Epoch: 18 	Loss: 0.024606
Poison Train Epoch: 19 	Loss: 0.023303
Test set:local_trigger1_poison_local_testPoison Accuracy: 3978/4000 (99%)
___Test : epoch: 1960: Average loss: 0.0466, Accuracy: 39530/40000.0 (98.8250%)
benign test loss (after fedavg) 0.04659788240194321
benign test acc (after fedavg) 98.825
Test set:local_trigger0Poison Accuracy: 2/4000 (0%)
Done in 34.93297100067139 sec.
select client [308, 120, 221, 700, 133, 95, 815, 705, 476, 305]
l2 norm of benign user before server clipping 0.32222451865673063
l2 norm of benign user after server clipping 0.2696187824010849
___Test : epoch: 1961: Average loss: 0.0752, Accuracy: 39199/40000.0 (97.9975%)
benign test loss (after fedavg) 0.07519547240436077
benign test acc (after fedavg) 97.9975
Test set:local_trigger0Poison Accuracy: 2/4000 (0%)
Done in 4.8044822216033936 sec.
select client [984, 370, 69, 681, 706, 633, 993, 981, 164, 374]
l2 norm of benign user before server clipping 0.27153225243091583
l2 norm of benign user after server clipping 0.27153225243091583
___Test : epoch: 1962: Average loss: 0.0705, Accuracy: 39369/40000.0 (98.4225%)
benign test loss (after fedavg) 0.07049568605422973
benign test acc (after fedavg) 98.4225
Test set:local_trigger0Poison Accuracy: 2/4000 (0%)
Done in 5.0193867683410645 sec.
select client [791, 427, 228, 434, 704, 182, 804, 699, 44, 352]
l2 norm of benign user before server clipping 0.18361154943704605
l2 norm of benign user after server clipping 0.18361154943704605
___Test : epoch: 1963: Average loss: 0.0535, Accuracy: 39438/40000.0 (98.5950%)
benign test loss (after fedavg) 0.05354110506027937
benign test acc (after fedavg) 98.595
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 5.071695327758789 sec.
select client [700, 77, 447, 890, 953, 353, 719, 195, 574, 676]
l2 norm of benign user before server clipping 0.25008185803890226
l2 norm of benign user after server clipping 0.24439667761325837
___Test : epoch: 1964: Average loss: 0.0423, Accuracy: 39544/40000.0 (98.8600%)
benign test loss (after fedavg) 0.04232032791227102
benign test acc (after fedavg) 98.86
Test set:local_trigger0Poison Accuracy: 1/4000 (0%)
Done in 5.036076068878174 sec.
select client [210, 749, 999, 10, 844, 914, 764, 351, 423]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.22218114717139137
l2 norm of benign user after server clipping 0.22218114717139137
Gen Trigger2 loss tensor(196.5309, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(195.1655, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(195.1795, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(195.1963, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger2 loss tensor(195.1853, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.113733
Poison Train Epoch: 1 	Loss: 0.035855
Poison Train Epoch: 2 	Loss: 0.105999
Poison Train Epoch: 3 	Loss: 0.051304
Poison Train Epoch: 4 	Loss: 0.146846
Poison Train Epoch: 5 	Loss: 0.032760
Poison Train Epoch: 6 	Loss: 0.014247
Poison Train Epoch: 7 	Loss: 0.028481
Poison Train Epoch: 8 	Loss: 0.028740
Poison Train Epoch: 9 	Loss: 0.015362
Poison Train Epoch: 10 	Loss: 0.017061
Poison Train Epoch: 11 	Loss: 0.060041
Poison Train Epoch: 12 	Loss: 0.019635
Poison Train Epoch: 13 	Loss: 0.044235
Poison Train Epoch: 14 	Loss: 0.035241
Poison Train Epoch: 15 	Loss: 0.023961
Poison Train Epoch: 16 	Loss: 0.022469
Poison Train Epoch: 17 	Loss: 0.029012
Poison Train Epoch: 18 	Loss: 0.087967
Poison Train Epoch: 19 	Loss: 0.068257
Test set:local_trigger2_poison_local_testPoison Accuracy: 3982/4000 (100%)
___Test : epoch: 1965: Average loss: 0.0597, Accuracy: 39425/40000.0 (98.5625%)
benign test loss (after fedavg) 0.05967929213345051
benign test acc (after fedavg) 98.5625
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 35.300374031066895 sec.
select client [545, 432, 975, 467, 544, 863, 669, 13, 522, 331]
l2 norm of benign user before server clipping 0.19368117675185204
l2 norm of benign user after server clipping 0.19368117675185204
___Test : epoch: 1966: Average loss: 0.0556, Accuracy: 39415/40000.0 (98.5375%)
benign test loss (after fedavg) 0.05555767826288938
benign test acc (after fedavg) 98.5375
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 5.002701282501221 sec.
select client [566, 854, 956, 111, 981, 310, 406, 473, 30, 26]
l2 norm of benign user before server clipping 0.18196606785058975
l2 norm of benign user after server clipping 0.18196606785058975
___Test : epoch: 1967: Average loss: 0.0422, Accuracy: 39539/40000.0 (98.8475%)
benign test loss (after fedavg) 0.042231626497209074
benign test acc (after fedavg) 98.8475
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 4.827448129653931 sec.
select client [985, 818, 477, 343, 230, 500, 37, 280, 318, 976]
l2 norm of benign user before server clipping 0.19529159739613533
l2 norm of benign user after server clipping 0.19529159739613533
___Test : epoch: 1968: Average loss: 0.0578, Accuracy: 39408/40000.0 (98.5200%)
benign test loss (after fedavg) 0.05783520562052727
benign test acc (after fedavg) 98.52
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Done in 5.186645030975342 sec.
select client [64, 787, 702, 367, 671, 404, 770, 745, 38, 306]
l2 norm of benign user before server clipping 0.21419450044631957
l2 norm of benign user after server clipping 0.21419450044631957
___Test : epoch: 1969: Average loss: 0.0423, Accuracy: 39591/40000.0 (98.9775%)
benign test loss (after fedavg) 0.04229119571447373
benign test acc (after fedavg) 98.97749999999999
Test set:local_trigger0Poison Accuracy: 1/4000 (0%)
Done in 4.982205629348755 sec.
select client [846, 657, 161, 444, 804, 328, 142, 481, 300]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.23600953072309494
l2 norm of benign user after server clipping 0.23600953072309494
Gen Trigger3 loss tensor(241.2005, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger3 loss tensor(241.0138, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger3 loss tensor(241.0958, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger3 loss tensor(241.0395, device='cuda:0', grad_fn=<AddBackward0>)
Gen Trigger3 loss tensor(241.0033, device='cuda:0', grad_fn=<AddBackward0>)
Poison Train Epoch: 0 	Loss: 0.063085
Poison Train Epoch: 1 	Loss: 0.196467
Poison Train Epoch: 2 	Loss: 0.048881
Poison Train Epoch: 3 	Loss: 0.098968
Poison Train Epoch: 4 	Loss: 0.067981
Poison Train Epoch: 5 	Loss: 0.055972
Poison Train Epoch: 6 	Loss: 0.047640
Poison Train Epoch: 7 	Loss: 0.048813
Poison Train Epoch: 8 	Loss: 0.020927
Poison Train Epoch: 9 	Loss: 0.020041
Poison Train Epoch: 10 	Loss: 0.015698
Poison Train Epoch: 11 	Loss: 0.035531
Poison Train Epoch: 12 	Loss: 0.011271
Poison Train Epoch: 13 	Loss: 0.035189
Poison Train Epoch: 14 	Loss: 0.073591
Poison Train Epoch: 15 	Loss: 0.193055
Poison Train Epoch: 16 	Loss: 0.022075
Poison Train Epoch: 17 	Loss: 0.198035
Poison Train Epoch: 18 	Loss: 0.016205
Poison Train Epoch: 19 	Loss: 0.048418
Test set:local_trigger3_poison_local_testPoison Accuracy: 3948/4000 (99%)
___Test : epoch: 1970: Average loss: 0.0537, Accuracy: 39386/40000.0 (98.4650%)
benign test loss (after fedavg) 0.053655439326167106
benign test acc (after fedavg) 98.465
Done in 36.90458798408508 sec.
select client [637, 796, 351, 825, 501, 51, 23, 671, 566, 394]
l2 norm of benign user before server clipping 0.17535601258277894
l2 norm of benign user after server clipping 0.17535601258277894
___Test : epoch: 1971: Average loss: 0.0707, Accuracy: 39236/40000.0 (98.0900%)
benign test loss (after fedavg) 0.07074456395804882
benign test acc (after fedavg) 98.09
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Test set:local_trigger1Poison Accuracy: 12/4000 (0%)
Test set:local_trigger2Poison Accuracy: 21/4000 (1%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39236/40000 (98%)
Test set:Globol Trigger Poison Accuracy: 0/4000 (0%)
Done in 13.426012754440308 sec.
select client [751, 453, 863, 552, 896, 738, 463, 665, 634, 572]
l2 norm of benign user before server clipping 0.16171949803829194
l2 norm of benign user after server clipping 0.16171949803829194
___Test : epoch: 1972: Average loss: 0.0400, Accuracy: 39604/40000.0 (99.0100%)
benign test loss (after fedavg) 0.04004789853990078
benign test acc (after fedavg) 99.00999999999999
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Test set:local_trigger1Poison Accuracy: 2/4000 (0%)
Test set:local_trigger2Poison Accuracy: 2/4000 (0%)
Test set:local_trigger3Poison Accuracy: 2/4000 (0%)
Test set:Main Accuracy: 39604/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 0/4000 (0%)
Done in 13.074187994003296 sec.
select client [530, 48, 643, 285, 189, 210, 407, 34, 42, 306]
l2 norm of benign user before server clipping 0.21667462289333345
l2 norm of benign user after server clipping 0.21667462289333345
___Test : epoch: 1973: Average loss: 0.0403, Accuracy: 39614/40000.0 (99.0350%)
benign test loss (after fedavg) 0.04029383668154478
benign test acc (after fedavg) 99.035
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Test set:local_trigger1Poison Accuracy: 20/4000 (0%)
Test set:local_trigger2Poison Accuracy: 29/4000 (1%)
Test set:local_trigger3Poison Accuracy: 17/4000 (0%)
Test set:Main Accuracy: 39614/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 0/4000 (0%)
Done in 13.039651870727539 sec.
select client [911, 932, 843, 494, 586, 348, 481, 958, 604, 733]
l2 norm of benign user before server clipping 0.1959613472223282
l2 norm of benign user after server clipping 0.1959613472223282
___Test : epoch: 1974: Average loss: 0.0537, Accuracy: 39474/40000.0 (98.6850%)
benign test loss (after fedavg) 0.053663338008522986
benign test acc (after fedavg) 98.685
Test set:local_trigger0Poison Accuracy: 12/4000 (0%)
Test set:local_trigger1Poison Accuracy: 19/4000 (0%)
Test set:local_trigger2Poison Accuracy: 25/4000 (1%)
Test set:local_trigger3Poison Accuracy: 17/4000 (0%)
Test set:Main Accuracy: 39474/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2/4000 (0%)
Done in 13.095181226730347 sec.
select client [905, 507, 632, 448, 119, 100, 82, 483, 410]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.16230628763635954
l2 norm of benign user after server clipping 0.16230628763635954
Poison Train Epoch: 0 	Loss: 0.053659
Poison Train Epoch: 1 	Loss: 0.012873
Poison Train Epoch: 2 	Loss: 0.017206
Poison Train Epoch: 3 	Loss: 0.055770
Poison Train Epoch: 4 	Loss: 0.015372
Poison Train Epoch: 5 	Loss: 0.018277
Poison Train Epoch: 6 	Loss: 0.024930
Poison Train Epoch: 7 	Loss: 0.050749
Poison Train Epoch: 8 	Loss: 0.031259
Poison Train Epoch: 9 	Loss: 0.037229
Poison Train Epoch: 10 	Loss: 0.053753
Poison Train Epoch: 11 	Loss: 0.013426
Poison Train Epoch: 12 	Loss: 0.070368
Poison Train Epoch: 13 	Loss: 0.011701
Poison Train Epoch: 14 	Loss: 0.019378
Poison Train Epoch: 15 	Loss: 0.039385
Poison Train Epoch: 16 	Loss: 0.008311
Poison Train Epoch: 17 	Loss: 0.115926
Poison Train Epoch: 18 	Loss: 0.036630
Poison Train Epoch: 19 	Loss: 0.011355
Test set:local_trigger0_poison_local_testPoison Accuracy: 4000/4000 (100%)
___Test : epoch: 1975: Average loss: 0.0388, Accuracy: 39567/40000.0 (98.9175%)
benign test loss (after fedavg) 0.03879585792273283
benign test acc (after fedavg) 98.9175
Test set:local_trigger0Poison Accuracy: 497/4000 (12%)
Test set:local_trigger1Poison Accuracy: 8/4000 (0%)
Test set:local_trigger2Poison Accuracy: 11/4000 (0%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39567/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 410/4000 (10%)
Done in 26.34128975868225 sec.
select client [469, 900, 957, 46, 717, 616, 357, 837, 662, 422]
l2 norm of benign user before server clipping 0.14238572493195534
l2 norm of benign user after server clipping 0.14238572493195534
___Test : epoch: 1976: Average loss: 0.0385, Accuracy: 39634/40000.0 (99.0850%)
benign test loss (after fedavg) 0.038459902645647526
benign test acc (after fedavg) 99.08500000000001
Test set:local_trigger0Poison Accuracy: 532/4000 (13%)
Test set:local_trigger1Poison Accuracy: 13/4000 (0%)
Test set:local_trigger2Poison Accuracy: 22/4000 (1%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39634/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 377/4000 (9%)
Done in 12.942695617675781 sec.
select client [713, 519, 68, 971, 277, 147, 891, 721, 547, 729]
l2 norm of benign user before server clipping 0.14213000237941742
l2 norm of benign user after server clipping 0.14213000237941742
___Test : epoch: 1977: Average loss: 0.0339, Accuracy: 39646/40000.0 (99.1150%)
benign test loss (after fedavg) 0.0338528810955584
benign test acc (after fedavg) 99.115
Test set:local_trigger0Poison Accuracy: 84/4000 (2%)
Test set:local_trigger1Poison Accuracy: 4/4000 (0%)
Test set:local_trigger2Poison Accuracy: 6/4000 (0%)
Test set:local_trigger3Poison Accuracy: 6/4000 (0%)
Test set:Main Accuracy: 39646/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 47/4000 (1%)
Done in 13.221998929977417 sec.
select client [897, 638, 411, 424, 310, 164, 246, 512, 509, 841]
l2 norm of benign user before server clipping 0.17815157882869243
l2 norm of benign user after server clipping 0.1771496545523405
___Test : epoch: 1978: Average loss: 0.0340, Accuracy: 39643/40000.0 (99.1075%)
benign test loss (after fedavg) 0.03396583997607231
benign test acc (after fedavg) 99.1075
Test set:local_trigger0Poison Accuracy: 0/4000 (0%)
Test set:local_trigger1Poison Accuracy: 1/4000 (0%)
Test set:local_trigger2Poison Accuracy: 3/4000 (0%)
Test set:local_trigger3Poison Accuracy: 3/4000 (0%)
Test set:Main Accuracy: 39643/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 0/4000 (0%)
Done in 12.833643913269043 sec.
select client [190, 767, 803, 862, 585, 646, 73, 684, 536, 936]
l2 norm of benign user before server clipping 0.1436838001012802
l2 norm of benign user after server clipping 0.1436838001012802
___Test : epoch: 1979: Average loss: 0.0340, Accuracy: 39650/40000.0 (99.1250%)
benign test loss (after fedavg) 0.03400403868705034
benign test acc (after fedavg) 99.125
Test set:local_trigger0Poison Accuracy: 6/4000 (0%)
Test set:local_trigger1Poison Accuracy: 3/4000 (0%)
Test set:local_trigger2Poison Accuracy: 4/4000 (0%)
Test set:local_trigger3Poison Accuracy: 4/4000 (0%)
Test set:Main Accuracy: 39650/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 1/4000 (0%)
Done in 13.087647438049316 sec.
select client [214, 489, 93, 716, 518, 651, 85, 202, 721]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.11395200010803011
l2 norm of benign user after server clipping 0.11395200010803011
Poison Train Epoch: 0 	Loss: 0.290762
Poison Train Epoch: 1 	Loss: 0.015342
Poison Train Epoch: 2 	Loss: 0.025609
Poison Train Epoch: 3 	Loss: 0.040105
Poison Train Epoch: 4 	Loss: 0.066513
Poison Train Epoch: 5 	Loss: 0.029818
Poison Train Epoch: 6 	Loss: 0.032636
Poison Train Epoch: 7 	Loss: 0.021545
Poison Train Epoch: 8 	Loss: 0.053484
Poison Train Epoch: 9 	Loss: 0.050160
Poison Train Epoch: 10 	Loss: 0.045266
Poison Train Epoch: 11 	Loss: 0.060607
Poison Train Epoch: 12 	Loss: 0.050521
Poison Train Epoch: 13 	Loss: 0.029314
Poison Train Epoch: 14 	Loss: 0.016438
Poison Train Epoch: 15 	Loss: 0.069116
Poison Train Epoch: 16 	Loss: 0.048828
Poison Train Epoch: 17 	Loss: 0.016844
Poison Train Epoch: 18 	Loss: 0.065411
Poison Train Epoch: 19 	Loss: 0.007727
Test set:local_trigger1_poison_local_testPoison Accuracy: 3984/4000 (100%)
___Test : epoch: 1980: Average loss: 0.0322, Accuracy: 39671/40000.0 (99.1775%)
benign test loss (after fedavg) 0.032160093134641646
benign test acc (after fedavg) 99.1775
Test set:local_trigger0Poison Accuracy: 99/4000 (2%)
Test set:local_trigger1Poison Accuracy: 19/4000 (0%)
Test set:local_trigger2Poison Accuracy: 28/4000 (1%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39671/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 43/4000 (1%)
Done in 26.584475994110107 sec.
select client [717, 764, 980, 755, 884, 324, 494, 433, 627, 858]
l2 norm of benign user before server clipping 0.10476942248642444
l2 norm of benign user after server clipping 0.10476942248642444
___Test : epoch: 1981: Average loss: 0.0316, Accuracy: 39680/40000.0 (99.2000%)
benign test loss (after fedavg) 0.03158697018176317
benign test acc (after fedavg) 99.2
Test set:local_trigger0Poison Accuracy: 10/4000 (0%)
Test set:local_trigger1Poison Accuracy: 5/4000 (0%)
Test set:local_trigger2Poison Accuracy: 5/4000 (0%)
Test set:local_trigger3Poison Accuracy: 6/4000 (0%)
Test set:Main Accuracy: 39680/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 7/4000 (0%)
Done in 12.781158685684204 sec.
select client [479, 77, 865, 317, 384, 892, 937, 583, 32, 427]
l2 norm of benign user before server clipping 0.12964993864297866
l2 norm of benign user after server clipping 0.12964993864297866
___Test : epoch: 1982: Average loss: 0.0294, Accuracy: 39693/40000.0 (99.2325%)
benign test loss (after fedavg) 0.029353285808861256
benign test acc (after fedavg) 99.2325
Test set:local_trigger0Poison Accuracy: 27/4000 (1%)
Test set:local_trigger1Poison Accuracy: 4/4000 (0%)
Test set:local_trigger2Poison Accuracy: 5/4000 (0%)
Test set:local_trigger3Poison Accuracy: 4/4000 (0%)
Test set:Main Accuracy: 39693/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 17/4000 (0%)
Done in 12.867748737335205 sec.
select client [332, 540, 256, 980, 246, 453, 63, 951, 512, 287]
l2 norm of benign user before server clipping 0.11356795802712441
l2 norm of benign user after server clipping 0.11356795802712441
___Test : epoch: 1983: Average loss: 0.0339, Accuracy: 39674/40000.0 (99.1850%)
benign test loss (after fedavg) 0.03385599297881126
benign test acc (after fedavg) 99.185
Test set:local_trigger0Poison Accuracy: 3/4000 (0%)
Test set:local_trigger1Poison Accuracy: 18/4000 (0%)
Test set:local_trigger2Poison Accuracy: 24/4000 (1%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39674/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 0/4000 (0%)
Done in 12.976319074630737 sec.
select client [129, 26, 676, 554, 456, 564, 107, 434, 334, 573]
l2 norm of benign user before server clipping 0.08162204548716545
l2 norm of benign user after server clipping 0.08162204548716545
___Test : epoch: 1984: Average loss: 0.0291, Accuracy: 39693/40000.0 (99.2325%)
benign test loss (after fedavg) 0.029100623524934054
benign test acc (after fedavg) 99.2325
Test set:local_trigger0Poison Accuracy: 1/4000 (0%)
Test set:local_trigger1Poison Accuracy: 3/4000 (0%)
Test set:local_trigger2Poison Accuracy: 3/4000 (0%)
Test set:local_trigger3Poison Accuracy: 2/4000 (0%)
Test set:Main Accuracy: 39693/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 0/4000 (0%)
Done in 12.856157302856445 sec.
select client [787, 97, 862, 997, 32, 356, 728, 803, 418]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.12103256086508433
l2 norm of benign user after server clipping 0.12103256086508433
Poison Train Epoch: 0 	Loss: 0.033733
Poison Train Epoch: 1 	Loss: 0.071346
Poison Train Epoch: 2 	Loss: 0.084886
Poison Train Epoch: 3 	Loss: 0.054951
Poison Train Epoch: 4 	Loss: 0.019804
Poison Train Epoch: 5 	Loss: 0.013345
Poison Train Epoch: 6 	Loss: 0.073900
Poison Train Epoch: 7 	Loss: 0.011229
Poison Train Epoch: 8 	Loss: 0.039400
Poison Train Epoch: 9 	Loss: 0.023848
Poison Train Epoch: 10 	Loss: 0.029609
Poison Train Epoch: 11 	Loss: 0.013721
Poison Train Epoch: 12 	Loss: 0.048211
Poison Train Epoch: 13 	Loss: 0.016652
Poison Train Epoch: 14 	Loss: 0.107371
Poison Train Epoch: 15 	Loss: 0.027498
Poison Train Epoch: 16 	Loss: 0.010447
Poison Train Epoch: 17 	Loss: 0.045759
Poison Train Epoch: 18 	Loss: 0.020404
Poison Train Epoch: 19 	Loss: 0.138851
Test set:local_trigger2_poison_local_testPoison Accuracy: 3981/4000 (100%)
___Test : epoch: 1985: Average loss: 0.0367, Accuracy: 39656/40000.0 (99.1400%)
benign test loss (after fedavg) 0.036724362498521804
benign test acc (after fedavg) 99.14
Test set:local_trigger0Poison Accuracy: 19/4000 (0%)
Test set:local_trigger1Poison Accuracy: 20/4000 (0%)
Test set:local_trigger2Poison Accuracy: 39/4000 (1%)
Test set:local_trigger3Poison Accuracy: 13/4000 (0%)
Test set:Main Accuracy: 39656/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 7/4000 (0%)
Done in 26.91965913772583 sec.
select client [510, 975, 711, 824, 37, 422, 550, 694, 504, 89]
l2 norm of benign user before server clipping 0.10311349257826805
l2 norm of benign user after server clipping 0.10311349257826805
___Test : epoch: 1986: Average loss: 0.0319, Accuracy: 39649/40000.0 (99.1225%)
benign test loss (after fedavg) 0.031947005762904886
benign test acc (after fedavg) 99.1225
Test set:local_trigger0Poison Accuracy: 8/4000 (0%)
Test set:local_trigger1Poison Accuracy: 4/4000 (0%)
Test set:local_trigger2Poison Accuracy: 14/4000 (0%)
Test set:local_trigger3Poison Accuracy: 4/4000 (0%)
Test set:Main Accuracy: 39649/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 4/4000 (0%)
Done in 12.792791843414307 sec.
select client [736, 742, 677, 959, 656, 546, 136, 882, 815, 850]
l2 norm of benign user before server clipping 0.09574215020984411
l2 norm of benign user after server clipping 0.09574215020984411
___Test : epoch: 1987: Average loss: 0.0295, Accuracy: 39685/40000.0 (99.2125%)
benign test loss (after fedavg) 0.029460990918427705
benign test acc (after fedavg) 99.2125
Test set:local_trigger0Poison Accuracy: 57/4000 (1%)
Test set:local_trigger1Poison Accuracy: 4/4000 (0%)
Test set:local_trigger2Poison Accuracy: 9/4000 (0%)
Test set:local_trigger3Poison Accuracy: 5/4000 (0%)
Test set:Main Accuracy: 39685/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 33/4000 (1%)
Done in 12.721325397491455 sec.
select client [24, 214, 494, 972, 976, 153, 869, 844, 433, 885]
l2 norm of benign user before server clipping 0.08361401967704296
l2 norm of benign user after server clipping 0.08361401967704296
___Test : epoch: 1988: Average loss: 0.0297, Accuracy: 39666/40000.0 (99.1650%)
benign test loss (after fedavg) 0.029707272078096866
benign test acc (after fedavg) 99.165
Test set:local_trigger0Poison Accuracy: 45/4000 (1%)
Test set:local_trigger1Poison Accuracy: 2/4000 (0%)
Test set:local_trigger2Poison Accuracy: 4/4000 (0%)
Test set:local_trigger3Poison Accuracy: 3/4000 (0%)
Test set:Main Accuracy: 39666/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 21/4000 (1%)
Done in 12.822784185409546 sec.
select client [309, 712, 962, 254, 304, 34, 801, 632, 716, 520]
l2 norm of benign user before server clipping 0.06569256037473678
l2 norm of benign user after server clipping 0.06569256037473678
___Test : epoch: 1989: Average loss: 0.0286, Accuracy: 39697/40000.0 (99.2425%)
benign test loss (after fedavg) 0.028587846130132676
benign test acc (after fedavg) 99.2425
Test set:local_trigger0Poison Accuracy: 27/4000 (1%)
Test set:local_trigger1Poison Accuracy: 7/4000 (0%)
Test set:local_trigger2Poison Accuracy: 14/4000 (0%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39697/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 17/4000 (0%)
Done in 12.745537757873535 sec.
select client [222, 938, 819, 634, 20, 500, 46, 922, 557]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.05589568801224232
l2 norm of benign user after server clipping 0.05589568801224232
Poison Train Epoch: 0 	Loss: 0.237138
Poison Train Epoch: 1 	Loss: 0.034996
Poison Train Epoch: 2 	Loss: 0.155350
Poison Train Epoch: 3 	Loss: 0.009045
Poison Train Epoch: 4 	Loss: 0.013635
Poison Train Epoch: 5 	Loss: 0.052220
Poison Train Epoch: 6 	Loss: 0.076970
Poison Train Epoch: 7 	Loss: 0.130098
Poison Train Epoch: 8 	Loss: 0.125802
Poison Train Epoch: 9 	Loss: 0.005781
Poison Train Epoch: 10 	Loss: 0.027637
Poison Train Epoch: 11 	Loss: 0.012487
Poison Train Epoch: 12 	Loss: 0.015004
Poison Train Epoch: 13 	Loss: 0.007544
Poison Train Epoch: 14 	Loss: 0.077888
Poison Train Epoch: 15 	Loss: 0.020026
Poison Train Epoch: 16 	Loss: 0.008670
Poison Train Epoch: 17 	Loss: 0.014393
Poison Train Epoch: 18 	Loss: 0.007443
Poison Train Epoch: 19 	Loss: 0.019087
Test set:local_trigger3_poison_local_testPoison Accuracy: 3979/4000 (99%)
___Test : epoch: 1990: Average loss: 0.0280, Accuracy: 39712/40000.0 (99.2800%)
benign test loss (after fedavg) 0.027959351456165314
benign test acc (after fedavg) 99.28
Test set:local_trigger0Poison Accuracy: 206/4000 (5%)
Test set:local_trigger1Poison Accuracy: 11/4000 (0%)
Test set:local_trigger2Poison Accuracy: 28/4000 (1%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39712/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 107/4000 (3%)
Done in 26.518784284591675 sec.
select client [416, 463, 310, 709, 174, 644, 757, 91, 287, 746]
l2 norm of benign user before server clipping 0.06259163189679384
l2 norm of benign user after server clipping 0.06259163189679384
___Test : epoch: 1991: Average loss: 0.0272, Accuracy: 39722/40000.0 (99.3050%)
benign test loss (after fedavg) 0.027207915218174457
benign test acc (after fedavg) 99.30499999999999
Test set:local_trigger0Poison Accuracy: 85/4000 (2%)
Test set:local_trigger1Poison Accuracy: 4/4000 (0%)
Test set:local_trigger2Poison Accuracy: 8/4000 (0%)
Test set:local_trigger3Poison Accuracy: 3/4000 (0%)
Test set:Main Accuracy: 39722/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 36/4000 (1%)
Done in 12.984206914901733 sec.
select client [875, 611, 364, 144, 239, 924, 762, 180, 870, 914]
l2 norm of benign user before server clipping 0.059000227600336075
l2 norm of benign user after server clipping 0.059000227600336075
___Test : epoch: 1992: Average loss: 0.0296, Accuracy: 39698/40000.0 (99.2450%)
benign test loss (after fedavg) 0.02958635537698865
benign test acc (after fedavg) 99.245
Test set:local_trigger0Poison Accuracy: 213/4000 (5%)
Test set:local_trigger1Poison Accuracy: 11/4000 (0%)
Test set:local_trigger2Poison Accuracy: 30/4000 (1%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39698/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 135/4000 (3%)
Done in 12.871752500534058 sec.
select client [11, 846, 436, 197, 212, 879, 718, 626, 342, 86]
l2 norm of benign user before server clipping 0.04838997283950448
l2 norm of benign user after server clipping 0.04838997283950448
___Test : epoch: 1993: Average loss: 0.0285, Accuracy: 39697/40000.0 (99.2425%)
benign test loss (after fedavg) 0.02845609778687358
benign test acc (after fedavg) 99.2425
Test set:local_trigger0Poison Accuracy: 50/4000 (1%)
Test set:local_trigger1Poison Accuracy: 5/4000 (0%)
Test set:local_trigger2Poison Accuracy: 7/4000 (0%)
Test set:local_trigger3Poison Accuracy: 4/4000 (0%)
Test set:Main Accuracy: 39697/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 27/4000 (1%)
Done in 12.88716721534729 sec.
select client [451, 188, 562, 289, 757, 472, 471, 84, 446, 854]
l2 norm of benign user before server clipping 0.04561444781720638
l2 norm of benign user after server clipping 0.04561444781720638
___Test : epoch: 1994: Average loss: 0.0269, Accuracy: 39716/40000.0 (99.2900%)
benign test loss (after fedavg) 0.02694979977682233
benign test acc (after fedavg) 99.29
Test set:local_trigger0Poison Accuracy: 15/4000 (0%)
Test set:local_trigger1Poison Accuracy: 4/4000 (0%)
Test set:local_trigger2Poison Accuracy: 7/4000 (0%)
Test set:local_trigger3Poison Accuracy: 3/4000 (0%)
Test set:Main Accuracy: 39716/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 5/4000 (0%)
Done in 13.137497186660767 sec.
select client [184, 513, 802, 343, 101, 599, 188, 821, 58]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.03524556631843249
l2 norm of benign user after server clipping 0.03524556631843249
Poison Train Epoch: 0 	Loss: 0.109993
Poison Train Epoch: 1 	Loss: 0.019934
Poison Train Epoch: 2 	Loss: 0.013925
Poison Train Epoch: 3 	Loss: 0.005946
Poison Train Epoch: 4 	Loss: 0.005978
Poison Train Epoch: 5 	Loss: 0.006067
Poison Train Epoch: 6 	Loss: 0.017355
Poison Train Epoch: 7 	Loss: 0.054855
Poison Train Epoch: 8 	Loss: 0.012090
Poison Train Epoch: 9 	Loss: 0.023631
Poison Train Epoch: 10 	Loss: 0.103114
Poison Train Epoch: 11 	Loss: 0.036145
Poison Train Epoch: 12 	Loss: 0.027086
Poison Train Epoch: 13 	Loss: 0.008972
Poison Train Epoch: 14 	Loss: 0.064783
Poison Train Epoch: 15 	Loss: 0.025926
Poison Train Epoch: 16 	Loss: 0.029857
Poison Train Epoch: 17 	Loss: 0.036478
Poison Train Epoch: 18 	Loss: 0.044877
Poison Train Epoch: 19 	Loss: 0.039438
Test set:local_trigger0_poison_local_testPoison Accuracy: 4000/4000 (100%)
___Test : epoch: 1995: Average loss: 0.0332, Accuracy: 39668/40000.0 (99.1700%)
benign test loss (after fedavg) 0.03321670749187469
benign test acc (after fedavg) 99.17
Test set:local_trigger0Poison Accuracy: 2232/4000 (56%)
Test set:local_trigger1Poison Accuracy: 27/4000 (1%)
Test set:local_trigger2Poison Accuracy: 40/4000 (1%)
Test set:local_trigger3Poison Accuracy: 16/4000 (0%)
Test set:Main Accuracy: 39668/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2018/4000 (50%)
Done in 26.545578241348267 sec.
select client [145, 292, 383, 212, 548, 367, 131, 101, 541, 652]
l2 norm of benign user before server clipping 0.042585489153862
l2 norm of benign user after server clipping 0.042585489153862
___Test : epoch: 1996: Average loss: 0.0289, Accuracy: 39704/40000.0 (99.2600%)
benign test loss (after fedavg) 0.028877042224258184
benign test acc (after fedavg) 99.26
Test set:local_trigger0Poison Accuracy: 674/4000 (17%)
Test set:local_trigger1Poison Accuracy: 6/4000 (0%)
Test set:local_trigger2Poison Accuracy: 12/4000 (0%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39704/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 405/4000 (10%)
Done in 13.155030250549316 sec.
select client [278, 693, 855, 981, 25, 996, 561, 119, 962, 223]
l2 norm of benign user before server clipping 0.03108027996495366
l2 norm of benign user after server clipping 0.03108027996495366
___Test : epoch: 1997: Average loss: 0.0294, Accuracy: 39694/40000.0 (99.2350%)
benign test loss (after fedavg) 0.02937213785648346
benign test acc (after fedavg) 99.235
Test set:local_trigger0Poison Accuracy: 978/4000 (24%)
Test set:local_trigger1Poison Accuracy: 8/4000 (0%)
Test set:local_trigger2Poison Accuracy: 18/4000 (0%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39694/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 713/4000 (18%)
Done in 12.75608205795288 sec.
select client [29, 99, 74, 387, 849, 703, 168, 802, 228, 679]
l2 norm of benign user before server clipping 0.018463013460859656
l2 norm of benign user after server clipping 0.018463013460859656
___Test : epoch: 1998: Average loss: 0.0294, Accuracy: 39674/40000.0 (99.1850%)
benign test loss (after fedavg) 0.029382859579473734
benign test acc (after fedavg) 99.185
Test set:local_trigger0Poison Accuracy: 1715/4000 (43%)
Test set:local_trigger1Poison Accuracy: 8/4000 (0%)
Test set:local_trigger2Poison Accuracy: 16/4000 (0%)
Test set:local_trigger3Poison Accuracy: 6/4000 (0%)
Test set:Main Accuracy: 39674/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 1344/4000 (34%)
Done in 12.872307062149048 sec.
select client [103, 570, 967, 408, 907, 726, 960, 759, 836, 70]
l2 norm of benign user before server clipping 0.009748265403322876
l2 norm of benign user after server clipping 0.009748265403322876
___Test : epoch: 1999: Average loss: 0.0269, Accuracy: 39705/40000.0 (99.2625%)
benign test loss (after fedavg) 0.026930265484005213
benign test acc (after fedavg) 99.2625
Test set:local_trigger0Poison Accuracy: 312/4000 (8%)
Test set:local_trigger1Poison Accuracy: 2/4000 (0%)
Test set:local_trigger2Poison Accuracy: 3/4000 (0%)
Test set:local_trigger3Poison Accuracy: 2/4000 (0%)
Test set:Main Accuracy: 39705/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 188/4000 (5%)
Done in 12.922672986984253 sec.
select client [321, 827, 91, 516, 262, 283, 132, 557, 862]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.00844937156782382
l2 norm of benign user after server clipping 0.00844937156782382
Poison Train Epoch: 0 	Loss: 0.176912
Poison Train Epoch: 1 	Loss: 0.034013
Poison Train Epoch: 2 	Loss: 0.013900
Poison Train Epoch: 3 	Loss: 0.008584
Poison Train Epoch: 4 	Loss: 0.019951
Poison Train Epoch: 5 	Loss: 0.042470
Poison Train Epoch: 6 	Loss: 0.045800
Poison Train Epoch: 7 	Loss: 0.035705
Poison Train Epoch: 8 	Loss: 0.014286
Poison Train Epoch: 9 	Loss: 0.032580
Poison Train Epoch: 10 	Loss: 0.012391
Poison Train Epoch: 11 	Loss: 0.005973
Poison Train Epoch: 12 	Loss: 0.015538
Poison Train Epoch: 13 	Loss: 0.089680
Poison Train Epoch: 14 	Loss: 0.005453
Poison Train Epoch: 15 	Loss: 0.052730
Poison Train Epoch: 16 	Loss: 0.012836
Poison Train Epoch: 17 	Loss: 0.048544
Poison Train Epoch: 18 	Loss: 0.017299
Poison Train Epoch: 19 	Loss: 0.025966
Test set:local_trigger1_poison_local_testPoison Accuracy: 3984/4000 (100%)
___Test : epoch: 2000: Average loss: 0.0280, Accuracy: 39712/40000.0 (99.2800%)
benign test loss (after fedavg) 0.027951873165369033
benign test acc (after fedavg) 99.28
Test set:local_trigger0Poison Accuracy: 2289/4000 (57%)
Test set:local_trigger1Poison Accuracy: 27/4000 (1%)
Test set:local_trigger2Poison Accuracy: 50/4000 (1%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39712/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 1961/4000 (49%)
Done in 26.684200286865234 sec.
select client [243, 897, 881, 585, 937, 800, 823, 218, 321, 219]
l2 norm of benign user before server clipping 0.00569509940687567
l2 norm of benign user after server clipping 0.00569509940687567
___Test : epoch: 2001: Average loss: 0.0282, Accuracy: 39704/40000.0 (99.2600%)
benign test loss (after fedavg) 0.028241912948340178
benign test acc (after fedavg) 99.26
Test set:local_trigger0Poison Accuracy: 2355/4000 (59%)
Test set:local_trigger1Poison Accuracy: 18/4000 (0%)
Test set:local_trigger2Poison Accuracy: 34/4000 (1%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39704/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2037/4000 (51%)
Done in 12.907900333404541 sec.
select client [936, 503, 895, 738, 995, 37, 934, 20, 699, 578]
l2 norm of benign user before server clipping 0.008504046080633997
l2 norm of benign user after server clipping 0.008504046080633997
___Test : epoch: 2002: Average loss: 0.0280, Accuracy: 39701/40000.0 (99.2525%)
benign test loss (after fedavg) 0.02799117016047239
benign test acc (after fedavg) 99.2525
Test set:local_trigger0Poison Accuracy: 1238/4000 (31%)
Test set:local_trigger1Poison Accuracy: 11/4000 (0%)
Test set:local_trigger2Poison Accuracy: 26/4000 (1%)
Test set:local_trigger3Poison Accuracy: 7/4000 (0%)
Test set:Main Accuracy: 39701/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 874/4000 (22%)
Done in 12.915756464004517 sec.
select client [490, 823, 286, 837, 43, 89, 875, 285, 755, 315]
l2 norm of benign user before server clipping 0.005281630868557841
l2 norm of benign user after server clipping 0.005281630868557841
___Test : epoch: 2003: Average loss: 0.0272, Accuracy: 39712/40000.0 (99.2800%)
benign test loss (after fedavg) 0.02720434203594923
benign test acc (after fedavg) 99.28
Test set:local_trigger0Poison Accuracy: 1742/4000 (44%)
Test set:local_trigger1Poison Accuracy: 7/4000 (0%)
Test set:local_trigger2Poison Accuracy: 25/4000 (1%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39712/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 1374/4000 (34%)
Done in 13.069378852844238 sec.
select client [512, 353, 104, 779, 231, 449, 352, 581, 76, 62]
l2 norm of benign user before server clipping 0.006506950256880373
l2 norm of benign user after server clipping 0.006506950256880373
___Test : epoch: 2004: Average loss: 0.0282, Accuracy: 39708/40000.0 (99.2700%)
benign test loss (after fedavg) 0.02815529576539993
benign test acc (after fedavg) 99.27
Test set:local_trigger0Poison Accuracy: 567/4000 (14%)
Test set:local_trigger1Poison Accuracy: 9/4000 (0%)
Test set:local_trigger2Poison Accuracy: 24/4000 (1%)
Test set:local_trigger3Poison Accuracy: 6/4000 (0%)
Test set:Main Accuracy: 39708/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 348/4000 (9%)
Done in 12.921396970748901 sec.
select client [22, 250, 584, 199, 108, 74, 719, 353, 275]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.004495702787405915
l2 norm of benign user after server clipping 0.004495702787405915
Poison Train Epoch: 0 	Loss: 0.043835
Poison Train Epoch: 1 	Loss: 0.056870
Poison Train Epoch: 2 	Loss: 0.008456
Poison Train Epoch: 3 	Loss: 0.009666
Poison Train Epoch: 4 	Loss: 0.056433
Poison Train Epoch: 5 	Loss: 0.012002
Poison Train Epoch: 6 	Loss: 0.006535
Poison Train Epoch: 7 	Loss: 0.014947
Poison Train Epoch: 8 	Loss: 0.071120
Poison Train Epoch: 9 	Loss: 0.067750
Poison Train Epoch: 10 	Loss: 0.012039
Poison Train Epoch: 11 	Loss: 0.117973
Poison Train Epoch: 12 	Loss: 0.028180
Poison Train Epoch: 13 	Loss: 0.009763
Poison Train Epoch: 14 	Loss: 0.068016
Poison Train Epoch: 15 	Loss: 0.079864
Poison Train Epoch: 16 	Loss: 0.070764
Poison Train Epoch: 17 	Loss: 0.012782
Poison Train Epoch: 18 	Loss: 0.014447
Poison Train Epoch: 19 	Loss: 0.033621
Test set:local_trigger2_poison_local_testPoison Accuracy: 3988/4000 (100%)
___Test : epoch: 2005: Average loss: 0.0291, Accuracy: 39724/40000.0 (99.3100%)
benign test loss (after fedavg) 0.029078952956944706
benign test acc (after fedavg) 99.31
Test set:local_trigger0Poison Accuracy: 2825/4000 (71%)
Test set:local_trigger1Poison Accuracy: 46/4000 (1%)
Test set:local_trigger2Poison Accuracy: 109/4000 (3%)
Test set:local_trigger3Poison Accuracy: 22/4000 (1%)
Test set:Main Accuracy: 39724/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2497/4000 (62%)
Done in 26.458961009979248 sec.
select client [152, 603, 293, 997, 105, 958, 871, 628, 330, 193]
l2 norm of benign user before server clipping 0.007846137741580606
l2 norm of benign user after server clipping 0.007846137741580606
___Test : epoch: 2006: Average loss: 0.0282, Accuracy: 39709/40000.0 (99.2725%)
benign test loss (after fedavg) 0.02820415589660406
benign test acc (after fedavg) 99.2725
Test set:local_trigger0Poison Accuracy: 3176/4000 (79%)
Test set:local_trigger1Poison Accuracy: 39/4000 (1%)
Test set:local_trigger2Poison Accuracy: 83/4000 (2%)
Test set:local_trigger3Poison Accuracy: 17/4000 (0%)
Test set:Main Accuracy: 39709/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2975/4000 (74%)
Done in 13.125720977783203 sec.
select client [65, 501, 709, 748, 625, 132, 504, 600, 952, 942]
l2 norm of benign user before server clipping 0.005667513329535722
l2 norm of benign user after server clipping 0.005667513329535722
___Test : epoch: 2007: Average loss: 0.0289, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.028937908141314982
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3281/4000 (82%)
Test set:local_trigger1Poison Accuracy: 45/4000 (1%)
Test set:local_trigger2Poison Accuracy: 89/4000 (2%)
Test set:local_trigger3Poison Accuracy: 20/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3084/4000 (77%)
Done in 12.709916114807129 sec.
select client [505, 205, 23, 901, 317, 728, 751, 602, 48, 576]
l2 norm of benign user before server clipping 0.006420972500927746
l2 norm of benign user after server clipping 0.006420972500927746
___Test : epoch: 2008: Average loss: 0.0267, Accuracy: 39724/40000.0 (99.3100%)
benign test loss (after fedavg) 0.026749879660457374
benign test acc (after fedavg) 99.31
Test set:local_trigger0Poison Accuracy: 2598/4000 (65%)
Test set:local_trigger1Poison Accuracy: 18/4000 (0%)
Test set:local_trigger2Poison Accuracy: 47/4000 (1%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39724/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2272/4000 (57%)
Done in 13.05411148071289 sec.
select client [108, 440, 184, 396, 66, 350, 579, 668, 753, 950]
l2 norm of benign user before server clipping 0.006471919431351125
l2 norm of benign user after server clipping 0.006471919431351125
___Test : epoch: 2009: Average loss: 0.0293, Accuracy: 39699/40000.0 (99.2475%)
benign test loss (after fedavg) 0.02930219918638468
benign test acc (after fedavg) 99.2475
Test set:local_trigger0Poison Accuracy: 2880/4000 (72%)
Test set:local_trigger1Poison Accuracy: 28/4000 (1%)
Test set:local_trigger2Poison Accuracy: 72/4000 (2%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39699/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2612/4000 (65%)
Done in 12.998266696929932 sec.
select client [299, 587, 187, 936, 86, 761, 264, 21, 653]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.005747167290084892
l2 norm of benign user after server clipping 0.005747167290084892
Poison Train Epoch: 0 	Loss: 0.105357
Poison Train Epoch: 1 	Loss: 0.027618
Poison Train Epoch: 2 	Loss: 0.022696
Poison Train Epoch: 3 	Loss: 0.008623
Poison Train Epoch: 4 	Loss: 0.008531
Poison Train Epoch: 5 	Loss: 0.031540
Poison Train Epoch: 6 	Loss: 0.043893
Poison Train Epoch: 7 	Loss: 0.033633
Poison Train Epoch: 8 	Loss: 0.013013
Poison Train Epoch: 9 	Loss: 0.012229
Poison Train Epoch: 10 	Loss: 0.055146
Poison Train Epoch: 11 	Loss: 0.014859
Poison Train Epoch: 12 	Loss: 0.016963
Poison Train Epoch: 13 	Loss: 0.010626
Poison Train Epoch: 14 	Loss: 0.003874
Poison Train Epoch: 15 	Loss: 0.027260
Poison Train Epoch: 16 	Loss: 0.009438
Poison Train Epoch: 17 	Loss: 0.020860
Poison Train Epoch: 18 	Loss: 0.009894
Poison Train Epoch: 19 	Loss: 0.009809
Test set:local_trigger3_poison_local_testPoison Accuracy: 3987/4000 (100%)
___Test : epoch: 2010: Average loss: 0.0300, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.02997462776005268
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 2828/4000 (71%)
Test set:local_trigger1Poison Accuracy: 57/4000 (1%)
Test set:local_trigger2Poison Accuracy: 146/4000 (4%)
Test set:local_trigger3Poison Accuracy: 28/4000 (1%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2464/4000 (62%)
Done in 26.494013786315918 sec.
select client [365, 576, 490, 796, 790, 899, 954, 318, 376, 127]
l2 norm of benign user before server clipping 0.004181630304083228
l2 norm of benign user after server clipping 0.004181630304083228
___Test : epoch: 2011: Average loss: 0.0304, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.03036876116320491
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3578/4000 (89%)
Test set:local_trigger1Poison Accuracy: 71/4000 (2%)
Test set:local_trigger2Poison Accuracy: 183/4000 (5%)
Test set:local_trigger3Poison Accuracy: 37/4000 (1%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3434/4000 (86%)
Done in 12.545058488845825 sec.
select client [972, 686, 227, 582, 53, 965, 992, 465, 431, 415]
l2 norm of benign user before server clipping 0.0036163042415864764
l2 norm of benign user after server clipping 0.0036163042415864764
___Test : epoch: 2012: Average loss: 0.0290, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.029010828464478253
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3347/4000 (84%)
Test set:local_trigger1Poison Accuracy: 53/4000 (1%)
Test set:local_trigger2Poison Accuracy: 124/4000 (3%)
Test set:local_trigger3Poison Accuracy: 28/4000 (1%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3144/4000 (79%)
Done in 12.625091075897217 sec.
select client [594, 192, 444, 579, 249, 52, 701, 940, 160, 519]
l2 norm of benign user before server clipping 0.008117621880955994
l2 norm of benign user after server clipping 0.008117621880955994
___Test : epoch: 2013: Average loss: 0.0307, Accuracy: 39701/40000.0 (99.2525%)
benign test loss (after fedavg) 0.030720577443391083
benign test acc (after fedavg) 99.2525
Test set:local_trigger0Poison Accuracy: 3612/4000 (90%)
Test set:local_trigger1Poison Accuracy: 67/4000 (2%)
Test set:local_trigger2Poison Accuracy: 160/4000 (4%)
Test set:local_trigger3Poison Accuracy: 37/4000 (1%)
Test set:Main Accuracy: 39701/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3527/4000 (88%)
Done in 13.219767808914185 sec.
select client [801, 640, 526, 699, 254, 111, 591, 855, 979, 126]
l2 norm of benign user before server clipping 0.008111246163025498
l2 norm of benign user after server clipping 0.008111246163025498
___Test : epoch: 2014: Average loss: 0.0306, Accuracy: 39693/40000.0 (99.2325%)
benign test loss (after fedavg) 0.03055466389507055
benign test acc (after fedavg) 99.2325
Test set:local_trigger0Poison Accuracy: 3076/4000 (77%)
Test set:local_trigger1Poison Accuracy: 51/4000 (1%)
Test set:local_trigger2Poison Accuracy: 123/4000 (3%)
Test set:local_trigger3Poison Accuracy: 27/4000 (1%)
Test set:Main Accuracy: 39693/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 2798/4000 (70%)
Done in 13.056645154953003 sec.
select client [21, 212, 604, 700, 449, 692, 492, 148, 261]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.010689845075830817
l2 norm of benign user after server clipping 0.010689845075830817
Poison Train Epoch: 0 	Loss: 0.053750
Poison Train Epoch: 1 	Loss: 0.020913
Poison Train Epoch: 2 	Loss: 0.011030
Poison Train Epoch: 3 	Loss: 0.054321
Poison Train Epoch: 4 	Loss: 0.024799
Poison Train Epoch: 5 	Loss: 0.022027
Poison Train Epoch: 6 	Loss: 0.072002
Poison Train Epoch: 7 	Loss: 0.008596
Poison Train Epoch: 8 	Loss: 0.010902
Poison Train Epoch: 9 	Loss: 0.011067
Poison Train Epoch: 10 	Loss: 0.042860
Poison Train Epoch: 11 	Loss: 0.017979
Poison Train Epoch: 12 	Loss: 0.007869
Poison Train Epoch: 13 	Loss: 0.052907
Poison Train Epoch: 14 	Loss: 0.009736
Poison Train Epoch: 15 	Loss: 0.065627
Poison Train Epoch: 16 	Loss: 0.028411
Poison Train Epoch: 17 	Loss: 0.009247
Poison Train Epoch: 18 	Loss: 0.007769
Poison Train Epoch: 19 	Loss: 0.021542
Test set:local_trigger0_poison_local_testPoison Accuracy: 4000/4000 (100%)
___Test : epoch: 2015: Average loss: 0.0328, Accuracy: 39689/40000.0 (99.2225%)
benign test loss (after fedavg) 0.032803153882920745
benign test acc (after fedavg) 99.2225
Test set:local_trigger0Poison Accuracy: 3713/4000 (93%)
Test set:local_trigger1Poison Accuracy: 92/4000 (2%)
Test set:local_trigger2Poison Accuracy: 186/4000 (5%)
Test set:local_trigger3Poison Accuracy: 51/4000 (1%)
Test set:Main Accuracy: 39689/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3671/4000 (92%)
Done in 26.857970476150513 sec.
select client [236, 386, 454, 124, 489, 35, 578, 268, 875, 606]
l2 norm of benign user before server clipping 0.007227843021973967
l2 norm of benign user after server clipping 0.007227843021973967
___Test : epoch: 2016: Average loss: 0.0297, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.029671276730298995
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3619/4000 (90%)
Test set:local_trigger1Poison Accuracy: 44/4000 (1%)
Test set:local_trigger2Poison Accuracy: 97/4000 (2%)
Test set:local_trigger3Poison Accuracy: 25/4000 (1%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3477/4000 (87%)
Done in 13.197543859481812 sec.
select client [328, 258, 795, 174, 238, 204, 44, 20, 473, 443]
l2 norm of benign user before server clipping 0.005264192319009453
l2 norm of benign user after server clipping 0.005264192319009453
___Test : epoch: 2017: Average loss: 0.0279, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.027868723490834236
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3671/4000 (92%)
Test set:local_trigger1Poison Accuracy: 30/4000 (1%)
Test set:local_trigger2Poison Accuracy: 75/4000 (2%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3544/4000 (89%)
Done in 13.095171928405762 sec.
select client [349, 769, 62, 214, 134, 489, 513, 142, 316, 240]
l2 norm of benign user before server clipping 0.009136028995271772
l2 norm of benign user after server clipping 0.009136028995271772
___Test : epoch: 2018: Average loss: 0.0285, Accuracy: 39714/40000.0 (99.2850%)
benign test loss (after fedavg) 0.02853046031445265
benign test acc (after fedavg) 99.285
Test set:local_trigger0Poison Accuracy: 3681/4000 (92%)
Test set:local_trigger1Poison Accuracy: 36/4000 (1%)
Test set:local_trigger2Poison Accuracy: 86/4000 (2%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39714/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3599/4000 (90%)
Done in 12.872937679290771 sec.
select client [354, 253, 871, 732, 718, 541, 948, 311, 375, 63]
l2 norm of benign user before server clipping 0.006198844569735229
l2 norm of benign user after server clipping 0.006198844569735229
___Test : epoch: 2019: Average loss: 0.0287, Accuracy: 39715/40000.0 (99.2875%)
benign test loss (after fedavg) 0.02873207473680377
benign test acc (after fedavg) 99.2875
Test set:local_trigger0Poison Accuracy: 3855/4000 (96%)
Test set:local_trigger1Poison Accuracy: 48/4000 (1%)
Test set:local_trigger2Poison Accuracy: 108/4000 (3%)
Test set:local_trigger3Poison Accuracy: 24/4000 (1%)
Test set:Main Accuracy: 39715/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3818/4000 (95%)
Done in 12.83745789527893 sec.
select client [25, 194, 94, 874, 325, 349, 612, 837, 981]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.00481450604274869
l2 norm of benign user after server clipping 0.00481450604274869
Poison Train Epoch: 0 	Loss: 0.099127
Poison Train Epoch: 1 	Loss: 0.059847
Poison Train Epoch: 2 	Loss: 0.088279
Poison Train Epoch: 3 	Loss: 0.084538
Poison Train Epoch: 4 	Loss: 0.009640
Poison Train Epoch: 5 	Loss: 0.017187
Poison Train Epoch: 6 	Loss: 0.048252
Poison Train Epoch: 7 	Loss: 0.101868
Poison Train Epoch: 8 	Loss: 0.010801
Poison Train Epoch: 9 	Loss: 0.016304
Poison Train Epoch: 10 	Loss: 0.077560
Poison Train Epoch: 11 	Loss: 0.031697
Poison Train Epoch: 12 	Loss: 0.028084
Poison Train Epoch: 13 	Loss: 0.004688
Poison Train Epoch: 14 	Loss: 0.042617
Poison Train Epoch: 15 	Loss: 0.007872
Poison Train Epoch: 16 	Loss: 0.027185
Poison Train Epoch: 17 	Loss: 0.052671
Poison Train Epoch: 18 	Loss: 0.063940
Poison Train Epoch: 19 	Loss: 0.014006
Test set:local_trigger1_poison_local_testPoison Accuracy: 3984/4000 (100%)
___Test : epoch: 2020: Average loss: 0.0319, Accuracy: 39702/40000.0 (99.2550%)
benign test loss (after fedavg) 0.031920441854000094
benign test acc (after fedavg) 99.25500000000001
Test set:local_trigger0Poison Accuracy: 3685/4000 (92%)
Test set:local_trigger1Poison Accuracy: 94/4000 (2%)
Test set:local_trigger2Poison Accuracy: 236/4000 (6%)
Test set:local_trigger3Poison Accuracy: 42/4000 (1%)
Test set:Main Accuracy: 39702/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3581/4000 (90%)
Done in 26.616809606552124 sec.
select client [779, 12, 323, 846, 425, 926, 35, 626, 391, 181]
l2 norm of benign user before server clipping 0.008123538154177368
l2 norm of benign user after server clipping 0.008123538154177368
___Test : epoch: 2021: Average loss: 0.0309, Accuracy: 39699/40000.0 (99.2475%)
benign test loss (after fedavg) 0.030928299018740654
benign test acc (after fedavg) 99.2475
Test set:local_trigger0Poison Accuracy: 3792/4000 (95%)
Test set:local_trigger1Poison Accuracy: 80/4000 (2%)
Test set:local_trigger2Poison Accuracy: 177/4000 (4%)
Test set:local_trigger3Poison Accuracy: 33/4000 (1%)
Test set:Main Accuracy: 39699/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3727/4000 (93%)
Done in 13.066854476928711 sec.
select client [311, 422, 452, 485, 460, 777, 509, 439, 568, 125]
l2 norm of benign user before server clipping 0.008852916536852717
l2 norm of benign user after server clipping 0.008852916536852717
___Test : epoch: 2022: Average loss: 0.0326, Accuracy: 39675/40000.0 (99.1875%)
benign test loss (after fedavg) 0.03257425060197711
benign test acc (after fedavg) 99.1875
Test set:local_trigger0Poison Accuracy: 3829/4000 (96%)
Test set:local_trigger1Poison Accuracy: 89/4000 (2%)
Test set:local_trigger2Poison Accuracy: 197/4000 (5%)
Test set:local_trigger3Poison Accuracy: 40/4000 (1%)
Test set:Main Accuracy: 39675/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3776/4000 (94%)
Done in 13.033090114593506 sec.
select client [780, 104, 565, 362, 237, 875, 295, 343, 71, 450]
l2 norm of benign user before server clipping 0.00783859733492136
l2 norm of benign user after server clipping 0.00783859733492136
___Test : epoch: 2023: Average loss: 0.0294, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.029436780792474748
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 3834/4000 (96%)
Test set:local_trigger1Poison Accuracy: 65/4000 (2%)
Test set:local_trigger2Poison Accuracy: 147/4000 (4%)
Test set:local_trigger3Poison Accuracy: 25/4000 (1%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3794/4000 (95%)
Done in 12.765236139297485 sec.
select client [466, 354, 323, 571, 986, 686, 421, 676, 684, 851]
l2 norm of benign user before server clipping 0.007630920235533268
l2 norm of benign user after server clipping 0.007630920235533268
___Test : epoch: 2024: Average loss: 0.0287, Accuracy: 39717/40000.0 (99.2925%)
benign test loss (after fedavg) 0.028658892190456392
benign test acc (after fedavg) 99.29249999999999
Test set:local_trigger0Poison Accuracy: 3884/4000 (97%)
Test set:local_trigger1Poison Accuracy: 66/4000 (2%)
Test set:local_trigger2Poison Accuracy: 130/4000 (3%)
Test set:local_trigger3Poison Accuracy: 26/4000 (1%)
Test set:Main Accuracy: 39717/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3870/4000 (97%)
Done in 12.995837211608887 sec.
select client [880, 279, 283, 843, 468, 866, 53, 797, 435]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.00801289399775366
l2 norm of benign user after server clipping 0.00801289399775366
Poison Train Epoch: 0 	Loss: 0.058119
Poison Train Epoch: 1 	Loss: 0.024892
Poison Train Epoch: 2 	Loss: 0.003221
Poison Train Epoch: 3 	Loss: 0.038057
Poison Train Epoch: 4 	Loss: 0.034736
Poison Train Epoch: 5 	Loss: 0.014236
Poison Train Epoch: 6 	Loss: 0.007130
Poison Train Epoch: 7 	Loss: 0.015587
Poison Train Epoch: 8 	Loss: 0.009430
Poison Train Epoch: 9 	Loss: 0.049544
Poison Train Epoch: 10 	Loss: 0.039394
Poison Train Epoch: 11 	Loss: 0.024008
Poison Train Epoch: 12 	Loss: 0.007990
Poison Train Epoch: 13 	Loss: 0.011441
Poison Train Epoch: 14 	Loss: 0.022684
Poison Train Epoch: 15 	Loss: 0.014615
Poison Train Epoch: 16 	Loss: 0.012838
Poison Train Epoch: 17 	Loss: 0.087368
Poison Train Epoch: 18 	Loss: 0.147924
Poison Train Epoch: 19 	Loss: 0.019526
Test set:local_trigger2_poison_local_testPoison Accuracy: 3986/4000 (100%)
___Test : epoch: 2025: Average loss: 0.0312, Accuracy: 39712/40000.0 (99.2800%)
benign test loss (after fedavg) 0.031169561676681043
benign test acc (after fedavg) 99.28
Test set:local_trigger0Poison Accuracy: 3873/4000 (97%)
Test set:local_trigger1Poison Accuracy: 115/4000 (3%)
Test set:local_trigger2Poison Accuracy: 430/4000 (11%)
Test set:local_trigger3Poison Accuracy: 50/4000 (1%)
Test set:Main Accuracy: 39712/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3849/4000 (96%)
Done in 27.141550064086914 sec.
select client [860, 59, 781, 560, 691, 514, 980, 330, 106, 214]
l2 norm of benign user before server clipping 0.006362775596790016
l2 norm of benign user after server clipping 0.006362775596790016
___Test : epoch: 2026: Average loss: 0.0312, Accuracy: 39700/40000.0 (99.2500%)
benign test loss (after fedavg) 0.0312247108027339
benign test acc (after fedavg) 99.25
Test set:local_trigger0Poison Accuracy: 3866/4000 (97%)
Test set:local_trigger1Poison Accuracy: 96/4000 (2%)
Test set:local_trigger2Poison Accuracy: 333/4000 (8%)
Test set:local_trigger3Poison Accuracy: 43/4000 (1%)
Test set:Main Accuracy: 39700/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3831/4000 (96%)
Done in 12.818843841552734 sec.
select client [970, 603, 765, 516, 701, 936, 375, 189, 828, 532]
l2 norm of benign user before server clipping 0.007081326306797564
l2 norm of benign user after server clipping 0.007081326306797564
___Test : epoch: 2027: Average loss: 0.0309, Accuracy: 39700/40000.0 (99.2500%)
benign test loss (after fedavg) 0.030899223080277444
benign test acc (after fedavg) 99.25
Test set:local_trigger0Poison Accuracy: 3888/4000 (97%)
Test set:local_trigger1Poison Accuracy: 115/4000 (3%)
Test set:local_trigger2Poison Accuracy: 403/4000 (10%)
Test set:local_trigger3Poison Accuracy: 45/4000 (1%)
Test set:Main Accuracy: 39700/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3862/4000 (97%)
Done in 12.917862176895142 sec.
select client [749, 99, 64, 284, 71, 262, 238, 592, 109, 365]
l2 norm of benign user before server clipping 0.007037655054591596
l2 norm of benign user after server clipping 0.007037655054591596
___Test : epoch: 2028: Average loss: 0.0314, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.03135212011784315
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3918/4000 (98%)
Test set:local_trigger1Poison Accuracy: 130/4000 (3%)
Test set:local_trigger2Poison Accuracy: 512/4000 (13%)
Test set:local_trigger3Poison Accuracy: 55/4000 (1%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3907/4000 (98%)
Done in 13.047333478927612 sec.
select client [558, 46, 811, 470, 362, 382, 456, 993, 125, 697]
l2 norm of benign user before server clipping 0.006527747469954192
l2 norm of benign user after server clipping 0.006527747469954192
___Test : epoch: 2029: Average loss: 0.0294, Accuracy: 39695/40000.0 (99.2375%)
benign test loss (after fedavg) 0.029415078877657652
benign test acc (after fedavg) 99.2375
Test set:local_trigger0Poison Accuracy: 3808/4000 (95%)
Test set:local_trigger1Poison Accuracy: 39/4000 (1%)
Test set:local_trigger2Poison Accuracy: 109/4000 (3%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39695/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3751/4000 (94%)
Done in 12.943166017532349 sec.
select client [63, 874, 672, 738, 322, 554, 185, 646, 82]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.0062036354275834225
l2 norm of benign user after server clipping 0.0062036354275834225
Poison Train Epoch: 0 	Loss: 0.020416
Poison Train Epoch: 1 	Loss: 0.020590
Poison Train Epoch: 2 	Loss: 0.041315
Poison Train Epoch: 3 	Loss: 0.005169
Poison Train Epoch: 4 	Loss: 0.021244
Poison Train Epoch: 5 	Loss: 0.011909
Poison Train Epoch: 6 	Loss: 0.012474
Poison Train Epoch: 7 	Loss: 0.078404
Poison Train Epoch: 8 	Loss: 0.017222
Poison Train Epoch: 9 	Loss: 0.023795
Poison Train Epoch: 10 	Loss: 0.014270
Poison Train Epoch: 11 	Loss: 0.040152
Poison Train Epoch: 12 	Loss: 0.008042
Poison Train Epoch: 13 	Loss: 0.011743
Poison Train Epoch: 14 	Loss: 0.007160
Poison Train Epoch: 15 	Loss: 0.012024
Poison Train Epoch: 16 	Loss: 0.022875
Poison Train Epoch: 17 	Loss: 0.009041
Poison Train Epoch: 18 	Loss: 0.035447
Poison Train Epoch: 19 	Loss: 0.126491
Test set:local_trigger3_poison_local_testPoison Accuracy: 3974/4000 (99%)
___Test : epoch: 2030: Average loss: 0.0335, Accuracy: 39681/40000.0 (99.2025%)
benign test loss (after fedavg) 0.033504619178175925
benign test acc (after fedavg) 99.2025
Test set:local_trigger0Poison Accuracy: 3655/4000 (91%)
Test set:local_trigger1Poison Accuracy: 117/4000 (3%)
Test set:local_trigger2Poison Accuracy: 629/4000 (16%)
Test set:local_trigger3Poison Accuracy: 58/4000 (1%)
Test set:Main Accuracy: 39681/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3530/4000 (88%)
Done in 26.463855981826782 sec.
select client [56, 106, 764, 380, 18, 178, 915, 48, 386, 564]
l2 norm of benign user before server clipping 0.00680303699336946
l2 norm of benign user after server clipping 0.00680303699336946
___Test : epoch: 2031: Average loss: 0.0309, Accuracy: 39700/40000.0 (99.2500%)
benign test loss (after fedavg) 0.030859570993483066
benign test acc (after fedavg) 99.25
Test set:local_trigger0Poison Accuracy: 3900/4000 (98%)
Test set:local_trigger1Poison Accuracy: 114/4000 (3%)
Test set:local_trigger2Poison Accuracy: 511/4000 (13%)
Test set:local_trigger3Poison Accuracy: 53/4000 (1%)
Test set:Main Accuracy: 39700/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3883/4000 (97%)
Done in 12.782093524932861 sec.
select client [398, 824, 52, 571, 847, 454, 500, 964, 963, 692]
l2 norm of benign user before server clipping 0.008923594269435852
l2 norm of benign user after server clipping 0.008923594269435852
___Test : epoch: 2032: Average loss: 0.0306, Accuracy: 39701/40000.0 (99.2525%)
benign test loss (after fedavg) 0.030635571844130755
benign test acc (after fedavg) 99.2525
Test set:local_trigger0Poison Accuracy: 3928/4000 (98%)
Test set:local_trigger1Poison Accuracy: 111/4000 (3%)
Test set:local_trigger2Poison Accuracy: 510/4000 (13%)
Test set:local_trigger3Poison Accuracy: 55/4000 (1%)
Test set:Main Accuracy: 39701/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3921/4000 (98%)
Done in 12.916941404342651 sec.
select client [70, 404, 181, 697, 552, 561, 627, 483, 895, 355]
l2 norm of benign user before server clipping 0.0064234625780954955
l2 norm of benign user after server clipping 0.0064234625780954955
___Test : epoch: 2033: Average loss: 0.0301, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.030125095285475256
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 3903/4000 (98%)
Test set:local_trigger1Poison Accuracy: 107/4000 (3%)
Test set:local_trigger2Poison Accuracy: 462/4000 (12%)
Test set:local_trigger3Poison Accuracy: 50/4000 (1%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3883/4000 (97%)
Done in 12.98173451423645 sec.
select client [435, 774, 173, 747, 113, 985, 109, 783, 655, 580]
l2 norm of benign user before server clipping 0.005163032817654312
l2 norm of benign user after server clipping 0.005163032817654312
___Test : epoch: 2034: Average loss: 0.0303, Accuracy: 39704/40000.0 (99.2600%)
benign test loss (after fedavg) 0.030279142861813307
benign test acc (after fedavg) 99.26
Test set:local_trigger0Poison Accuracy: 3835/4000 (96%)
Test set:local_trigger1Poison Accuracy: 71/4000 (2%)
Test set:local_trigger2Poison Accuracy: 270/4000 (7%)
Test set:local_trigger3Poison Accuracy: 30/4000 (1%)
Test set:Main Accuracy: 39704/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3797/4000 (95%)
Done in 12.828237295150757 sec.
select client [731, 813, 242, 987, 791, 998, 777, 628, 485]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.006482460949983861
l2 norm of benign user after server clipping 0.006482460949983861
Poison Train Epoch: 0 	Loss: 0.027495
Poison Train Epoch: 1 	Loss: 0.005228
Poison Train Epoch: 2 	Loss: 0.016708
Poison Train Epoch: 3 	Loss: 0.123439
Poison Train Epoch: 4 	Loss: 0.045682
Poison Train Epoch: 5 	Loss: 0.036083
Poison Train Epoch: 6 	Loss: 0.075349
Poison Train Epoch: 7 	Loss: 0.030115
Poison Train Epoch: 8 	Loss: 0.016032
Poison Train Epoch: 9 	Loss: 0.042037
Poison Train Epoch: 10 	Loss: 0.029536
Poison Train Epoch: 11 	Loss: 0.016473
Poison Train Epoch: 12 	Loss: 0.015793
Poison Train Epoch: 13 	Loss: 0.023952
Poison Train Epoch: 14 	Loss: 0.008779
Poison Train Epoch: 15 	Loss: 0.007185
Poison Train Epoch: 16 	Loss: 0.031499
Poison Train Epoch: 17 	Loss: 0.012037
Poison Train Epoch: 18 	Loss: 0.030735
Poison Train Epoch: 19 	Loss: 0.009531
Test set:local_trigger0_poison_local_testPoison Accuracy: 4000/4000 (100%)
___Test : epoch: 2035: Average loss: 0.0397, Accuracy: 39604/40000.0 (99.0100%)
benign test loss (after fedavg) 0.039748384591937067
benign test acc (after fedavg) 99.00999999999999
Test set:local_trigger0Poison Accuracy: 3946/4000 (99%)
Test set:local_trigger1Poison Accuracy: 243/4000 (6%)
Test set:local_trigger2Poison Accuracy: 856/4000 (21%)
Test set:local_trigger3Poison Accuracy: 119/4000 (3%)
Test set:Main Accuracy: 39604/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3940/4000 (98%)
Done in 26.16817617416382 sec.
select client [587, 253, 396, 912, 53, 420, 889, 850, 905, 145]
l2 norm of benign user before server clipping 0.006221893336623907
l2 norm of benign user after server clipping 0.006221893336623907
___Test : epoch: 2036: Average loss: 0.0296, Accuracy: 39722/40000.0 (99.3050%)
benign test loss (after fedavg) 0.0295919951595366
benign test acc (after fedavg) 99.30499999999999
Test set:local_trigger0Poison Accuracy: 3968/4000 (99%)
Test set:local_trigger1Poison Accuracy: 90/4000 (2%)
Test set:local_trigger2Poison Accuracy: 414/4000 (10%)
Test set:local_trigger3Poison Accuracy: 46/4000 (1%)
Test set:Main Accuracy: 39722/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3964/4000 (99%)
Done in 12.861663818359375 sec.
select client [541, 599, 789, 573, 179, 549, 516, 416, 844, 937]
l2 norm of benign user before server clipping 0.009544898942112922
l2 norm of benign user after server clipping 0.009544898942112922
___Test : epoch: 2037: Average loss: 0.0298, Accuracy: 39707/40000.0 (99.2675%)
benign test loss (after fedavg) 0.029817761298269033
benign test acc (after fedavg) 99.2675
Test set:local_trigger0Poison Accuracy: 3966/4000 (99%)
Test set:local_trigger1Poison Accuracy: 108/4000 (3%)
Test set:local_trigger2Poison Accuracy: 472/4000 (12%)
Test set:local_trigger3Poison Accuracy: 56/4000 (1%)
Test set:Main Accuracy: 39707/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3960/4000 (99%)
Done in 12.85320234298706 sec.
select client [155, 307, 115, 736, 933, 166, 228, 487, 848, 353]
l2 norm of benign user before server clipping 0.006342215719632805
l2 norm of benign user after server clipping 0.006342215719632805
___Test : epoch: 2038: Average loss: 0.0296, Accuracy: 39715/40000.0 (99.2875%)
benign test loss (after fedavg) 0.029593290731310843
benign test acc (after fedavg) 99.2875
Test set:local_trigger0Poison Accuracy: 3970/4000 (99%)
Test set:local_trigger1Poison Accuracy: 91/4000 (2%)
Test set:local_trigger2Poison Accuracy: 428/4000 (11%)
Test set:local_trigger3Poison Accuracy: 39/4000 (1%)
Test set:Main Accuracy: 39715/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3966/4000 (99%)
Done in 12.934924840927124 sec.
select client [296, 520, 763, 482, 36, 576, 590, 370, 483, 593]
l2 norm of benign user before server clipping 0.006031452678143978
l2 norm of benign user after server clipping 0.006031452678143978
___Test : epoch: 2039: Average loss: 0.0289, Accuracy: 39727/40000.0 (99.3175%)
benign test loss (after fedavg) 0.028895676302164792
benign test acc (after fedavg) 99.31750000000001
Test set:local_trigger0Poison Accuracy: 3957/4000 (99%)
Test set:local_trigger1Poison Accuracy: 83/4000 (2%)
Test set:local_trigger2Poison Accuracy: 317/4000 (8%)
Test set:local_trigger3Poison Accuracy: 34/4000 (1%)
Test set:Main Accuracy: 39727/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3954/4000 (99%)
Done in 12.967990398406982 sec.
select client [21, 148, 412, 638, 341, 58, 987, 789, 170]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.007223719963803887
l2 norm of benign user after server clipping 0.007223719963803887
Poison Train Epoch: 0 	Loss: 0.019229
Poison Train Epoch: 1 	Loss: 0.014273
Poison Train Epoch: 2 	Loss: 0.041196
Poison Train Epoch: 3 	Loss: 0.020886
Poison Train Epoch: 4 	Loss: 0.012692
Poison Train Epoch: 5 	Loss: 0.033306
Poison Train Epoch: 6 	Loss: 0.026996
Poison Train Epoch: 7 	Loss: 0.023135
Poison Train Epoch: 8 	Loss: 0.026461
Poison Train Epoch: 9 	Loss: 0.054819
Poison Train Epoch: 10 	Loss: 0.018148
Poison Train Epoch: 11 	Loss: 0.015280
Poison Train Epoch: 12 	Loss: 0.005316
Poison Train Epoch: 13 	Loss: 0.035165
Poison Train Epoch: 14 	Loss: 0.039165
Poison Train Epoch: 15 	Loss: 0.011462
Poison Train Epoch: 16 	Loss: 0.015188
Poison Train Epoch: 17 	Loss: 0.016142
Poison Train Epoch: 18 	Loss: 0.042986
Poison Train Epoch: 19 	Loss: 0.007741
Test set:local_trigger1_poison_local_testPoison Accuracy: 3988/4000 (100%)
___Test : epoch: 2040: Average loss: 0.0350, Accuracy: 39664/40000.0 (99.1600%)
benign test loss (after fedavg) 0.035044394399225715
benign test acc (after fedavg) 99.16
Test set:local_trigger0Poison Accuracy: 3969/4000 (99%)
Test set:local_trigger1Poison Accuracy: 348/4000 (9%)
Test set:local_trigger2Poison Accuracy: 1284/4000 (32%)
Test set:local_trigger3Poison Accuracy: 108/4000 (3%)
Test set:Main Accuracy: 39664/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3962/4000 (99%)
Done in 26.739948987960815 sec.
select client [50, 430, 558, 872, 487, 997, 213, 399, 936, 524]
l2 norm of benign user before server clipping 0.009038980607874692
l2 norm of benign user after server clipping 0.009038980607874692
___Test : epoch: 2041: Average loss: 0.0321, Accuracy: 39695/40000.0 (99.2375%)
benign test loss (after fedavg) 0.03205453120097518
benign test acc (after fedavg) 99.2375
Test set:local_trigger0Poison Accuracy: 3971/4000 (99%)
Test set:local_trigger1Poison Accuracy: 241/4000 (6%)
Test set:local_trigger2Poison Accuracy: 1009/4000 (25%)
Test set:local_trigger3Poison Accuracy: 84/4000 (2%)
Test set:Main Accuracy: 39695/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3970/4000 (99%)
Done in 12.884112119674683 sec.
select client [466, 383, 227, 208, 556, 117, 560, 597, 698, 679]
l2 norm of benign user before server clipping 0.007852678326889873
l2 norm of benign user after server clipping 0.007852678326889873
___Test : epoch: 2042: Average loss: 0.0292, Accuracy: 39727/40000.0 (99.3175%)
benign test loss (after fedavg) 0.02920820959582925
benign test acc (after fedavg) 99.31750000000001
Test set:local_trigger0Poison Accuracy: 3959/4000 (99%)
Test set:local_trigger1Poison Accuracy: 136/4000 (3%)
Test set:local_trigger2Poison Accuracy: 540/4000 (14%)
Test set:local_trigger3Poison Accuracy: 49/4000 (1%)
Test set:Main Accuracy: 39727/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3955/4000 (99%)
Done in 12.998969793319702 sec.
select client [523, 965, 503, 609, 338, 307, 558, 849, 856, 254]
l2 norm of benign user before server clipping 0.008164959622081368
l2 norm of benign user after server clipping 0.008164959622081368
___Test : epoch: 2043: Average loss: 0.0313, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.03125867688134313
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3981/4000 (100%)
Test set:local_trigger1Poison Accuracy: 185/4000 (5%)
Test set:local_trigger2Poison Accuracy: 710/4000 (18%)
Test set:local_trigger3Poison Accuracy: 72/4000 (2%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3979/4000 (99%)
Done in 12.736312627792358 sec.
select client [570, 914, 819, 517, 706, 257, 29, 66, 705, 416]
l2 norm of benign user before server clipping 0.009099487937055529
l2 norm of benign user after server clipping 0.009099487937055529
___Test : epoch: 2044: Average loss: 0.0297, Accuracy: 39707/40000.0 (99.2675%)
benign test loss (after fedavg) 0.02969589838683605
benign test acc (after fedavg) 99.2675
Test set:local_trigger0Poison Accuracy: 3968/4000 (99%)
Test set:local_trigger1Poison Accuracy: 108/4000 (3%)
Test set:local_trigger2Poison Accuracy: 413/4000 (10%)
Test set:local_trigger3Poison Accuracy: 38/4000 (1%)
Test set:Main Accuracy: 39707/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3960/4000 (99%)
Done in 13.001677989959717 sec.
select client [325, 978, 406, 924, 134, 507, 847, 394, 782]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.005267912263257636
l2 norm of benign user after server clipping 0.005267912263257636
Poison Train Epoch: 0 	Loss: 0.084297
Poison Train Epoch: 1 	Loss: 0.043915
Poison Train Epoch: 2 	Loss: 0.006326
Poison Train Epoch: 3 	Loss: 0.008467
Poison Train Epoch: 4 	Loss: 0.156583
Poison Train Epoch: 5 	Loss: 0.021975
Poison Train Epoch: 6 	Loss: 0.047770
Poison Train Epoch: 7 	Loss: 0.013683
Poison Train Epoch: 8 	Loss: 0.028727
Poison Train Epoch: 9 	Loss: 0.028485
Poison Train Epoch: 10 	Loss: 0.007154
Poison Train Epoch: 11 	Loss: 0.021773
Poison Train Epoch: 12 	Loss: 0.003930
Poison Train Epoch: 13 	Loss: 0.013633
Poison Train Epoch: 14 	Loss: 0.015039
Poison Train Epoch: 15 	Loss: 0.018380
Poison Train Epoch: 16 	Loss: 0.034415
Poison Train Epoch: 17 	Loss: 0.051528
Poison Train Epoch: 18 	Loss: 0.017086
Poison Train Epoch: 19 	Loss: 0.013636
Test set:local_trigger2_poison_local_testPoison Accuracy: 3988/4000 (100%)
___Test : epoch: 2045: Average loss: 0.0309, Accuracy: 39702/40000.0 (99.2550%)
benign test loss (after fedavg) 0.030928395354002713
benign test acc (after fedavg) 99.25500000000001
Test set:local_trigger0Poison Accuracy: 3957/4000 (99%)
Test set:local_trigger1Poison Accuracy: 164/4000 (4%)
Test set:local_trigger2Poison Accuracy: 891/4000 (22%)
Test set:local_trigger3Poison Accuracy: 59/4000 (1%)
Test set:Main Accuracy: 39702/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3947/4000 (99%)
Done in 26.69769310951233 sec.
select client [224, 928, 881, 86, 13, 665, 201, 408, 575, 592]
l2 norm of benign user before server clipping 0.007987678470090031
l2 norm of benign user after server clipping 0.007987678470090031
___Test : epoch: 2046: Average loss: 0.0320, Accuracy: 39691/40000.0 (99.2275%)
benign test loss (after fedavg) 0.032013481916487216
benign test acc (after fedavg) 99.2275
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 288/4000 (7%)
Test set:local_trigger2Poison Accuracy: 1555/4000 (39%)
Test set:local_trigger3Poison Accuracy: 92/4000 (2%)
Test set:Main Accuracy: 39691/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 12.94514012336731 sec.
select client [711, 910, 902, 449, 926, 735, 123, 124, 848, 185]
l2 norm of benign user before server clipping 0.007476411107927561
l2 norm of benign user after server clipping 0.007476411107927561
___Test : epoch: 2047: Average loss: 0.0305, Accuracy: 39717/40000.0 (99.2925%)
benign test loss (after fedavg) 0.03046201040074229
benign test acc (after fedavg) 99.29249999999999
Test set:local_trigger0Poison Accuracy: 3980/4000 (100%)
Test set:local_trigger1Poison Accuracy: 184/4000 (5%)
Test set:local_trigger2Poison Accuracy: 1009/4000 (25%)
Test set:local_trigger3Poison Accuracy: 66/4000 (2%)
Test set:Main Accuracy: 39717/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3980/4000 (100%)
Done in 13.157597780227661 sec.
select client [265, 109, 332, 14, 493, 171, 441, 683, 345, 468]
l2 norm of benign user before server clipping 0.006634749541990459
l2 norm of benign user after server clipping 0.006634749541990459
___Test : epoch: 2048: Average loss: 0.0308, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.030807797269523145
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3983/4000 (100%)
Test set:local_trigger1Poison Accuracy: 160/4000 (4%)
Test set:local_trigger2Poison Accuracy: 848/4000 (21%)
Test set:local_trigger3Poison Accuracy: 61/4000 (2%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3980/4000 (100%)
Done in 13.062383890151978 sec.
select client [16, 101, 331, 50, 666, 242, 937, 968, 226, 832]
l2 norm of benign user before server clipping 0.006092433421872556
l2 norm of benign user after server clipping 0.006092433421872556
___Test : epoch: 2049: Average loss: 0.0310, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.031001735708862544
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3960/4000 (99%)
Test set:local_trigger1Poison Accuracy: 191/4000 (5%)
Test set:local_trigger2Poison Accuracy: 1043/4000 (26%)
Test set:local_trigger3Poison Accuracy: 70/4000 (2%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3957/4000 (99%)
Done in 13.091763257980347 sec.
select client [541, 820, 644, 122, 151, 942, 390, 742, 499]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.007756353873345587
l2 norm of benign user after server clipping 0.007756353873345587
Poison Train Epoch: 0 	Loss: 0.024019
Poison Train Epoch: 1 	Loss: 0.027929
Poison Train Epoch: 2 	Loss: 0.008208
Poison Train Epoch: 3 	Loss: 0.032518
Poison Train Epoch: 4 	Loss: 0.010417
Poison Train Epoch: 5 	Loss: 0.026049
Poison Train Epoch: 6 	Loss: 0.103032
Poison Train Epoch: 7 	Loss: 0.022927
Poison Train Epoch: 8 	Loss: 0.008709
Poison Train Epoch: 9 	Loss: 0.014871
Poison Train Epoch: 10 	Loss: 0.016770
Poison Train Epoch: 11 	Loss: 0.019634
Poison Train Epoch: 12 	Loss: 0.050089
Poison Train Epoch: 13 	Loss: 0.010246
Poison Train Epoch: 14 	Loss: 0.030072
Poison Train Epoch: 15 	Loss: 0.006566
Poison Train Epoch: 16 	Loss: 0.026197
Poison Train Epoch: 17 	Loss: 0.029000
Poison Train Epoch: 18 	Loss: 0.013609
Poison Train Epoch: 19 	Loss: 0.003123
Test set:local_trigger3_poison_local_testPoison Accuracy: 3979/4000 (99%)
___Test : epoch: 2050: Average loss: 0.0339, Accuracy: 39683/40000.0 (99.2075%)
benign test loss (after fedavg) 0.03394775486886501
benign test acc (after fedavg) 99.20750000000001
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 491/4000 (12%)
Test set:local_trigger2Poison Accuracy: 2182/4000 (55%)
Test set:local_trigger3Poison Accuracy: 178/4000 (4%)
Test set:Main Accuracy: 39683/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 27.181555032730103 sec.
select client [74, 263, 249, 390, 886, 101, 477, 226, 769, 317]
l2 norm of benign user before server clipping 0.008488870202563703
l2 norm of benign user after server clipping 0.008488870202563703
___Test : epoch: 2051: Average loss: 0.0319, Accuracy: 39700/40000.0 (99.2500%)
benign test loss (after fedavg) 0.031949313627928494
benign test acc (after fedavg) 99.25
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 305/4000 (8%)
Test set:local_trigger2Poison Accuracy: 1693/4000 (42%)
Test set:local_trigger3Poison Accuracy: 105/4000 (3%)
Test set:Main Accuracy: 39700/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3986/4000 (100%)
Done in 13.181857347488403 sec.
select client [619, 812, 873, 36, 697, 585, 385, 999, 524, 33]
l2 norm of benign user before server clipping 0.009799907356500626
l2 norm of benign user after server clipping 0.009799907356500626
___Test : epoch: 2052: Average loss: 0.0313, Accuracy: 39693/40000.0 (99.2325%)
benign test loss (after fedavg) 0.03130945046618581
benign test acc (after fedavg) 99.2325
Test set:local_trigger0Poison Accuracy: 3938/4000 (98%)
Test set:local_trigger1Poison Accuracy: 161/4000 (4%)
Test set:local_trigger2Poison Accuracy: 991/4000 (25%)
Test set:local_trigger3Poison Accuracy: 67/4000 (2%)
Test set:Main Accuracy: 39693/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3929/4000 (98%)
Done in 13.398414134979248 sec.
select client [618, 729, 502, 403, 350, 660, 833, 83, 646, 696]
l2 norm of benign user before server clipping 0.0067545327357947825
l2 norm of benign user after server clipping 0.0067545327357947825
___Test : epoch: 2053: Average loss: 0.0301, Accuracy: 39698/40000.0 (99.2450%)
benign test loss (after fedavg) 0.030127254355698824
benign test acc (after fedavg) 99.245
Test set:local_trigger0Poison Accuracy: 3942/4000 (99%)
Test set:local_trigger1Poison Accuracy: 107/4000 (3%)
Test set:local_trigger2Poison Accuracy: 752/4000 (19%)
Test set:local_trigger3Poison Accuracy: 41/4000 (1%)
Test set:Main Accuracy: 39698/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3937/4000 (98%)
Done in 13.134090900421143 sec.
select client [631, 136, 878, 35, 839, 963, 584, 671, 433, 685]
l2 norm of benign user before server clipping 0.009779337467625738
l2 norm of benign user after server clipping 0.009779337467625738
___Test : epoch: 2054: Average loss: 0.0313, Accuracy: 39693/40000.0 (99.2325%)
benign test loss (after fedavg) 0.03128965711593628
benign test acc (after fedavg) 99.2325
Test set:local_trigger0Poison Accuracy: 3934/4000 (98%)
Test set:local_trigger1Poison Accuracy: 137/4000 (3%)
Test set:local_trigger2Poison Accuracy: 895/4000 (22%)
Test set:local_trigger3Poison Accuracy: 61/4000 (2%)
Test set:Main Accuracy: 39693/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3927/4000 (98%)
Done in 12.845686197280884 sec.
select client [83, 127, 786, 712, 143, 239, 547, 313, 729]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.0048706793329781955
l2 norm of benign user after server clipping 0.0048706793329781955
Poison Train Epoch: 0 	Loss: 0.029142
Poison Train Epoch: 1 	Loss: 0.021368
Poison Train Epoch: 2 	Loss: 0.028853
Poison Train Epoch: 3 	Loss: 0.017621
Poison Train Epoch: 4 	Loss: 0.017458
Poison Train Epoch: 5 	Loss: 0.022760
Poison Train Epoch: 6 	Loss: 0.040841
Poison Train Epoch: 7 	Loss: 0.018100
Poison Train Epoch: 8 	Loss: 0.012940
Poison Train Epoch: 9 	Loss: 0.020271
Poison Train Epoch: 10 	Loss: 0.009644
Poison Train Epoch: 11 	Loss: 0.024881
Poison Train Epoch: 12 	Loss: 0.008913
Poison Train Epoch: 13 	Loss: 0.015342
Poison Train Epoch: 14 	Loss: 0.066548
Poison Train Epoch: 15 	Loss: 0.012193
Poison Train Epoch: 16 	Loss: 0.074547
Poison Train Epoch: 17 	Loss: 0.026676
Poison Train Epoch: 18 	Loss: 0.027786
Poison Train Epoch: 19 	Loss: 0.004818
Test set:local_trigger0_poison_local_testPoison Accuracy: 4000/4000 (100%)
___Test : epoch: 2055: Average loss: 0.0350, Accuracy: 39672/40000.0 (99.1800%)
benign test loss (after fedavg) 0.0349987177580595
benign test acc (after fedavg) 99.18
Test set:local_trigger0Poison Accuracy: 3982/4000 (100%)
Test set:local_trigger1Poison Accuracy: 164/4000 (4%)
Test set:local_trigger2Poison Accuracy: 721/4000 (18%)
Test set:local_trigger3Poison Accuracy: 77/4000 (2%)
Test set:Main Accuracy: 39672/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3983/4000 (100%)
Done in 26.411885023117065 sec.
select client [780, 75, 664, 280, 692, 770, 583, 630, 799, 485]
l2 norm of benign user before server clipping 0.010344959143549205
l2 norm of benign user after server clipping 0.010344959143549205
___Test : epoch: 2056: Average loss: 0.0304, Accuracy: 39715/40000.0 (99.2875%)
benign test loss (after fedavg) 0.030365037896484138
benign test acc (after fedavg) 99.2875
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 136/4000 (3%)
Test set:local_trigger2Poison Accuracy: 798/4000 (20%)
Test set:local_trigger3Poison Accuracy: 61/4000 (2%)
Test set:Main Accuracy: 39715/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 13.588411808013916 sec.
select client [719, 305, 42, 201, 99, 422, 474, 793, 728, 471]
l2 norm of benign user before server clipping 0.005572222173213959
l2 norm of benign user after server clipping 0.005572222173213959
___Test : epoch: 2057: Average loss: 0.0310, Accuracy: 39695/40000.0 (99.2375%)
benign test loss (after fedavg) 0.031040338659286498
benign test acc (after fedavg) 99.2375
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 155/4000 (4%)
Test set:local_trigger2Poison Accuracy: 896/4000 (22%)
Test set:local_trigger3Poison Accuracy: 67/4000 (2%)
Test set:Main Accuracy: 39695/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 12.90577745437622 sec.
select client [294, 587, 905, 781, 836, 734, 866, 251, 175, 860]
l2 norm of benign user before server clipping 0.007003220380283892
l2 norm of benign user after server clipping 0.007003220380283892
___Test : epoch: 2058: Average loss: 0.0296, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.029570839211344718
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3979/4000 (99%)
Test set:local_trigger1Poison Accuracy: 87/4000 (2%)
Test set:local_trigger2Poison Accuracy: 487/4000 (12%)
Test set:local_trigger3Poison Accuracy: 32/4000 (1%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3978/4000 (99%)
Done in 12.9796302318573 sec.
select client [901, 816, 924, 871, 422, 710, 191, 114, 604, 172]
l2 norm of benign user before server clipping 0.004342939984053373
l2 norm of benign user after server clipping 0.004342939984053373
___Test : epoch: 2059: Average loss: 0.0292, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.029186530808359385
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3964/4000 (99%)
Test set:local_trigger1Poison Accuracy: 41/4000 (1%)
Test set:local_trigger2Poison Accuracy: 254/4000 (6%)
Test set:local_trigger3Poison Accuracy: 17/4000 (0%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3964/4000 (99%)
Done in 12.555534601211548 sec.
select client [357, 819, 94, 756, 190, 844, 954, 596, 682]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.008343011037343077
l2 norm of benign user after server clipping 0.008343011037343077
Poison Train Epoch: 0 	Loss: 0.037856
Poison Train Epoch: 1 	Loss: 0.010906
Poison Train Epoch: 2 	Loss: 0.053807
Poison Train Epoch: 3 	Loss: 0.019262
Poison Train Epoch: 4 	Loss: 0.020081
Poison Train Epoch: 5 	Loss: 0.012590
Poison Train Epoch: 6 	Loss: 0.020554
Poison Train Epoch: 7 	Loss: 0.005349
Poison Train Epoch: 8 	Loss: 0.011476
Poison Train Epoch: 9 	Loss: 0.010954
Poison Train Epoch: 10 	Loss: 0.012437
Poison Train Epoch: 11 	Loss: 0.025033
Poison Train Epoch: 12 	Loss: 0.008579
Poison Train Epoch: 13 	Loss: 0.010197
Poison Train Epoch: 14 	Loss: 0.011454
Poison Train Epoch: 15 	Loss: 0.009018
Poison Train Epoch: 16 	Loss: 0.069084
Poison Train Epoch: 17 	Loss: 0.005747
Poison Train Epoch: 18 	Loss: 0.013789
Poison Train Epoch: 19 	Loss: 0.003163
Test set:local_trigger1_poison_local_testPoison Accuracy: 3992/4000 (100%)
___Test : epoch: 2060: Average loss: 0.0327, Accuracy: 39697/40000.0 (99.2425%)
benign test loss (after fedavg) 0.03267403915822506
benign test acc (after fedavg) 99.2425
Test set:local_trigger0Poison Accuracy: 3991/4000 (100%)
Test set:local_trigger1Poison Accuracy: 489/4000 (12%)
Test set:local_trigger2Poison Accuracy: 1920/4000 (48%)
Test set:local_trigger3Poison Accuracy: 132/4000 (3%)
Test set:Main Accuracy: 39697/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 25.220766067504883 sec.
select client [561, 645, 443, 691, 518, 840, 937, 221, 49, 613]
l2 norm of benign user before server clipping 0.005600771133322269
l2 norm of benign user after server clipping 0.005600771133322269
___Test : epoch: 2061: Average loss: 0.0324, Accuracy: 39691/40000.0 (99.2275%)
benign test loss (after fedavg) 0.032438239553570745
benign test acc (after fedavg) 99.2275
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 330/4000 (8%)
Test set:local_trigger2Poison Accuracy: 1521/4000 (38%)
Test set:local_trigger3Poison Accuracy: 99/4000 (2%)
Test set:Main Accuracy: 39691/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 13.063049077987671 sec.
select client [361, 69, 958, 531, 458, 687, 700, 360, 107, 797]
l2 norm of benign user before server clipping 0.009661916561890393
l2 norm of benign user after server clipping 0.009661916561890393
___Test : epoch: 2062: Average loss: 0.0299, Accuracy: 39709/40000.0 (99.2725%)
benign test loss (after fedavg) 0.02986363034695387
benign test acc (after fedavg) 99.2725
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 209/4000 (5%)
Test set:local_trigger2Poison Accuracy: 1030/4000 (26%)
Test set:local_trigger3Poison Accuracy: 63/4000 (2%)
Test set:Main Accuracy: 39709/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3987/4000 (100%)
Done in 13.261432409286499 sec.
select client [762, 439, 610, 426, 854, 473, 618, 193, 310, 889]
l2 norm of benign user before server clipping 0.009116206411272287
l2 norm of benign user after server clipping 0.009116206411272287
___Test : epoch: 2063: Average loss: 0.0294, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.029407456027716397
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3983/4000 (100%)
Test set:local_trigger1Poison Accuracy: 124/4000 (3%)
Test set:local_trigger2Poison Accuracy: 705/4000 (18%)
Test set:local_trigger3Poison Accuracy: 43/4000 (1%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3984/4000 (100%)
Done in 12.900754928588867 sec.
select client [184, 798, 687, 697, 95, 608, 936, 578, 472, 164]
l2 norm of benign user before server clipping 0.008796672243624926
l2 norm of benign user after server clipping 0.008796672243624926
___Test : epoch: 2064: Average loss: 0.0291, Accuracy: 39720/40000.0 (99.3000%)
benign test loss (after fedavg) 0.029072787553817033
benign test acc (after fedavg) 99.3
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 190/4000 (5%)
Test set:local_trigger2Poison Accuracy: 958/4000 (24%)
Test set:local_trigger3Poison Accuracy: 63/4000 (2%)
Test set:Main Accuracy: 39720/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3987/4000 (100%)
Done in 12.761314868927002 sec.
select client [338, 340, 756, 514, 659, 958, 130, 480, 603]
------------------poisoning-------------------
l2 norm of benign user before server clipping 0.0070493103056732155
l2 norm of benign user after server clipping 0.0070493103056732155
Poison Train Epoch: 0 	Loss: 0.044382
Poison Train Epoch: 1 	Loss: 0.023852
Poison Train Epoch: 2 	Loss: 0.061937
Poison Train Epoch: 3 	Loss: 0.028265
Poison Train Epoch: 4 	Loss: 0.057693
Poison Train Epoch: 5 	Loss: 0.011849
Poison Train Epoch: 6 	Loss: 0.013947
Poison Train Epoch: 7 	Loss: 0.038128
Poison Train Epoch: 8 	Loss: 0.005222
Poison Train Epoch: 9 	Loss: 0.016360
Poison Train Epoch: 10 	Loss: 0.055465
Poison Train Epoch: 11 	Loss: 0.010096
Poison Train Epoch: 12 	Loss: 0.026522
Poison Train Epoch: 13 	Loss: 0.064520
Poison Train Epoch: 14 	Loss: 0.013075
Poison Train Epoch: 15 	Loss: 0.007373
Poison Train Epoch: 16 	Loss: 0.051840
Poison Train Epoch: 17 	Loss: 0.015157
Poison Train Epoch: 18 	Loss: 0.006339
Poison Train Epoch: 19 	Loss: 0.103738
Test set:local_trigger2_poison_local_testPoison Accuracy: 3990/4000 (100%)
___Test : epoch: 2065: Average loss: 0.0321, Accuracy: 39692/40000.0 (99.2300%)
benign test loss (after fedavg) 0.032146265375614165
benign test acc (after fedavg) 99.22999999999999
Test set:local_trigger0Poison Accuracy: 3995/4000 (100%)
Test set:local_trigger1Poison Accuracy: 571/4000 (14%)
Test set:local_trigger2Poison Accuracy: 2386/4000 (60%)
Test set:local_trigger3Poison Accuracy: 144/4000 (4%)
Test set:Main Accuracy: 39692/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3994/4000 (100%)
Done in 26.689098596572876 sec.
select client [488, 680, 97, 68, 963, 971, 370, 47, 765, 656]
l2 norm of benign user before server clipping 0.005844840605277568
l2 norm of benign user after server clipping 0.005844840605277568
___Test : epoch: 2066: Average loss: 0.0310, Accuracy: 39707/40000.0 (99.2675%)
benign test loss (after fedavg) 0.031021952651441097
benign test acc (after fedavg) 99.2675
Test set:local_trigger0Poison Accuracy: 3994/4000 (100%)
Test set:local_trigger1Poison Accuracy: 306/4000 (8%)
Test set:local_trigger2Poison Accuracy: 1818/4000 (45%)
Test set:local_trigger3Poison Accuracy: 90/4000 (2%)
Test set:Main Accuracy: 39707/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3995/4000 (100%)
Done in 12.746903419494629 sec.
select client [935, 131, 984, 51, 699, 885, 178, 280, 219, 903]
l2 norm of benign user before server clipping 0.007864109007641673
l2 norm of benign user after server clipping 0.007864109007641673
___Test : epoch: 2067: Average loss: 0.0304, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.030400156382471323
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3979/4000 (99%)
Test set:local_trigger1Poison Accuracy: 126/4000 (3%)
Test set:local_trigger2Poison Accuracy: 931/4000 (23%)
Test set:local_trigger3Poison Accuracy: 35/4000 (1%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3977/4000 (99%)
Done in 13.003960371017456 sec.
select client [369, 154, 108, 724, 278, 501, 946, 654, 825, 371]
l2 norm of benign user before server clipping 0.0066621658392250534
l2 norm of benign user after server clipping 0.0066621658392250534
___Test : epoch: 2068: Average loss: 0.0313, Accuracy: 39696/40000.0 (99.2400%)
benign test loss (after fedavg) 0.03134928107857704
benign test acc (after fedavg) 99.24
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 231/4000 (6%)
Test set:local_trigger2Poison Accuracy: 1441/4000 (36%)
Test set:local_trigger3Poison Accuracy: 70/4000 (2%)
Test set:Main Accuracy: 39696/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3986/4000 (100%)
Done in 13.12907099723816 sec.
select client [954, 220, 738, 131, 487, 157, 649, 671, 557, 642]
l2 norm of benign user before server clipping 0.006849319150205702
l2 norm of benign user after server clipping 0.006849319150205702
___Test : epoch: 2069: Average loss: 0.0295, Accuracy: 39708/40000.0 (99.2700%)
benign test loss (after fedavg) 0.02953763628080487
benign test acc (after fedavg) 99.27
Test set:local_trigger0Poison Accuracy: 3991/4000 (100%)
Test set:local_trigger1Poison Accuracy: 214/4000 (5%)
Test set:local_trigger2Poison Accuracy: 1480/4000 (37%)
Test set:local_trigger3Poison Accuracy: 60/4000 (2%)
Test set:Main Accuracy: 39708/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3992/4000 (100%)
Done in 13.046691179275513 sec.
select client [304, 443, 404, 827, 811, 932, 408, 65, 120, 316]
l2 norm of benign user before server clipping 0.008420855284202843
l2 norm of benign user after server clipping 0.008420855284202843
___Test : epoch: 2070: Average loss: 0.0308, Accuracy: 39698/40000.0 (99.2450%)
benign test loss (after fedavg) 0.030816728319972755
benign test acc (after fedavg) 99.245
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 317/4000 (8%)
Test set:local_trigger2Poison Accuracy: 1783/4000 (45%)
Test set:local_trigger3Poison Accuracy: 97/4000 (2%)
Test set:Main Accuracy: 39698/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 13.395471334457397 sec.
select client [617, 855, 983, 695, 402, 419, 858, 991, 867, 220]
l2 norm of benign user before server clipping 0.0055457788868807254
l2 norm of benign user after server clipping 0.0055457788868807254
___Test : epoch: 2071: Average loss: 0.0290, Accuracy: 39702/40000.0 (99.2550%)
benign test loss (after fedavg) 0.028998985572904347
benign test acc (after fedavg) 99.25500000000001
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 92/4000 (2%)
Test set:local_trigger2Poison Accuracy: 603/4000 (15%)
Test set:local_trigger3Poison Accuracy: 25/4000 (1%)
Test set:Main Accuracy: 39702/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3986/4000 (100%)
Done in 12.616914749145508 sec.
select client [936, 918, 859, 487, 303, 483, 586, 840, 817, 739]
l2 norm of benign user before server clipping 0.004899403313174844
l2 norm of benign user after server clipping 0.004899403313174844
___Test : epoch: 2072: Average loss: 0.0283, Accuracy: 39715/40000.0 (99.2875%)
benign test loss (after fedavg) 0.028293478631973266
benign test acc (after fedavg) 99.2875
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 126/4000 (3%)
Test set:local_trigger2Poison Accuracy: 1040/4000 (26%)
Test set:local_trigger3Poison Accuracy: 35/4000 (1%)
Test set:Main Accuracy: 39715/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 13.333348751068115 sec.
select client [225, 999, 679, 77, 716, 129, 410, 982, 935, 246]
l2 norm of benign user before server clipping 0.007723210426047444
l2 norm of benign user after server clipping 0.007723210426047444
___Test : epoch: 2073: Average loss: 0.0314, Accuracy: 39682/40000.0 (99.2050%)
benign test loss (after fedavg) 0.03144688766300678
benign test acc (after fedavg) 99.205
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 212/4000 (5%)
Test set:local_trigger2Poison Accuracy: 1269/4000 (32%)
Test set:local_trigger3Poison Accuracy: 68/4000 (2%)
Test set:Main Accuracy: 39682/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3987/4000 (100%)
Done in 13.170320272445679 sec.
select client [771, 662, 620, 19, 389, 306, 54, 79, 993, 425]
l2 norm of benign user before server clipping 0.00807703125756234
l2 norm of benign user after server clipping 0.00807703125756234
___Test : epoch: 2074: Average loss: 0.0284, Accuracy: 39721/40000.0 (99.3025%)
benign test loss (after fedavg) 0.028432790857553483
benign test acc (after fedavg) 99.30250000000001
Test set:local_trigger0Poison Accuracy: 3984/4000 (100%)
Test set:local_trigger1Poison Accuracy: 95/4000 (2%)
Test set:local_trigger2Poison Accuracy: 612/4000 (15%)
Test set:local_trigger3Poison Accuracy: 28/4000 (1%)
Test set:Main Accuracy: 39721/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3982/4000 (100%)
Done in 13.086253881454468 sec.
select client [155, 727, 794, 995, 637, 858, 360, 137, 415, 430]
l2 norm of benign user before server clipping 0.008192088245414198
l2 norm of benign user after server clipping 0.008192088245414198
___Test : epoch: 2075: Average loss: 0.0279, Accuracy: 39708/40000.0 (99.2700%)
benign test loss (after fedavg) 0.027857983668893575
benign test acc (after fedavg) 99.27
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 60/4000 (2%)
Test set:local_trigger2Poison Accuracy: 356/4000 (9%)
Test set:local_trigger3Poison Accuracy: 21/4000 (1%)
Test set:Main Accuracy: 39708/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3987/4000 (100%)
Done in 13.147988080978394 sec.
select client [944, 73, 914, 487, 154, 994, 649, 996, 819, 103]
l2 norm of benign user before server clipping 0.007247790158726275
l2 norm of benign user after server clipping 0.007247790158726275
___Test : epoch: 2076: Average loss: 0.0290, Accuracy: 39707/40000.0 (99.2675%)
benign test loss (after fedavg) 0.028981448435038328
benign test acc (after fedavg) 99.2675
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 111/4000 (3%)
Test set:local_trigger2Poison Accuracy: 789/4000 (20%)
Test set:local_trigger3Poison Accuracy: 38/4000 (1%)
Test set:Main Accuracy: 39707/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 12.821043729782104 sec.
select client [570, 602, 624, 566, 370, 832, 295, 436, 442, 366]
l2 norm of benign user before server clipping 0.0059719011769630015
l2 norm of benign user after server clipping 0.0059719011769630015
___Test : epoch: 2077: Average loss: 0.0280, Accuracy: 39711/40000.0 (99.2775%)
benign test loss (after fedavg) 0.02797141804844141
benign test acc (after fedavg) 99.2775
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 76/4000 (2%)
Test set:local_trigger2Poison Accuracy: 474/4000 (12%)
Test set:local_trigger3Poison Accuracy: 28/4000 (1%)
Test set:Main Accuracy: 39711/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3987/4000 (100%)
Done in 13.021788120269775 sec.
select client [359, 97, 780, 615, 434, 730, 873, 477, 647, 363]
l2 norm of benign user before server clipping 0.0069135323399677874
l2 norm of benign user after server clipping 0.0069135323399677874
___Test : epoch: 2078: Average loss: 0.0280, Accuracy: 39726/40000.0 (99.3150%)
benign test loss (after fedavg) 0.028013602486252783
benign test acc (after fedavg) 99.315
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 119/4000 (3%)
Test set:local_trigger2Poison Accuracy: 890/4000 (22%)
Test set:local_trigger3Poison Accuracy: 36/4000 (1%)
Test set:Main Accuracy: 39726/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3991/4000 (100%)
Done in 13.08661150932312 sec.
select client [130, 894, 734, 153, 957, 793, 974, 446, 846, 389]
l2 norm of benign user before server clipping 0.005722973542287946
l2 norm of benign user after server clipping 0.005722973542287946
___Test : epoch: 2079: Average loss: 0.0282, Accuracy: 39715/40000.0 (99.2875%)
benign test loss (after fedavg) 0.02815459364503622
benign test acc (after fedavg) 99.2875
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 103/4000 (3%)
Test set:local_trigger2Poison Accuracy: 788/4000 (20%)
Test set:local_trigger3Poison Accuracy: 30/4000 (1%)
Test set:Main Accuracy: 39715/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 13.246440172195435 sec.
select client [32, 529, 636, 973, 589, 981, 721, 418, 500, 65]
l2 norm of benign user before server clipping 0.0056772317620925605
l2 norm of benign user after server clipping 0.0056772317620925605
___Test : epoch: 2080: Average loss: 0.0282, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.028202875400334598
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 87/4000 (2%)
Test set:local_trigger2Poison Accuracy: 475/4000 (12%)
Test set:local_trigger3Poison Accuracy: 28/4000 (1%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3984/4000 (100%)
Done in 13.170970678329468 sec.
select client [846, 151, 474, 886, 528, 777, 140, 736, 400, 857]
l2 norm of benign user before server clipping 0.00676818277570419
l2 norm of benign user after server clipping 0.00676818277570419
___Test : epoch: 2081: Average loss: 0.0296, Accuracy: 39689/40000.0 (99.2225%)
benign test loss (after fedavg) 0.029634212517738342
benign test acc (after fedavg) 99.2225
Test set:local_trigger0Poison Accuracy: 3996/4000 (100%)
Test set:local_trigger1Poison Accuracy: 112/4000 (3%)
Test set:local_trigger2Poison Accuracy: 798/4000 (20%)
Test set:local_trigger3Poison Accuracy: 35/4000 (1%)
Test set:Main Accuracy: 39689/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3996/4000 (100%)
Done in 12.889167785644531 sec.
select client [104, 919, 761, 913, 987, 863, 175, 23, 872, 607]
l2 norm of benign user before server clipping 0.007195843034423888
l2 norm of benign user after server clipping 0.007195843034423888
___Test : epoch: 2082: Average loss: 0.0282, Accuracy: 39705/40000.0 (99.2625%)
benign test loss (after fedavg) 0.02824906621351838
benign test acc (after fedavg) 99.2625
Test set:local_trigger0Poison Accuracy: 3994/4000 (100%)
Test set:local_trigger1Poison Accuracy: 123/4000 (3%)
Test set:local_trigger2Poison Accuracy: 893/4000 (22%)
Test set:local_trigger3Poison Accuracy: 42/4000 (1%)
Test set:Main Accuracy: 39705/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3995/4000 (100%)
Done in 12.864083290100098 sec.
select client [391, 56, 726, 561, 424, 122, 454, 698, 883, 798]
l2 norm of benign user before server clipping 0.006683160807006061
l2 norm of benign user after server clipping 0.006683160807006061
___Test : epoch: 2083: Average loss: 0.0273, Accuracy: 39716/40000.0 (99.2900%)
benign test loss (after fedavg) 0.0273160363227129
benign test acc (after fedavg) 99.29
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 71/4000 (2%)
Test set:local_trigger2Poison Accuracy: 388/4000 (10%)
Test set:local_trigger3Poison Accuracy: 27/4000 (1%)
Test set:Main Accuracy: 39716/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 13.123165845870972 sec.
select client [396, 179, 754, 89, 48, 717, 13, 324, 398, 326]
l2 norm of benign user before server clipping 0.008136047632433474
l2 norm of benign user after server clipping 0.008136047632433474
___Test : epoch: 2084: Average loss: 0.0293, Accuracy: 39711/40000.0 (99.2775%)
benign test loss (after fedavg) 0.029279736902564763
benign test acc (after fedavg) 99.2775
Test set:local_trigger0Poison Accuracy: 3982/4000 (100%)
Test set:local_trigger1Poison Accuracy: 101/4000 (3%)
Test set:local_trigger2Poison Accuracy: 719/4000 (18%)
Test set:local_trigger3Poison Accuracy: 32/4000 (1%)
Test set:Main Accuracy: 39711/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3981/4000 (100%)
Done in 13.184974908828735 sec.
select client [676, 264, 489, 852, 342, 647, 529, 579, 205, 536]
l2 norm of benign user before server clipping 0.0067966488189995285
l2 norm of benign user after server clipping 0.0067966488189995285
___Test : epoch: 2085: Average loss: 0.0282, Accuracy: 39716/40000.0 (99.2900%)
benign test loss (after fedavg) 0.028189960516989233
benign test acc (after fedavg) 99.29
Test set:local_trigger0Poison Accuracy: 3985/4000 (100%)
Test set:local_trigger1Poison Accuracy: 80/4000 (2%)
Test set:local_trigger2Poison Accuracy: 469/4000 (12%)
Test set:local_trigger3Poison Accuracy: 28/4000 (1%)
Test set:Main Accuracy: 39716/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3984/4000 (100%)
Done in 12.958678007125854 sec.
select client [816, 935, 129, 196, 149, 468, 949, 530, 121, 941]
l2 norm of benign user before server clipping 0.006384006259031594
l2 norm of benign user after server clipping 0.006384006259031594
___Test : epoch: 2086: Average loss: 0.0302, Accuracy: 39694/40000.0 (99.2350%)
benign test loss (after fedavg) 0.030217921363562345
benign test acc (after fedavg) 99.235
Test set:local_trigger0Poison Accuracy: 3974/4000 (99%)
Test set:local_trigger1Poison Accuracy: 92/4000 (2%)
Test set:local_trigger2Poison Accuracy: 556/4000 (14%)
Test set:local_trigger3Poison Accuracy: 29/4000 (1%)
Test set:Main Accuracy: 39694/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3972/4000 (99%)
Done in 13.065038681030273 sec.
select client [502, 344, 59, 107, 652, 35, 240, 492, 68, 929]
l2 norm of benign user before server clipping 0.005776130431331694
l2 norm of benign user after server clipping 0.005776130431331694
___Test : epoch: 2087: Average loss: 0.0279, Accuracy: 39709/40000.0 (99.2725%)
benign test loss (after fedavg) 0.027896060011535884
benign test acc (after fedavg) 99.2725
Test set:local_trigger0Poison Accuracy: 3979/4000 (99%)
Test set:local_trigger1Poison Accuracy: 43/4000 (1%)
Test set:local_trigger2Poison Accuracy: 195/4000 (5%)
Test set:local_trigger3Poison Accuracy: 15/4000 (0%)
Test set:Main Accuracy: 39709/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3975/4000 (99%)
Done in 13.009304523468018 sec.
select client [413, 274, 585, 534, 722, 469, 81, 783, 927, 488]
l2 norm of benign user before server clipping 0.0047468655742704865
l2 norm of benign user after server clipping 0.0047468655742704865
___Test : epoch: 2088: Average loss: 0.0270, Accuracy: 39721/40000.0 (99.3025%)
benign test loss (after fedavg) 0.026982556572556497
benign test acc (after fedavg) 99.30250000000001
Test set:local_trigger0Poison Accuracy: 3980/4000 (100%)
Test set:local_trigger1Poison Accuracy: 50/4000 (1%)
Test set:local_trigger2Poison Accuracy: 244/4000 (6%)
Test set:local_trigger3Poison Accuracy: 19/4000 (0%)
Test set:Main Accuracy: 39721/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3981/4000 (100%)
Done in 12.95054030418396 sec.
select client [68, 754, 207, 955, 590, 654, 922, 219, 20, 591]
l2 norm of benign user before server clipping 0.005190447065979242
l2 norm of benign user after server clipping 0.005190447065979242
___Test : epoch: 2089: Average loss: 0.0274, Accuracy: 39716/40000.0 (99.2900%)
benign test loss (after fedavg) 0.02742775347828865
benign test acc (after fedavg) 99.29
Test set:local_trigger0Poison Accuracy: 3979/4000 (99%)
Test set:local_trigger1Poison Accuracy: 46/4000 (1%)
Test set:local_trigger2Poison Accuracy: 220/4000 (6%)
Test set:local_trigger3Poison Accuracy: 17/4000 (0%)
Test set:Main Accuracy: 39716/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3977/4000 (99%)
Done in 13.090938568115234 sec.
select client [834, 38, 695, 840, 626, 133, 627, 21, 941, 939]
l2 norm of benign user before server clipping 0.0050200415076687935
l2 norm of benign user after server clipping 0.0050200415076687935
___Test : epoch: 2090: Average loss: 0.0270, Accuracy: 39721/40000.0 (99.3025%)
benign test loss (after fedavg) 0.026965932302922012
benign test acc (after fedavg) 99.30250000000001
Test set:local_trigger0Poison Accuracy: 3978/4000 (99%)
Test set:local_trigger1Poison Accuracy: 52/4000 (1%)
Test set:local_trigger2Poison Accuracy: 253/4000 (6%)
Test set:local_trigger3Poison Accuracy: 18/4000 (0%)
Test set:Main Accuracy: 39721/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3977/4000 (99%)
Done in 12.803706169128418 sec.
select client [344, 34, 920, 526, 658, 553, 185, 104, 219, 532]
l2 norm of benign user before server clipping 0.006741100898943841
l2 norm of benign user after server clipping 0.006741100898943841
___Test : epoch: 2091: Average loss: 0.0277, Accuracy: 39694/40000.0 (99.2350%)
benign test loss (after fedavg) 0.02767225044220686
benign test acc (after fedavg) 99.235
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 59/4000 (1%)
Test set:local_trigger2Poison Accuracy: 268/4000 (7%)
Test set:local_trigger3Poison Accuracy: 22/4000 (1%)
Test set:Main Accuracy: 39694/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3991/4000 (100%)
Done in 12.966126918792725 sec.
select client [842, 333, 869, 467, 12, 528, 421, 751, 505, 299]
l2 norm of benign user before server clipping 0.006551858084276318
l2 norm of benign user after server clipping 0.006551858084276318
___Test : epoch: 2092: Average loss: 0.0273, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.027349471283704043
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 78/4000 (2%)
Test set:local_trigger2Poison Accuracy: 355/4000 (9%)
Test set:local_trigger3Poison Accuracy: 32/4000 (1%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 12.958781480789185 sec.
select client [792, 497, 201, 955, 678, 877, 411, 970, 496, 923]
l2 norm of benign user before server clipping 0.006897950544953346
l2 norm of benign user after server clipping 0.006897950544953346
___Test : epoch: 2093: Average loss: 0.0284, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.028420041124522687
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 97/4000 (2%)
Test set:local_trigger2Poison Accuracy: 511/4000 (13%)
Test set:local_trigger3Poison Accuracy: 34/4000 (1%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3985/4000 (100%)
Done in 13.11770248413086 sec.
select client [863, 146, 196, 817, 820, 823, 700, 494, 114, 576]
l2 norm of benign user before server clipping 0.005992846086155623
l2 norm of benign user after server clipping 0.005992846086155623
___Test : epoch: 2094: Average loss: 0.0273, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.02725074388086796
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3993/4000 (100%)
Test set:local_trigger1Poison Accuracy: 64/4000 (2%)
Test set:local_trigger2Poison Accuracy: 310/4000 (8%)
Test set:local_trigger3Poison Accuracy: 25/4000 (1%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3993/4000 (100%)
Done in 12.901198625564575 sec.
select client [246, 670, 413, 405, 431, 706, 507, 314, 337, 419]
l2 norm of benign user before server clipping 0.006363855174276978
l2 norm of benign user after server clipping 0.006363855174276978
___Test : epoch: 2095: Average loss: 0.0270, Accuracy: 39701/40000.0 (99.2525%)
benign test loss (after fedavg) 0.026964947987347842
benign test acc (after fedavg) 99.2525
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 43/4000 (1%)
Test set:local_trigger2Poison Accuracy: 214/4000 (5%)
Test set:local_trigger3Poison Accuracy: 16/4000 (0%)
Test set:Main Accuracy: 39701/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 13.014774084091187 sec.
select client [443, 802, 188, 607, 601, 526, 584, 550, 241, 555]
l2 norm of benign user before server clipping 0.005334997008321807
l2 norm of benign user after server clipping 0.005334997008321807
___Test : epoch: 2096: Average loss: 0.0277, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.027737985718995332
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3992/4000 (100%)
Test set:local_trigger1Poison Accuracy: 59/4000 (1%)
Test set:local_trigger2Poison Accuracy: 298/4000 (7%)
Test set:local_trigger3Poison Accuracy: 21/4000 (1%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3992/4000 (100%)
Done in 12.831798553466797 sec.
select client [903, 582, 200, 429, 32, 138, 570, 235, 260, 113]
l2 norm of benign user before server clipping 0.005433642631396651
l2 norm of benign user after server clipping 0.005433642631396651
___Test : epoch: 2097: Average loss: 0.0274, Accuracy: 39702/40000.0 (99.2550%)
benign test loss (after fedavg) 0.027382889004051687
benign test acc (after fedavg) 99.25500000000001
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 42/4000 (1%)
Test set:local_trigger2Poison Accuracy: 188/4000 (5%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39702/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 12.947768449783325 sec.
select client [180, 456, 134, 788, 335, 881, 983, 519, 925, 969]
l2 norm of benign user before server clipping 0.00689849368063733
l2 norm of benign user after server clipping 0.00689849368063733
___Test : epoch: 2098: Average loss: 0.0278, Accuracy: 39700/40000.0 (99.2500%)
benign test loss (after fedavg) 0.027787889632582663
benign test acc (after fedavg) 99.25
Test set:local_trigger0Poison Accuracy: 3985/4000 (100%)
Test set:local_trigger1Poison Accuracy: 85/4000 (2%)
Test set:local_trigger2Poison Accuracy: 407/4000 (10%)
Test set:local_trigger3Poison Accuracy: 32/4000 (1%)
Test set:Main Accuracy: 39700/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3986/4000 (100%)
Done in 12.802951574325562 sec.
select client [243, 660, 320, 231, 774, 867, 291, 267, 809, 310]
l2 norm of benign user before server clipping 0.006086411722935736
l2 norm of benign user after server clipping 0.006086411722935736
___Test : epoch: 2099: Average loss: 0.0272, Accuracy: 39718/40000.0 (99.2950%)
benign test loss (after fedavg) 0.027183825701475144
benign test acc (after fedavg) 99.295
Test set:local_trigger0Poison Accuracy: 3954/4000 (99%)
Test set:local_trigger1Poison Accuracy: 41/4000 (1%)
Test set:local_trigger2Poison Accuracy: 227/4000 (6%)
Test set:local_trigger3Poison Accuracy: 16/4000 (0%)
Test set:Main Accuracy: 39718/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3953/4000 (99%)
Done in 12.917121410369873 sec.
select client [77, 594, 778, 29, 947, 666, 142, 535, 541, 650]
l2 norm of benign user before server clipping 0.007129016588442028
l2 norm of benign user after server clipping 0.007129016588442028
___Test : epoch: 2100: Average loss: 0.0268, Accuracy: 39708/40000.0 (99.2700%)
benign test loss (after fedavg) 0.02681229574531317
benign test acc (after fedavg) 99.27
Test set:local_trigger0Poison Accuracy: 3974/4000 (99%)
Test set:local_trigger1Poison Accuracy: 60/4000 (2%)
Test set:local_trigger2Poison Accuracy: 265/4000 (7%)
Test set:local_trigger3Poison Accuracy: 24/4000 (1%)
Test set:Main Accuracy: 39708/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3967/4000 (99%)
Done in 12.979865789413452 sec.
select client [730, 583, 55, 560, 419, 314, 164, 496, 15, 185]
l2 norm of benign user before server clipping 0.005477301450446248
l2 norm of benign user after server clipping 0.005477301450446248
___Test : epoch: 2101: Average loss: 0.0287, Accuracy: 39694/40000.0 (99.2350%)
benign test loss (after fedavg) 0.02871225588992238
benign test acc (after fedavg) 99.235
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 76/4000 (2%)
Test set:local_trigger2Poison Accuracy: 343/4000 (9%)
Test set:local_trigger3Poison Accuracy: 26/4000 (1%)
Test set:Main Accuracy: 39694/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 12.95461106300354 sec.
select client [646, 445, 672, 477, 207, 222, 290, 401, 794, 892]
l2 norm of benign user before server clipping 0.005915805813856423
l2 norm of benign user after server clipping 0.005915805813856423
___Test : epoch: 2102: Average loss: 0.0282, Accuracy: 39711/40000.0 (99.2775%)
benign test loss (after fedavg) 0.02816545399427414
benign test acc (after fedavg) 99.2775
Test set:local_trigger0Poison Accuracy: 3970/4000 (99%)
Test set:local_trigger1Poison Accuracy: 75/4000 (2%)
Test set:local_trigger2Poison Accuracy: 322/4000 (8%)
Test set:local_trigger3Poison Accuracy: 29/4000 (1%)
Test set:Main Accuracy: 39711/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3966/4000 (99%)
Done in 13.084011316299438 sec.
select client [945, 859, 97, 168, 451, 722, 467, 382, 195, 429]
l2 norm of benign user before server clipping 0.006363423937000334
l2 norm of benign user after server clipping 0.006363423937000334
___Test : epoch: 2103: Average loss: 0.0281, Accuracy: 39707/40000.0 (99.2675%)
benign test loss (after fedavg) 0.028080354050546884
benign test acc (after fedavg) 99.2675
Test set:local_trigger0Poison Accuracy: 3985/4000 (100%)
Test set:local_trigger1Poison Accuracy: 43/4000 (1%)
Test set:local_trigger2Poison Accuracy: 212/4000 (5%)
Test set:local_trigger3Poison Accuracy: 19/4000 (0%)
Test set:Main Accuracy: 39707/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3984/4000 (100%)
Done in 12.791372537612915 sec.
select client [833, 464, 782, 222, 849, 936, 615, 243, 284, 411]
l2 norm of benign user before server clipping 0.005379932490177453
l2 norm of benign user after server clipping 0.005379932490177453
___Test : epoch: 2104: Average loss: 0.0268, Accuracy: 39714/40000.0 (99.2850%)
benign test loss (after fedavg) 0.026836193239688874
benign test acc (after fedavg) 99.285
Test set:local_trigger0Poison Accuracy: 3991/4000 (100%)
Test set:local_trigger1Poison Accuracy: 59/4000 (1%)
Test set:local_trigger2Poison Accuracy: 288/4000 (7%)
Test set:local_trigger3Poison Accuracy: 26/4000 (1%)
Test set:Main Accuracy: 39714/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 12.675440549850464 sec.
select client [335, 857, 878, 807, 457, 671, 899, 858, 869, 513]
l2 norm of benign user before server clipping 0.006045716942753643
l2 norm of benign user after server clipping 0.006045716942753643
___Test : epoch: 2105: Average loss: 0.0282, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.028159586725383996
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3991/4000 (100%)
Test set:local_trigger1Poison Accuracy: 115/4000 (3%)
Test set:local_trigger2Poison Accuracy: 674/4000 (17%)
Test set:local_trigger3Poison Accuracy: 42/4000 (1%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 12.9690842628479 sec.
select client [214, 507, 955, 445, 212, 345, 855, 932, 222, 205]
l2 norm of benign user before server clipping 0.004688923119101673
l2 norm of benign user after server clipping 0.004688923119101673
___Test : epoch: 2106: Average loss: 0.0268, Accuracy: 39712/40000.0 (99.2800%)
benign test loss (after fedavg) 0.02675728487446904
benign test acc (after fedavg) 99.28
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 50/4000 (1%)
Test set:local_trigger2Poison Accuracy: 221/4000 (6%)
Test set:local_trigger3Poison Accuracy: 20/4000 (0%)
Test set:Main Accuracy: 39712/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3987/4000 (100%)
Done in 12.765062808990479 sec.
select client [54, 272, 792, 70, 80, 461, 916, 976, 614, 580]
l2 norm of benign user before server clipping 0.007363742776215076
l2 norm of benign user after server clipping 0.007363742776215076
___Test : epoch: 2107: Average loss: 0.0266, Accuracy: 39715/40000.0 (99.2875%)
benign test loss (after fedavg) 0.026592402946576475
benign test acc (after fedavg) 99.2875
Test set:local_trigger0Poison Accuracy: 3976/4000 (99%)
Test set:local_trigger1Poison Accuracy: 24/4000 (1%)
Test set:local_trigger2Poison Accuracy: 101/4000 (3%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39715/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3970/4000 (99%)
Done in 13.056248188018799 sec.
select client [11, 188, 641, 762, 693, 501, 732, 627, 909, 474]
l2 norm of benign user before server clipping 0.005950364167802036
l2 norm of benign user after server clipping 0.005950364167802036
___Test : epoch: 2108: Average loss: 0.0262, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.026205836112424732
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 53/4000 (1%)
Test set:local_trigger2Poison Accuracy: 251/4000 (6%)
Test set:local_trigger3Poison Accuracy: 23/4000 (1%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 13.025216817855835 sec.
select client [68, 427, 754, 984, 537, 228, 626, 546, 410, 362]
l2 norm of benign user before server clipping 0.004564720904454589
l2 norm of benign user after server clipping 0.004564720904454589
___Test : epoch: 2109: Average loss: 0.0267, Accuracy: 39729/40000.0 (99.3225%)
benign test loss (after fedavg) 0.02669528417736292
benign test acc (after fedavg) 99.3225
Test set:local_trigger0Poison Accuracy: 3954/4000 (99%)
Test set:local_trigger1Poison Accuracy: 42/4000 (1%)
Test set:local_trigger2Poison Accuracy: 180/4000 (4%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39729/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3948/4000 (99%)
Done in 12.812486410140991 sec.
select client [475, 109, 867, 638, 157, 960, 338, 935, 652, 492]
l2 norm of benign user before server clipping 0.006133750989101827
l2 norm of benign user after server clipping 0.006133750989101827
___Test : epoch: 2110: Average loss: 0.0267, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.026733475043624638
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 49/4000 (1%)
Test set:local_trigger2Poison Accuracy: 219/4000 (5%)
Test set:local_trigger3Poison Accuracy: 23/4000 (1%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 13.076682090759277 sec.
select client [971, 881, 932, 610, 39, 80, 205, 43, 663, 30]
l2 norm of benign user before server clipping 0.005437410646118223
l2 norm of benign user after server clipping 0.005437410646118223
___Test : epoch: 2111: Average loss: 0.0265, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.02648284715861082
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 48/4000 (1%)
Test set:local_trigger2Poison Accuracy: 224/4000 (6%)
Test set:local_trigger3Poison Accuracy: 21/4000 (1%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 13.240779638290405 sec.
select client [723, 377, 682, 357, 80, 286, 940, 663, 696, 946]
l2 norm of benign user before server clipping 0.003984745871275663
l2 norm of benign user after server clipping 0.003984745871275663
___Test : epoch: 2112: Average loss: 0.0265, Accuracy: 39722/40000.0 (99.3050%)
benign test loss (after fedavg) 0.02645055446997285
benign test acc (after fedavg) 99.30499999999999
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 50/4000 (1%)
Test set:local_trigger2Poison Accuracy: 249/4000 (6%)
Test set:local_trigger3Poison Accuracy: 21/4000 (1%)
Test set:Main Accuracy: 39722/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3991/4000 (100%)
Done in 13.076781272888184 sec.
select client [334, 709, 829, 767, 304, 804, 506, 928, 95, 17]
l2 norm of benign user before server clipping 0.007808326138183474
l2 norm of benign user after server clipping 0.007808326138183474
___Test : epoch: 2113: Average loss: 0.0276, Accuracy: 39718/40000.0 (99.2950%)
benign test loss (after fedavg) 0.027637910881638528
benign test acc (after fedavg) 99.295
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 90/4000 (2%)
Test set:local_trigger2Poison Accuracy: 390/4000 (10%)
Test set:local_trigger3Poison Accuracy: 34/4000 (1%)
Test set:Main Accuracy: 39718/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3987/4000 (100%)
Done in 13.032188415527344 sec.
select client [916, 799, 528, 356, 208, 966, 368, 995, 613, 682]
l2 norm of benign user before server clipping 0.007287480414379388
l2 norm of benign user after server clipping 0.007287480414379388
___Test : epoch: 2114: Average loss: 0.0261, Accuracy: 39733/40000.0 (99.3325%)
benign test loss (after fedavg) 0.026097412142157553
benign test acc (after fedavg) 99.3325
Test set:local_trigger0Poison Accuracy: 3983/4000 (100%)
Test set:local_trigger1Poison Accuracy: 48/4000 (1%)
Test set:local_trigger2Poison Accuracy: 208/4000 (5%)
Test set:local_trigger3Poison Accuracy: 22/4000 (1%)
Test set:Main Accuracy: 39733/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3982/4000 (100%)
Done in 13.135631084442139 sec.
select client [746, 122, 642, 527, 734, 245, 101, 762, 74, 722]
l2 norm of benign user before server clipping 0.006571869342587888
l2 norm of benign user after server clipping 0.006571869342587888
___Test : epoch: 2115: Average loss: 0.0267, Accuracy: 39722/40000.0 (99.3050%)
benign test loss (after fedavg) 0.026701352775096894
benign test acc (after fedavg) 99.30499999999999
Test set:local_trigger0Poison Accuracy: 3974/4000 (99%)
Test set:local_trigger1Poison Accuracy: 45/4000 (1%)
Test set:local_trigger2Poison Accuracy: 219/4000 (5%)
Test set:local_trigger3Poison Accuracy: 16/4000 (0%)
Test set:Main Accuracy: 39722/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3973/4000 (99%)
Done in 15.160661458969116 sec.
select client [595, 991, 311, 805, 975, 269, 771, 745, 674, 974]
l2 norm of benign user before server clipping 0.009262965084053576
l2 norm of benign user after server clipping 0.009262965084053576
___Test : epoch: 2116: Average loss: 0.0272, Accuracy: 39705/40000.0 (99.2625%)
benign test loss (after fedavg) 0.027188968830555677
benign test acc (after fedavg) 99.2625
Test set:local_trigger0Poison Accuracy: 3955/4000 (99%)
Test set:local_trigger1Poison Accuracy: 47/4000 (1%)
Test set:local_trigger2Poison Accuracy: 203/4000 (5%)
Test set:local_trigger3Poison Accuracy: 20/4000 (0%)
Test set:Main Accuracy: 39705/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3945/4000 (99%)
Done in 13.332484722137451 sec.
select client [151, 627, 656, 577, 178, 738, 750, 957, 135, 677]
l2 norm of benign user before server clipping 0.006540449260501191
l2 norm of benign user after server clipping 0.006540449260501191
___Test : epoch: 2117: Average loss: 0.0278, Accuracy: 39721/40000.0 (99.3025%)
benign test loss (after fedavg) 0.027760697793215515
benign test acc (after fedavg) 99.30250000000001
Test set:local_trigger0Poison Accuracy: 3977/4000 (99%)
Test set:local_trigger1Poison Accuracy: 61/4000 (2%)
Test set:local_trigger2Poison Accuracy: 249/4000 (6%)
Test set:local_trigger3Poison Accuracy: 25/4000 (1%)
Test set:Main Accuracy: 39721/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3976/4000 (99%)
Done in 12.824517726898193 sec.
select client [583, 298, 970, 978, 567, 893, 97, 846, 260, 387]
l2 norm of benign user before server clipping 0.004824144794838503
l2 norm of benign user after server clipping 0.004824144794838503
___Test : epoch: 2118: Average loss: 0.0268, Accuracy: 39721/40000.0 (99.3025%)
benign test loss (after fedavg) 0.026826521093398333
benign test acc (after fedavg) 99.30250000000001
Test set:local_trigger0Poison Accuracy: 3974/4000 (99%)
Test set:local_trigger1Poison Accuracy: 42/4000 (1%)
Test set:local_trigger2Poison Accuracy: 213/4000 (5%)
Test set:local_trigger3Poison Accuracy: 17/4000 (0%)
Test set:Main Accuracy: 39721/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3972/4000 (99%)
Done in 13.127941608428955 sec.
select client [162, 578, 922, 184, 504, 427, 99, 567, 353, 903]
l2 norm of benign user before server clipping 0.005988064594566822
l2 norm of benign user after server clipping 0.005988064594566822
___Test : epoch: 2119: Average loss: 0.0268, Accuracy: 39727/40000.0 (99.3175%)
benign test loss (after fedavg) 0.026782505710422993
benign test acc (after fedavg) 99.31750000000001
Test set:local_trigger0Poison Accuracy: 3956/4000 (99%)
Test set:local_trigger1Poison Accuracy: 55/4000 (1%)
Test set:local_trigger2Poison Accuracy: 264/4000 (7%)
Test set:local_trigger3Poison Accuracy: 24/4000 (1%)
Test set:Main Accuracy: 39727/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3948/4000 (99%)
Done in 12.793753862380981 sec.
select client [260, 794, 625, 491, 133, 288, 585, 672, 178, 594]
l2 norm of benign user before server clipping 0.00514270473504439
l2 norm of benign user after server clipping 0.00514270473504439
___Test : epoch: 2120: Average loss: 0.0268, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.0267597398519516
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3963/4000 (99%)
Test set:local_trigger1Poison Accuracy: 48/4000 (1%)
Test set:local_trigger2Poison Accuracy: 216/4000 (5%)
Test set:local_trigger3Poison Accuracy: 21/4000 (1%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3961/4000 (99%)
Done in 13.057380437850952 sec.
select client [873, 790, 38, 964, 951, 805, 433, 167, 15, 480]
l2 norm of benign user before server clipping 0.006191926193423569
l2 norm of benign user after server clipping 0.006191926193423569
___Test : epoch: 2121: Average loss: 0.0262, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.02621249600164592
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3985/4000 (100%)
Test set:local_trigger1Poison Accuracy: 47/4000 (1%)
Test set:local_trigger2Poison Accuracy: 206/4000 (5%)
Test set:local_trigger3Poison Accuracy: 20/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3984/4000 (100%)
Done in 13.161445617675781 sec.
select client [869, 771, 379, 704, 783, 241, 308, 803, 972, 355]
l2 norm of benign user before server clipping 0.006507971056271345
l2 norm of benign user after server clipping 0.006507971056271345
___Test : epoch: 2122: Average loss: 0.0267, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.026734588646143673
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 53/4000 (1%)
Test set:local_trigger2Poison Accuracy: 277/4000 (7%)
Test set:local_trigger3Poison Accuracy: 25/4000 (1%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 12.992876529693604 sec.
select client [836, 912, 865, 19, 72, 251, 138, 209, 147, 267]
l2 norm of benign user before server clipping 0.004895031778141856
l2 norm of benign user after server clipping 0.004895031778141856
___Test : epoch: 2123: Average loss: 0.0278, Accuracy: 39705/40000.0 (99.2625%)
benign test loss (after fedavg) 0.027778953873366118
benign test acc (after fedavg) 99.2625
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 52/4000 (1%)
Test set:local_trigger2Poison Accuracy: 223/4000 (6%)
Test set:local_trigger3Poison Accuracy: 21/4000 (1%)
Test set:Main Accuracy: 39705/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3987/4000 (100%)
Done in 13.005844116210938 sec.
select client [60, 469, 285, 611, 672, 600, 811, 920, 529, 780]
l2 norm of benign user before server clipping 0.007059279782697559
l2 norm of benign user after server clipping 0.007059279782697559
___Test : epoch: 2124: Average loss: 0.0273, Accuracy: 39717/40000.0 (99.2925%)
benign test loss (after fedavg) 0.02733933848962188
benign test acc (after fedavg) 99.29249999999999
Test set:local_trigger0Poison Accuracy: 3963/4000 (99%)
Test set:local_trigger1Poison Accuracy: 47/4000 (1%)
Test set:local_trigger2Poison Accuracy: 188/4000 (5%)
Test set:local_trigger3Poison Accuracy: 18/4000 (0%)
Test set:Main Accuracy: 39717/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3948/4000 (99%)
Done in 13.182986974716187 sec.
select client [360, 119, 904, 32, 819, 491, 739, 662, 929, 928]
l2 norm of benign user before server clipping 0.006401814916171133
l2 norm of benign user after server clipping 0.006401814916171133
___Test : epoch: 2125: Average loss: 0.0265, Accuracy: 39721/40000.0 (99.3025%)
benign test loss (after fedavg) 0.026548466852307318
benign test acc (after fedavg) 99.30250000000001
Test set:local_trigger0Poison Accuracy: 3985/4000 (100%)
Test set:local_trigger1Poison Accuracy: 51/4000 (1%)
Test set:local_trigger2Poison Accuracy: 212/4000 (5%)
Test set:local_trigger3Poison Accuracy: 22/4000 (1%)
Test set:Main Accuracy: 39721/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3981/4000 (100%)
Done in 13.418534517288208 sec.
select client [458, 542, 616, 97, 25, 621, 402, 79, 578, 178]
l2 norm of benign user before server clipping 0.006357045483309775
l2 norm of benign user after server clipping 0.006357045483309775
___Test : epoch: 2126: Average loss: 0.0265, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.026528256964311003
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 55/4000 (1%)
Test set:local_trigger2Poison Accuracy: 242/4000 (6%)
Test set:local_trigger3Poison Accuracy: 26/4000 (1%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 12.941187381744385 sec.
select client [287, 275, 222, 173, 659, 82, 541, 756, 470, 911]
l2 norm of benign user before server clipping 0.005453414656221867
l2 norm of benign user after server clipping 0.005453414656221867
___Test : epoch: 2127: Average loss: 0.0269, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.026885755745321514
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3976/4000 (99%)
Test set:local_trigger1Poison Accuracy: 44/4000 (1%)
Test set:local_trigger2Poison Accuracy: 170/4000 (4%)
Test set:local_trigger3Poison Accuracy: 16/4000 (0%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3973/4000 (99%)
Done in 12.758359670639038 sec.
select client [984, 568, 399, 570, 237, 392, 732, 683, 354, 503]
l2 norm of benign user before server clipping 0.007509078457951545
l2 norm of benign user after server clipping 0.007509078457951545
___Test : epoch: 2128: Average loss: 0.0274, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.027391443950682878
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 3975/4000 (99%)
Test set:local_trigger1Poison Accuracy: 43/4000 (1%)
Test set:local_trigger2Poison Accuracy: 197/4000 (5%)
Test set:local_trigger3Poison Accuracy: 16/4000 (0%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3971/4000 (99%)
Done in 13.26108455657959 sec.
select client [23, 64, 370, 488, 489, 761, 479, 538, 409, 922]
l2 norm of benign user before server clipping 0.005980792106129229
l2 norm of benign user after server clipping 0.005980792106129229
___Test : epoch: 2129: Average loss: 0.0260, Accuracy: 39712/40000.0 (99.2800%)
benign test loss (after fedavg) 0.026024436760693787
benign test acc (after fedavg) 99.28
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 41/4000 (1%)
Test set:local_trigger2Poison Accuracy: 191/4000 (5%)
Test set:local_trigger3Poison Accuracy: 16/4000 (0%)
Test set:Main Accuracy: 39712/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3986/4000 (100%)
Done in 13.003623962402344 sec.
select client [78, 909, 284, 423, 914, 419, 109, 382, 599, 890]
l2 norm of benign user before server clipping 0.0057026551454328
l2 norm of benign user after server clipping 0.0057026551454328
___Test : epoch: 2130: Average loss: 0.0269, Accuracy: 39711/40000.0 (99.2775%)
benign test loss (after fedavg) 0.02689962789863348
benign test acc (after fedavg) 99.2775
Test set:local_trigger0Poison Accuracy: 3944/4000 (99%)
Test set:local_trigger1Poison Accuracy: 18/4000 (0%)
Test set:local_trigger2Poison Accuracy: 94/4000 (2%)
Test set:local_trigger3Poison Accuracy: 7/4000 (0%)
Test set:Main Accuracy: 39711/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3940/4000 (98%)
Done in 13.082548379898071 sec.
select client [382, 555, 190, 439, 399, 353, 516, 81, 12, 762]
l2 norm of benign user before server clipping 0.007016054075211287
l2 norm of benign user after server clipping 0.007016054075211287
___Test : epoch: 2131: Average loss: 0.0275, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.02751482807919383
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3966/4000 (99%)
Test set:local_trigger1Poison Accuracy: 44/4000 (1%)
Test set:local_trigger2Poison Accuracy: 184/4000 (5%)
Test set:local_trigger3Poison Accuracy: 15/4000 (0%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3959/4000 (99%)
Done in 13.160829305648804 sec.
select client [605, 597, 962, 85, 843, 583, 943, 993, 397, 958]
l2 norm of benign user before server clipping 0.008164427010342479
l2 norm of benign user after server clipping 0.008164427010342479
___Test : epoch: 2132: Average loss: 0.0263, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.026326760970056057
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3984/4000 (100%)
Test set:local_trigger1Poison Accuracy: 44/4000 (1%)
Test set:local_trigger2Poison Accuracy: 171/4000 (4%)
Test set:local_trigger3Poison Accuracy: 19/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3984/4000 (100%)
Done in 13.594367742538452 sec.
select client [92, 52, 421, 643, 372, 936, 606, 94, 966, 254]
l2 norm of benign user before server clipping 0.007156564434990287
l2 norm of benign user after server clipping 0.007156564434990287
___Test : epoch: 2133: Average loss: 0.0267, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.02667494202814996
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3967/4000 (99%)
Test set:local_trigger1Poison Accuracy: 48/4000 (1%)
Test set:local_trigger2Poison Accuracy: 199/4000 (5%)
Test set:local_trigger3Poison Accuracy: 18/4000 (0%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3964/4000 (99%)
Done in 13.254626989364624 sec.
select client [60, 161, 525, 920, 186, 462, 437, 562, 633, 815]
l2 norm of benign user before server clipping 0.007470493577420712
l2 norm of benign user after server clipping 0.007470493577420712
___Test : epoch: 2134: Average loss: 0.0277, Accuracy: 39705/40000.0 (99.2625%)
benign test loss (after fedavg) 0.027719768961519002
benign test acc (after fedavg) 99.2625
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 71/4000 (2%)
Test set:local_trigger2Poison Accuracy: 249/4000 (6%)
Test set:local_trigger3Poison Accuracy: 25/4000 (1%)
Test set:Main Accuracy: 39705/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3985/4000 (100%)
Done in 13.036714315414429 sec.
select client [641, 325, 194, 898, 439, 897, 894, 362, 387, 865]
l2 norm of benign user before server clipping 0.005069781001657248
l2 norm of benign user after server clipping 0.005069781001657248
___Test : epoch: 2135: Average loss: 0.0260, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.026027858700230718
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3972/4000 (99%)
Test set:local_trigger1Poison Accuracy: 35/4000 (1%)
Test set:local_trigger2Poison Accuracy: 133/4000 (3%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3969/4000 (99%)
Done in 12.93539023399353 sec.
select client [551, 431, 179, 239, 105, 369, 964, 604, 206, 639]
l2 norm of benign user before server clipping 0.005408244673162699
l2 norm of benign user after server clipping 0.005408244673162699
___Test : epoch: 2136: Average loss: 0.0265, Accuracy: 39722/40000.0 (99.3050%)
benign test loss (after fedavg) 0.026525801956281066
benign test acc (after fedavg) 99.30499999999999
Test set:local_trigger0Poison Accuracy: 3938/4000 (98%)
Test set:local_trigger1Poison Accuracy: 35/4000 (1%)
Test set:local_trigger2Poison Accuracy: 123/4000 (3%)
Test set:local_trigger3Poison Accuracy: 7/4000 (0%)
Test set:Main Accuracy: 39722/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3932/4000 (98%)
Done in 13.351165533065796 sec.
select client [503, 347, 540, 574, 489, 232, 616, 111, 598, 215]
l2 norm of benign user before server clipping 0.00683164787478745
l2 norm of benign user after server clipping 0.00683164787478745
___Test : epoch: 2137: Average loss: 0.0272, Accuracy: 39711/40000.0 (99.2775%)
benign test loss (after fedavg) 0.027188123708218336
benign test acc (after fedavg) 99.2775
Test set:local_trigger0Poison Accuracy: 3982/4000 (100%)
Test set:local_trigger1Poison Accuracy: 46/4000 (1%)
Test set:local_trigger2Poison Accuracy: 185/4000 (5%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39711/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3981/4000 (100%)
Done in 13.04326581954956 sec.
select client [536, 357, 269, 424, 74, 196, 511, 908, 793, 151]
l2 norm of benign user before server clipping 0.004293061053613201
l2 norm of benign user after server clipping 0.004293061053613201
___Test : epoch: 2138: Average loss: 0.0272, Accuracy: 39717/40000.0 (99.2925%)
benign test loss (after fedavg) 0.027205420187860728
benign test acc (after fedavg) 99.29249999999999
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 65/4000 (2%)
Test set:local_trigger2Poison Accuracy: 260/4000 (6%)
Test set:local_trigger3Poison Accuracy: 27/4000 (1%)
Test set:Main Accuracy: 39717/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 12.7044837474823 sec.
select client [933, 270, 29, 715, 61, 437, 223, 438, 55, 763]
l2 norm of benign user before server clipping 0.008496775245293974
l2 norm of benign user after server clipping 0.008496775245293974
___Test : epoch: 2139: Average loss: 0.0271, Accuracy: 39716/40000.0 (99.2900%)
benign test loss (after fedavg) 0.027059332501143216
benign test acc (after fedavg) 99.29
Test set:local_trigger0Poison Accuracy: 3975/4000 (99%)
Test set:local_trigger1Poison Accuracy: 31/4000 (1%)
Test set:local_trigger2Poison Accuracy: 106/4000 (3%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39716/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3965/4000 (99%)
Done in 13.17852520942688 sec.
select client [735, 291, 214, 261, 404, 137, 537, 383, 915, 381]
l2 norm of benign user before server clipping 0.007825870043598115
l2 norm of benign user after server clipping 0.007825870043598115
___Test : epoch: 2140: Average loss: 0.0262, Accuracy: 39714/40000.0 (99.2850%)
benign test loss (after fedavg) 0.026223525631427765
benign test acc (after fedavg) 99.285
Test set:local_trigger0Poison Accuracy: 3984/4000 (100%)
Test set:local_trigger1Poison Accuracy: 26/4000 (1%)
Test set:local_trigger2Poison Accuracy: 100/4000 (2%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39714/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3981/4000 (100%)
Done in 13.175567865371704 sec.
select client [405, 316, 338, 637, 736, 514, 859, 878, 427, 153]
l2 norm of benign user before server clipping 0.009170367079786957
l2 norm of benign user after server clipping 0.009170367079786957
___Test : epoch: 2141: Average loss: 0.0262, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.02621682271435857
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 3981/4000 (100%)
Test set:local_trigger1Poison Accuracy: 33/4000 (1%)
Test set:local_trigger2Poison Accuracy: 109/4000 (3%)
Test set:local_trigger3Poison Accuracy: 13/4000 (0%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3977/4000 (99%)
Done in 13.221187591552734 sec.
select client [179, 455, 224, 867, 682, 724, 425, 789, 968, 60]
l2 norm of benign user before server clipping 0.007719454728066922
l2 norm of benign user after server clipping 0.007719454728066922
___Test : epoch: 2142: Average loss: 0.0257, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.025684310318902136
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3962/4000 (99%)
Test set:local_trigger1Poison Accuracy: 34/4000 (1%)
Test set:local_trigger2Poison Accuracy: 121/4000 (3%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3959/4000 (99%)
Done in 13.225964784622192 sec.
select client [629, 727, 997, 24, 120, 628, 953, 32, 877, 337]
l2 norm of benign user before server clipping 0.006013425043784082
l2 norm of benign user after server clipping 0.006013425043784082
___Test : epoch: 2143: Average loss: 0.0261, Accuracy: 39708/40000.0 (99.2700%)
benign test loss (after fedavg) 0.02607062289826572
benign test acc (after fedavg) 99.27
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 28/4000 (1%)
Test set:local_trigger2Poison Accuracy: 101/4000 (3%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39708/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 13.012792587280273 sec.
select client [318, 528, 425, 346, 112, 208, 998, 95, 758, 987]
l2 norm of benign user before server clipping 0.006124461675062776
l2 norm of benign user after server clipping 0.006124461675062776
___Test : epoch: 2144: Average loss: 0.0259, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.025926666527986527
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3974/4000 (99%)
Test set:local_trigger1Poison Accuracy: 47/4000 (1%)
Test set:local_trigger2Poison Accuracy: 171/4000 (4%)
Test set:local_trigger3Poison Accuracy: 17/4000 (0%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3971/4000 (99%)
Done in 12.840577602386475 sec.
select client [18, 493, 188, 591, 70, 896, 419, 996, 745, 134]
l2 norm of benign user before server clipping 0.0066777190659195185
l2 norm of benign user after server clipping 0.0066777190659195185
___Test : epoch: 2145: Average loss: 0.0259, Accuracy: 39718/40000.0 (99.2950%)
benign test loss (after fedavg) 0.02590614613033831
benign test acc (after fedavg) 99.295
Test set:local_trigger0Poison Accuracy: 3973/4000 (99%)
Test set:local_trigger1Poison Accuracy: 38/4000 (1%)
Test set:local_trigger2Poison Accuracy: 151/4000 (4%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39718/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3972/4000 (99%)
Done in 12.879707336425781 sec.
select client [973, 884, 248, 470, 684, 284, 313, 672, 189, 829]
l2 norm of benign user before server clipping 0.00803092266432941
l2 norm of benign user after server clipping 0.00803092266432941
___Test : epoch: 2146: Average loss: 0.0265, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.026480373582988978
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3926/4000 (98%)
Test set:local_trigger1Poison Accuracy: 40/4000 (1%)
Test set:local_trigger2Poison Accuracy: 130/4000 (3%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3917/4000 (98%)
Done in 13.227041721343994 sec.
select client [609, 435, 779, 78, 717, 591, 174, 634, 841, 611]
l2 norm of benign user before server clipping 0.005642715538851917
l2 norm of benign user after server clipping 0.005642715538851917
___Test : epoch: 2147: Average loss: 0.0264, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.026375245881080627
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3965/4000 (99%)
Test set:local_trigger1Poison Accuracy: 39/4000 (1%)
Test set:local_trigger2Poison Accuracy: 164/4000 (4%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3964/4000 (99%)
Done in 12.921817779541016 sec.
select client [682, 113, 700, 219, 223, 796, 731, 378, 118, 730]
l2 norm of benign user before server clipping 0.008328839880414307
l2 norm of benign user after server clipping 0.008328839880414307
___Test : epoch: 2148: Average loss: 0.0267, Accuracy: 39709/40000.0 (99.2725%)
benign test loss (after fedavg) 0.026676587404310705
benign test acc (after fedavg) 99.2725
Test set:local_trigger0Poison Accuracy: 3977/4000 (99%)
Test set:local_trigger1Poison Accuracy: 23/4000 (1%)
Test set:local_trigger2Poison Accuracy: 89/4000 (2%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39709/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3976/4000 (99%)
Done in 13.01458191871643 sec.
select client [420, 480, 595, 636, 747, 251, 360, 336, 509, 973]
l2 norm of benign user before server clipping 0.006751445843838156
l2 norm of benign user after server clipping 0.006751445843838156
___Test : epoch: 2149: Average loss: 0.0271, Accuracy: 39698/40000.0 (99.2450%)
benign test loss (after fedavg) 0.02713040182515979
benign test acc (after fedavg) 99.245
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 26/4000 (1%)
Test set:local_trigger2Poison Accuracy: 108/4000 (3%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39698/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 13.104220628738403 sec.
select client [784, 687, 682, 739, 823, 66, 319, 56, 160, 114]
l2 norm of benign user before server clipping 0.007828166848048568
l2 norm of benign user after server clipping 0.007828166848048568
___Test : epoch: 2150: Average loss: 0.0264, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.02635497614815831
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 50/4000 (1%)
Test set:local_trigger2Poison Accuracy: 190/4000 (5%)
Test set:local_trigger3Poison Accuracy: 19/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 13.1226065158844 sec.
select client [696, 539, 452, 873, 788, 622, 275, 402, 489, 575]
l2 norm of benign user before server clipping 0.005131403054110706
l2 norm of benign user after server clipping 0.005131403054110706
___Test : epoch: 2151: Average loss: 0.0265, Accuracy: 39718/40000.0 (99.2950%)
benign test loss (after fedavg) 0.02653681803420186
benign test acc (after fedavg) 99.295
Test set:local_trigger0Poison Accuracy: 3970/4000 (99%)
Test set:local_trigger1Poison Accuracy: 38/4000 (1%)
Test set:local_trigger2Poison Accuracy: 158/4000 (4%)
Test set:local_trigger3Poison Accuracy: 13/4000 (0%)
Test set:Main Accuracy: 39718/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3968/4000 (99%)
Done in 12.959724187850952 sec.
select client [603, 947, 385, 254, 855, 218, 644, 74, 743, 147]
l2 norm of benign user before server clipping 0.006869469955563545
l2 norm of benign user after server clipping 0.006869469955563545
___Test : epoch: 2152: Average loss: 0.0271, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.027147479663044215
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3977/4000 (99%)
Test set:local_trigger1Poison Accuracy: 78/4000 (2%)
Test set:local_trigger2Poison Accuracy: 343/4000 (9%)
Test set:local_trigger3Poison Accuracy: 26/4000 (1%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3978/4000 (99%)
Done in 12.84558391571045 sec.
select client [50, 668, 108, 378, 68, 749, 873, 549, 712, 245]
l2 norm of benign user before server clipping 0.005220796028152108
l2 norm of benign user after server clipping 0.005220796028152108
___Test : epoch: 2153: Average loss: 0.0262, Accuracy: 39722/40000.0 (99.3050%)
benign test loss (after fedavg) 0.026174462527781724
benign test acc (after fedavg) 99.30499999999999
Test set:local_trigger0Poison Accuracy: 3983/4000 (100%)
Test set:local_trigger1Poison Accuracy: 36/4000 (1%)
Test set:local_trigger2Poison Accuracy: 159/4000 (4%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39722/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3983/4000 (100%)
Done in 12.90844202041626 sec.
select client [441, 380, 440, 433, 806, 115, 365, 432, 595, 454]
l2 norm of benign user before server clipping 0.007371907122433186
l2 norm of benign user after server clipping 0.007371907122433186
___Test : epoch: 2154: Average loss: 0.0262, Accuracy: 39718/40000.0 (99.2950%)
benign test loss (after fedavg) 0.026223305739462376
benign test acc (after fedavg) 99.295
Test set:local_trigger0Poison Accuracy: 3968/4000 (99%)
Test set:local_trigger1Poison Accuracy: 31/4000 (1%)
Test set:local_trigger2Poison Accuracy: 113/4000 (3%)
Test set:local_trigger3Poison Accuracy: 7/4000 (0%)
Test set:Main Accuracy: 39718/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3965/4000 (99%)
Done in 13.296254873275757 sec.
select client [746, 304, 662, 669, 352, 47, 579, 757, 672, 502]
l2 norm of benign user before server clipping 0.004894192516803742
l2 norm of benign user after server clipping 0.004894192516803742
___Test : epoch: 2155: Average loss: 0.0256, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.025649480590969324
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3981/4000 (100%)
Test set:local_trigger1Poison Accuracy: 25/4000 (1%)
Test set:local_trigger2Poison Accuracy: 92/4000 (2%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3977/4000 (99%)
Done in 13.156786680221558 sec.
select client [149, 773, 315, 934, 191, 839, 964, 361, 736, 293]
l2 norm of benign user before server clipping 0.006103918352164328
l2 norm of benign user after server clipping 0.006103918352164328
___Test : epoch: 2156: Average loss: 0.0274, Accuracy: 39707/40000.0 (99.2675%)
benign test loss (after fedavg) 0.027356564965471626
benign test acc (after fedavg) 99.2675
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 50/4000 (1%)
Test set:local_trigger2Poison Accuracy: 210/4000 (5%)
Test set:local_trigger3Poison Accuracy: 21/4000 (1%)
Test set:Main Accuracy: 39707/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 13.004592657089233 sec.
select client [620, 354, 443, 178, 457, 771, 533, 47, 548, 251]
l2 norm of benign user before server clipping 0.008648721216013655
l2 norm of benign user after server clipping 0.008648721216013655
___Test : epoch: 2157: Average loss: 0.0276, Accuracy: 39718/40000.0 (99.2950%)
benign test loss (after fedavg) 0.027618890129029752
benign test acc (after fedavg) 99.295
Test set:local_trigger0Poison Accuracy: 3967/4000 (99%)
Test set:local_trigger1Poison Accuracy: 56/4000 (1%)
Test set:local_trigger2Poison Accuracy: 215/4000 (5%)
Test set:local_trigger3Poison Accuracy: 24/4000 (1%)
Test set:Main Accuracy: 39718/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3950/4000 (99%)
Done in 13.04591155052185 sec.
select client [111, 440, 775, 905, 870, 59, 570, 760, 116, 76]
l2 norm of benign user before server clipping 0.007463003508746624
l2 norm of benign user after server clipping 0.007463003508746624
___Test : epoch: 2158: Average loss: 0.0259, Accuracy: 39711/40000.0 (99.2775%)
benign test loss (after fedavg) 0.02592286979518831
benign test acc (after fedavg) 99.2775
Test set:local_trigger0Poison Accuracy: 3959/4000 (99%)
Test set:local_trigger1Poison Accuracy: 13/4000 (0%)
Test set:local_trigger2Poison Accuracy: 73/4000 (2%)
Test set:local_trigger3Poison Accuracy: 5/4000 (0%)
Test set:Main Accuracy: 39711/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3958/4000 (99%)
Done in 13.303632020950317 sec.
select client [136, 489, 45, 180, 181, 646, 250, 508, 249, 654]
l2 norm of benign user before server clipping 0.006425345432944596
l2 norm of benign user after server clipping 0.006425345432944596
___Test : epoch: 2159: Average loss: 0.0261, Accuracy: 39727/40000.0 (99.3175%)
benign test loss (after fedavg) 0.026143515587225555
benign test acc (after fedavg) 99.31750000000001
Test set:local_trigger0Poison Accuracy: 3957/4000 (99%)
Test set:local_trigger1Poison Accuracy: 44/4000 (1%)
Test set:local_trigger2Poison Accuracy: 174/4000 (4%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39727/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3955/4000 (99%)
Done in 13.270249843597412 sec.
select client [851, 685, 166, 181, 241, 41, 598, 594, 437, 199]
l2 norm of benign user before server clipping 0.004789823875762522
l2 norm of benign user after server clipping 0.004789823875762522
___Test : epoch: 2160: Average loss: 0.0263, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.026275080116465687
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 3983/4000 (100%)
Test set:local_trigger1Poison Accuracy: 27/4000 (1%)
Test set:local_trigger2Poison Accuracy: 105/4000 (3%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3982/4000 (100%)
Done in 12.792995929718018 sec.
select client [827, 194, 730, 832, 352, 525, 642, 131, 932, 785]
l2 norm of benign user before server clipping 0.008801753027364611
l2 norm of benign user after server clipping 0.008801753027364611
___Test : epoch: 2161: Average loss: 0.0254, Accuracy: 39725/40000.0 (99.3125%)
benign test loss (after fedavg) 0.02535058548115194
benign test acc (after fedavg) 99.3125
Test set:local_trigger0Poison Accuracy: 3981/4000 (100%)
Test set:local_trigger1Poison Accuracy: 29/4000 (1%)
Test set:local_trigger2Poison Accuracy: 99/4000 (2%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39725/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3982/4000 (100%)
Done in 13.153194189071655 sec.
select client [548, 251, 59, 571, 570, 728, 484, 444, 471, 616]
l2 norm of benign user before server clipping 0.007586823403835296
l2 norm of benign user after server clipping 0.007586823403835296
___Test : epoch: 2162: Average loss: 0.0263, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.026318500827625393
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3965/4000 (99%)
Test set:local_trigger1Poison Accuracy: 33/4000 (1%)
Test set:local_trigger2Poison Accuracy: 108/4000 (3%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3954/4000 (99%)
Done in 13.046751499176025 sec.
select client [129, 212, 911, 202, 448, 864, 319, 14, 892, 443]
l2 norm of benign user before server clipping 0.006449740036623552
l2 norm of benign user after server clipping 0.006449740036623552
___Test : epoch: 2163: Average loss: 0.0274, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.0274344302020967
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 49/4000 (1%)
Test set:local_trigger2Poison Accuracy: 174/4000 (4%)
Test set:local_trigger3Poison Accuracy: 16/4000 (0%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3984/4000 (100%)
Done in 12.946927547454834 sec.
select client [246, 38, 187, 550, 745, 825, 918, 801, 898, 500]
l2 norm of benign user before server clipping 0.006149845418985933
l2 norm of benign user after server clipping 0.006149845418985933
___Test : epoch: 2164: Average loss: 0.0259, Accuracy: 39709/40000.0 (99.2725%)
benign test loss (after fedavg) 0.02585362021178007
benign test acc (after fedavg) 99.2725
Test set:local_trigger0Poison Accuracy: 3989/4000 (100%)
Test set:local_trigger1Poison Accuracy: 27/4000 (1%)
Test set:local_trigger2Poison Accuracy: 98/4000 (2%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39709/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3989/4000 (100%)
Done in 12.802217483520508 sec.
select client [921, 449, 467, 742, 708, 764, 583, 342, 554, 471]
l2 norm of benign user before server clipping 0.008064319333061575
l2 norm of benign user after server clipping 0.008064319333061575
___Test : epoch: 2165: Average loss: 0.0262, Accuracy: 39726/40000.0 (99.3150%)
benign test loss (after fedavg) 0.026240414652228355
benign test acc (after fedavg) 99.315
Test set:local_trigger0Poison Accuracy: 3973/4000 (99%)
Test set:local_trigger1Poison Accuracy: 41/4000 (1%)
Test set:local_trigger2Poison Accuracy: 156/4000 (4%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39726/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3971/4000 (99%)
Done in 13.307491302490234 sec.
select client [101, 714, 468, 90, 462, 533, 966, 705, 599, 698]
l2 norm of benign user before server clipping 0.006588525604456663
l2 norm of benign user after server clipping 0.006588525604456663
___Test : epoch: 2166: Average loss: 0.0257, Accuracy: 39729/40000.0 (99.3225%)
benign test loss (after fedavg) 0.025707293973863125
benign test acc (after fedavg) 99.3225
Test set:local_trigger0Poison Accuracy: 3981/4000 (100%)
Test set:local_trigger1Poison Accuracy: 42/4000 (1%)
Test set:local_trigger2Poison Accuracy: 142/4000 (4%)
Test set:local_trigger3Poison Accuracy: 13/4000 (0%)
Test set:Main Accuracy: 39729/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3979/4000 (99%)
Done in 12.92559003829956 sec.
select client [488, 201, 361, 855, 249, 643, 941, 94, 45, 276]
l2 norm of benign user before server clipping 0.005178960622288287
l2 norm of benign user after server clipping 0.005178960622288287
___Test : epoch: 2167: Average loss: 0.0261, Accuracy: 39729/40000.0 (99.3225%)
benign test loss (after fedavg) 0.02605166552476585
benign test acc (after fedavg) 99.3225
Test set:local_trigger0Poison Accuracy: 3959/4000 (99%)
Test set:local_trigger1Poison Accuracy: 30/4000 (1%)
Test set:local_trigger2Poison Accuracy: 116/4000 (3%)
Test set:local_trigger3Poison Accuracy: 7/4000 (0%)
Test set:Main Accuracy: 39729/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3961/4000 (99%)
Done in 13.151999950408936 sec.
select client [697, 322, 110, 247, 279, 772, 466, 308, 632, 565]
l2 norm of benign user before server clipping 0.004201227077282965
l2 norm of benign user after server clipping 0.004201227077282965
___Test : epoch: 2168: Average loss: 0.0262, Accuracy: 39727/40000.0 (99.3175%)
benign test loss (after fedavg) 0.02623239518813789
benign test acc (after fedavg) 99.31750000000001
Test set:local_trigger0Poison Accuracy: 3954/4000 (99%)
Test set:local_trigger1Poison Accuracy: 35/4000 (1%)
Test set:local_trigger2Poison Accuracy: 125/4000 (3%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39727/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3945/4000 (99%)
Done in 12.751203060150146 sec.
select client [502, 473, 71, 615, 157, 735, 382, 908, 354, 789]
l2 norm of benign user before server clipping 0.00557500469731167
l2 norm of benign user after server clipping 0.00557500469731167
___Test : epoch: 2169: Average loss: 0.0257, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.025731424907967447
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3974/4000 (99%)
Test set:local_trigger1Poison Accuracy: 19/4000 (0%)
Test set:local_trigger2Poison Accuracy: 82/4000 (2%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3973/4000 (99%)
Done in 12.954846382141113 sec.
select client [151, 856, 132, 704, 62, 571, 745, 782, 859, 397]
l2 norm of benign user before server clipping 0.004777829183149151
l2 norm of benign user after server clipping 0.004777829183149151
___Test : epoch: 2170: Average loss: 0.0258, Accuracy: 39720/40000.0 (99.3000%)
benign test loss (after fedavg) 0.025844138235598803
benign test acc (after fedavg) 99.3
Test set:local_trigger0Poison Accuracy: 3980/4000 (100%)
Test set:local_trigger1Poison Accuracy: 32/4000 (1%)
Test set:local_trigger2Poison Accuracy: 115/4000 (3%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39720/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3977/4000 (99%)
Done in 12.946049690246582 sec.
select client [653, 603, 348, 862, 728, 107, 819, 901, 436, 15]
l2 norm of benign user before server clipping 0.004946182598359883
l2 norm of benign user after server clipping 0.004946182598359883
___Test : epoch: 2171: Average loss: 0.0257, Accuracy: 39720/40000.0 (99.3000%)
benign test loss (after fedavg) 0.02566090705431998
benign test acc (after fedavg) 99.3
Test set:local_trigger0Poison Accuracy: 3985/4000 (100%)
Test set:local_trigger1Poison Accuracy: 33/4000 (1%)
Test set:local_trigger2Poison Accuracy: 120/4000 (3%)
Test set:local_trigger3Poison Accuracy: 13/4000 (0%)
Test set:Main Accuracy: 39720/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3984/4000 (100%)
Done in 12.866669654846191 sec.
select client [997, 243, 654, 432, 613, 53, 83, 268, 307, 273]
l2 norm of benign user before server clipping 0.0060466681607067585
l2 norm of benign user after server clipping 0.0060466681607067585
___Test : epoch: 2172: Average loss: 0.0263, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.026284290078282355
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3970/4000 (99%)
Test set:local_trigger1Poison Accuracy: 34/4000 (1%)
Test set:local_trigger2Poison Accuracy: 115/4000 (3%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3966/4000 (99%)
Done in 12.750457286834717 sec.
select client [157, 670, 211, 885, 828, 823, 918, 962, 795, 136]
l2 norm of benign user before server clipping 0.006044075812678784
l2 norm of benign user after server clipping 0.006044075812678784
___Test : epoch: 2173: Average loss: 0.0271, Accuracy: 39710/40000.0 (99.2750%)
benign test loss (after fedavg) 0.027118847951665522
benign test acc (after fedavg) 99.275
Test set:local_trigger0Poison Accuracy: 3994/4000 (100%)
Test set:local_trigger1Poison Accuracy: 36/4000 (1%)
Test set:local_trigger2Poison Accuracy: 137/4000 (3%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39710/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3994/4000 (100%)
Done in 12.736614465713501 sec.
select client [141, 976, 303, 543, 762, 707, 85, 117, 71, 894]
l2 norm of benign user before server clipping 0.004850746761076152
l2 norm of benign user after server clipping 0.004850746761076152
___Test : epoch: 2174: Average loss: 0.0256, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.025643669573962687
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 32/4000 (1%)
Test set:local_trigger2Poison Accuracy: 121/4000 (3%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3986/4000 (100%)
Done in 13.017513036727905 sec.
select client [14, 896, 412, 509, 721, 609, 712, 658, 113, 380]
l2 norm of benign user before server clipping 0.005745941877830773
l2 norm of benign user after server clipping 0.005745941877830773
___Test : epoch: 2175: Average loss: 0.0259, Accuracy: 39728/40000.0 (99.3200%)
benign test loss (after fedavg) 0.025881085417419673
benign test acc (after fedavg) 99.32
Test set:local_trigger0Poison Accuracy: 3980/4000 (100%)
Test set:local_trigger1Poison Accuracy: 32/4000 (1%)
Test set:local_trigger2Poison Accuracy: 112/4000 (3%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39728/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3976/4000 (99%)
Done in 12.76927661895752 sec.
select client [242, 295, 28, 428, 57, 803, 409, 201, 319, 668]
l2 norm of benign user before server clipping 0.006936562457121908
l2 norm of benign user after server clipping 0.006936562457121908
___Test : epoch: 2176: Average loss: 0.0264, Accuracy: 39706/40000.0 (99.2650%)
benign test loss (after fedavg) 0.026434148878604173
benign test acc (after fedavg) 99.265
Test set:local_trigger0Poison Accuracy: 3992/4000 (100%)
Test set:local_trigger1Poison Accuracy: 37/4000 (1%)
Test set:local_trigger2Poison Accuracy: 121/4000 (3%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39706/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3994/4000 (100%)
Done in 13.030179023742676 sec.
select client [268, 141, 336, 761, 557, 737, 498, 170, 178, 715]
l2 norm of benign user before server clipping 0.008791658794507384
l2 norm of benign user after server clipping 0.008791658794507384
___Test : epoch: 2177: Average loss: 0.0253, Accuracy: 39731/40000.0 (99.3275%)
benign test loss (after fedavg) 0.02531238492652774
benign test acc (after fedavg) 99.3275
Test set:local_trigger0Poison Accuracy: 3972/4000 (99%)
Test set:local_trigger1Poison Accuracy: 36/4000 (1%)
Test set:local_trigger2Poison Accuracy: 140/4000 (4%)
Test set:local_trigger3Poison Accuracy: 10/4000 (0%)
Test set:Main Accuracy: 39731/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3970/4000 (99%)
Done in 13.04232406616211 sec.
select client [74, 597, 731, 901, 269, 161, 993, 97, 884, 202]
l2 norm of benign user before server clipping 0.004996506008319556
l2 norm of benign user after server clipping 0.004996506008319556
___Test : epoch: 2178: Average loss: 0.0259, Accuracy: 39728/40000.0 (99.3200%)
benign test loss (after fedavg) 0.025870459320396184
benign test acc (after fedavg) 99.32
Test set:local_trigger0Poison Accuracy: 3982/4000 (100%)
Test set:local_trigger1Poison Accuracy: 30/4000 (1%)
Test set:local_trigger2Poison Accuracy: 98/4000 (2%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39728/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3980/4000 (100%)
Done in 12.66606593132019 sec.
select client [246, 522, 806, 115, 627, 702, 426, 54, 464, 712]
l2 norm of benign user before server clipping 0.008436302444897592
l2 norm of benign user after server clipping 0.008436302444897592
___Test : epoch: 2179: Average loss: 0.0269, Accuracy: 39700/40000.0 (99.2500%)
benign test loss (after fedavg) 0.026858038797602058
benign test acc (after fedavg) 99.25
Test set:local_trigger0Poison Accuracy: 3969/4000 (99%)
Test set:local_trigger1Poison Accuracy: 16/4000 (0%)
Test set:local_trigger2Poison Accuracy: 78/4000 (2%)
Test set:local_trigger3Poison Accuracy: 5/4000 (0%)
Test set:Main Accuracy: 39700/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3969/4000 (99%)
Done in 12.83560562133789 sec.
select client [492, 523, 66, 208, 172, 502, 596, 489, 152, 102]
l2 norm of benign user before server clipping 0.007305809948593378
l2 norm of benign user after server clipping 0.007305809948593378
___Test : epoch: 2180: Average loss: 0.0263, Accuracy: 39712/40000.0 (99.2800%)
benign test loss (after fedavg) 0.026337084689363837
benign test acc (after fedavg) 99.28
Test set:local_trigger0Poison Accuracy: 3968/4000 (99%)
Test set:local_trigger1Poison Accuracy: 38/4000 (1%)
Test set:local_trigger2Poison Accuracy: 140/4000 (4%)
Test set:local_trigger3Poison Accuracy: 12/4000 (0%)
Test set:Main Accuracy: 39712/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3965/4000 (99%)
Done in 12.933529615402222 sec.
select client [812, 524, 821, 572, 901, 187, 368, 150, 10, 215]
l2 norm of benign user before server clipping 0.006387387914583087
l2 norm of benign user after server clipping 0.006387387914583087
___Test : epoch: 2181: Average loss: 0.0259, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.025862798942625522
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3957/4000 (99%)
Test set:local_trigger1Poison Accuracy: 15/4000 (0%)
Test set:local_trigger2Poison Accuracy: 76/4000 (2%)
Test set:local_trigger3Poison Accuracy: 6/4000 (0%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3958/4000 (99%)
Done in 13.155061960220337 sec.
select client [579, 646, 600, 981, 332, 539, 262, 301, 971, 821]
l2 norm of benign user before server clipping 0.007045297673903406
l2 norm of benign user after server clipping 0.007045297673903406
___Test : epoch: 2182: Average loss: 0.0272, Accuracy: 39715/40000.0 (99.2875%)
benign test loss (after fedavg) 0.027208958753943444
benign test acc (after fedavg) 99.2875
Test set:local_trigger0Poison Accuracy: 3954/4000 (99%)
Test set:local_trigger1Poison Accuracy: 36/4000 (1%)
Test set:local_trigger2Poison Accuracy: 132/4000 (3%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39715/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3947/4000 (99%)
Done in 12.974539041519165 sec.
select client [81, 91, 679, 817, 151, 658, 74, 680, 276, 964]
l2 norm of benign user before server clipping 0.00348435701453127
l2 norm of benign user after server clipping 0.00348435701453127
___Test : epoch: 2183: Average loss: 0.0258, Accuracy: 39727/40000.0 (99.3175%)
benign test loss (after fedavg) 0.025783835210651158
benign test acc (after fedavg) 99.31750000000001
Test set:local_trigger0Poison Accuracy: 3991/4000 (100%)
Test set:local_trigger1Poison Accuracy: 44/4000 (1%)
Test set:local_trigger2Poison Accuracy: 176/4000 (4%)
Test set:local_trigger3Poison Accuracy: 17/4000 (0%)
Test set:Main Accuracy: 39727/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3991/4000 (100%)
Done in 12.76544189453125 sec.
select client [157, 217, 73, 448, 653, 784, 986, 760, 204, 736]
l2 norm of benign user before server clipping 0.006933234841562807
l2 norm of benign user after server clipping 0.006933234841562807
___Test : epoch: 2184: Average loss: 0.0265, Accuracy: 39723/40000.0 (99.3075%)
benign test loss (after fedavg) 0.026541139574348928
benign test acc (after fedavg) 99.3075
Test set:local_trigger0Poison Accuracy: 3988/4000 (100%)
Test set:local_trigger1Poison Accuracy: 38/4000 (1%)
Test set:local_trigger2Poison Accuracy: 126/4000 (3%)
Test set:local_trigger3Poison Accuracy: 13/4000 (0%)
Test set:Main Accuracy: 39723/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 12.984534502029419 sec.
select client [898, 202, 448, 250, 645, 68, 432, 799, 565, 492]
l2 norm of benign user before server clipping 0.006336792418733239
l2 norm of benign user after server clipping 0.006336792418733239
___Test : epoch: 2185: Average loss: 0.0278, Accuracy: 39700/40000.0 (99.2500%)
benign test loss (after fedavg) 0.02783947999253869
benign test acc (after fedavg) 99.25
Test set:local_trigger0Poison Accuracy: 3975/4000 (99%)
Test set:local_trigger1Poison Accuracy: 30/4000 (1%)
Test set:local_trigger2Poison Accuracy: 89/4000 (2%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39700/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3970/4000 (99%)
Done in 13.002574682235718 sec.
select client [714, 251, 766, 141, 468, 240, 170, 144, 172, 319]
l2 norm of benign user before server clipping 0.009864045307040215
l2 norm of benign user after server clipping 0.009864045307040215
___Test : epoch: 2186: Average loss: 0.0266, Accuracy: 39711/40000.0 (99.2775%)
benign test loss (after fedavg) 0.026555224899575115
benign test acc (after fedavg) 99.2775
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 43/4000 (1%)
Test set:local_trigger2Poison Accuracy: 135/4000 (3%)
Test set:local_trigger3Poison Accuracy: 13/4000 (0%)
Test set:Main Accuracy: 39711/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3985/4000 (100%)
Done in 13.260735750198364 sec.
select client [472, 902, 68, 92, 415, 845, 496, 878, 930, 17]
l2 norm of benign user before server clipping 0.0065995663404464725
l2 norm of benign user after server clipping 0.0065995663404464725
___Test : epoch: 2187: Average loss: 0.0257, Accuracy: 39736/40000.0 (99.3400%)
benign test loss (after fedavg) 0.025704701693356036
benign test acc (after fedavg) 99.33999999999999
Test set:local_trigger0Poison Accuracy: 3967/4000 (99%)
Test set:local_trigger1Poison Accuracy: 26/4000 (1%)
Test set:local_trigger2Poison Accuracy: 97/4000 (2%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39736/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3967/4000 (99%)
Done in 13.213971614837646 sec.
select client [429, 923, 181, 148, 736, 95, 566, 486, 620, 25]
l2 norm of benign user before server clipping 0.007680635689757765
l2 norm of benign user after server clipping 0.007680635689757765
___Test : epoch: 2188: Average loss: 0.0267, Accuracy: 39713/40000.0 (99.2825%)
benign test loss (after fedavg) 0.026663041096553205
benign test acc (after fedavg) 99.2825
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 34/4000 (1%)
Test set:local_trigger2Poison Accuracy: 107/4000 (3%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39713/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3990/4000 (100%)
Done in 12.788656949996948 sec.
select client [925, 349, 912, 933, 246, 18, 416, 589, 835, 547]
l2 norm of benign user before server clipping 0.006409615720622241
l2 norm of benign user after server clipping 0.006409615720622241
___Test : epoch: 2189: Average loss: 0.0266, Accuracy: 39720/40000.0 (99.3000%)
benign test loss (after fedavg) 0.026597401505708693
benign test acc (after fedavg) 99.3
Test set:local_trigger0Poison Accuracy: 3990/4000 (100%)
Test set:local_trigger1Poison Accuracy: 54/4000 (1%)
Test set:local_trigger2Poison Accuracy: 211/4000 (5%)
Test set:local_trigger3Poison Accuracy: 20/4000 (0%)
Test set:Main Accuracy: 39720/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3991/4000 (100%)
Done in 13.167881727218628 sec.
select client [93, 952, 86, 736, 910, 875, 759, 340, 425, 969]
l2 norm of benign user before server clipping 0.004848745302297175
l2 norm of benign user after server clipping 0.004848745302297175
___Test : epoch: 2190: Average loss: 0.0271, Accuracy: 39722/40000.0 (99.3050%)
benign test loss (after fedavg) 0.027096299393475055
benign test acc (after fedavg) 99.30499999999999
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 50/4000 (1%)
Test set:local_trigger2Poison Accuracy: 176/4000 (4%)
Test set:local_trigger3Poison Accuracy: 18/4000 (0%)
Test set:Main Accuracy: 39722/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 12.728359699249268 sec.
select client [918, 206, 369, 104, 752, 715, 689, 643, 570, 960]
l2 norm of benign user before server clipping 0.009448560839518904
l2 norm of benign user after server clipping 0.009448560839518904
___Test : epoch: 2191: Average loss: 0.0253, Accuracy: 39720/40000.0 (99.3000%)
benign test loss (after fedavg) 0.02525087729394436
benign test acc (after fedavg) 99.3
Test set:local_trigger0Poison Accuracy: 3970/4000 (99%)
Test set:local_trigger1Poison Accuracy: 21/4000 (1%)
Test set:local_trigger2Poison Accuracy: 88/4000 (2%)
Test set:local_trigger3Poison Accuracy: 7/4000 (0%)
Test set:Main Accuracy: 39720/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3967/4000 (99%)
Done in 13.169748544692993 sec.
select client [422, 83, 715, 583, 369, 710, 255, 994, 132, 40]
l2 norm of benign user before server clipping 0.009217826230451465
l2 norm of benign user after server clipping 0.009217826230451465
___Test : epoch: 2192: Average loss: 0.0256, Accuracy: 39714/40000.0 (99.2850%)
benign test loss (after fedavg) 0.02563399332985282
benign test acc (after fedavg) 99.285
Test set:local_trigger0Poison Accuracy: 3966/4000 (99%)
Test set:local_trigger1Poison Accuracy: 30/4000 (1%)
Test set:local_trigger2Poison Accuracy: 105/4000 (3%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39714/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3961/4000 (99%)
Done in 13.108575820922852 sec.
select client [712, 447, 125, 840, 172, 650, 654, 493, 213, 931]
l2 norm of benign user before server clipping 0.005369801330380142
l2 norm of benign user after server clipping 0.005369801330380142
___Test : epoch: 2193: Average loss: 0.0259, Accuracy: 39714/40000.0 (99.2850%)
benign test loss (after fedavg) 0.0258571249358356
benign test acc (after fedavg) 99.285
Test set:local_trigger0Poison Accuracy: 3951/4000 (99%)
Test set:local_trigger1Poison Accuracy: 16/4000 (0%)
Test set:local_trigger2Poison Accuracy: 81/4000 (2%)
Test set:local_trigger3Poison Accuracy: 6/4000 (0%)
Test set:Main Accuracy: 39714/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3949/4000 (99%)
Done in 12.948861837387085 sec.
select client [910, 475, 39, 78, 401, 256, 344, 170, 319, 310]
l2 norm of benign user before server clipping 0.006917432206682861
l2 norm of benign user after server clipping 0.006917432206682861
___Test : epoch: 2194: Average loss: 0.0259, Accuracy: 39722/40000.0 (99.3050%)
benign test loss (after fedavg) 0.025946772645786403
benign test acc (after fedavg) 99.30499999999999
Test set:local_trigger0Poison Accuracy: 3987/4000 (100%)
Test set:local_trigger1Poison Accuracy: 36/4000 (1%)
Test set:local_trigger2Poison Accuracy: 118/4000 (3%)
Test set:local_trigger3Poison Accuracy: 14/4000 (0%)
Test set:Main Accuracy: 39722/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 13.261330366134644 sec.
select client [380, 227, 703, 479, 226, 413, 507, 927, 836, 231]
l2 norm of benign user before server clipping 0.006891315535176546
l2 norm of benign user after server clipping 0.006891315535176546
___Test : epoch: 2195: Average loss: 0.0263, Accuracy: 39703/40000.0 (99.2575%)
benign test loss (after fedavg) 0.026264356936141847
benign test acc (after fedavg) 99.2575
Test set:local_trigger0Poison Accuracy: 3970/4000 (99%)
Test set:local_trigger1Poison Accuracy: 13/4000 (0%)
Test set:local_trigger2Poison Accuracy: 55/4000 (1%)
Test set:local_trigger3Poison Accuracy: 7/4000 (0%)
Test set:Main Accuracy: 39703/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3969/4000 (99%)
Done in 13.148082971572876 sec.
select client [270, 226, 19, 180, 717, 62, 201, 293, 317, 83]
l2 norm of benign user before server clipping 0.0056196775462012735
l2 norm of benign user after server clipping 0.0056196775462012735
___Test : epoch: 2196: Average loss: 0.0261, Accuracy: 39727/40000.0 (99.3175%)
benign test loss (after fedavg) 0.02609280465468764
benign test acc (after fedavg) 99.31750000000001
Test set:local_trigger0Poison Accuracy: 3955/4000 (99%)
Test set:local_trigger1Poison Accuracy: 23/4000 (1%)
Test set:local_trigger2Poison Accuracy: 96/4000 (2%)
Test set:local_trigger3Poison Accuracy: 7/4000 (0%)
Test set:Main Accuracy: 39727/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3953/4000 (99%)
Done in 13.018341302871704 sec.
select client [442, 124, 414, 610, 570, 948, 771, 221, 35, 556]
l2 norm of benign user before server clipping 0.008567743794992566
l2 norm of benign user after server clipping 0.008567743794992566
___Test : epoch: 2197: Average loss: 0.0259, Accuracy: 39719/40000.0 (99.2975%)
benign test loss (after fedavg) 0.0258654441639781
benign test acc (after fedavg) 99.2975
Test set:local_trigger0Poison Accuracy: 3975/4000 (99%)
Test set:local_trigger1Poison Accuracy: 21/4000 (1%)
Test set:local_trigger2Poison Accuracy: 80/4000 (2%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39719/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3972/4000 (99%)
Done in 13.50394058227539 sec.
select client [722, 57, 74, 908, 122, 931, 383, 834, 648, 82]
l2 norm of benign user before server clipping 0.00648005596594885
l2 norm of benign user after server clipping 0.00648005596594885
___Test : epoch: 2198: Average loss: 0.0253, Accuracy: 39727/40000.0 (99.3175%)
benign test loss (after fedavg) 0.025332684943452477
benign test acc (after fedavg) 99.31750000000001
Test set:local_trigger0Poison Accuracy: 3964/4000 (99%)
Test set:local_trigger1Poison Accuracy: 21/4000 (1%)
Test set:local_trigger2Poison Accuracy: 93/4000 (2%)
Test set:local_trigger3Poison Accuracy: 8/4000 (0%)
Test set:Main Accuracy: 39727/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3965/4000 (99%)
Done in 12.993430852890015 sec.
select client [599, 94, 799, 857, 568, 624, 367, 455, 355, 980]
l2 norm of benign user before server clipping 0.005268833367154002
l2 norm of benign user after server clipping 0.005268833367154002
___Test : epoch: 2199: Average loss: 0.0260, Accuracy: 39720/40000.0 (99.3000%)
benign test loss (after fedavg) 0.026048432499915362
benign test acc (after fedavg) 99.3
Test set:local_trigger0Poison Accuracy: 3986/4000 (100%)
Test set:local_trigger1Poison Accuracy: 25/4000 (1%)
Test set:local_trigger2Poison Accuracy: 100/4000 (2%)
Test set:local_trigger3Poison Accuracy: 9/4000 (0%)
Test set:Main Accuracy: 39720/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3988/4000 (100%)
Done in 13.302210807800293 sec.
select client [470, 974, 499, 455, 788, 862, 824, 77, 443, 534]
l2 norm of benign user before server clipping 0.006407580617815256
l2 norm of benign user after server clipping 0.006407580617815256
___Test : epoch: 2200: Average loss: 0.0256, Accuracy: 39732/40000.0 (99.3300%)
benign test loss (after fedavg) 0.02559088523723185
benign test acc (after fedavg) 99.33
Test set:local_trigger0Poison Accuracy: 3959/4000 (99%)
Test set:local_trigger1Poison Accuracy: 34/4000 (1%)
Test set:local_trigger2Poison Accuracy: 130/4000 (3%)
Test set:local_trigger3Poison Accuracy: 11/4000 (0%)
Test set:Main Accuracy: 39732/40000 (99%)
Test set:Globol Trigger Poison Accuracy: 3959/4000 (99%)
Done in 12.905536413192749 sec.
select client [333, 575, 109, 696, 881, 893, 371, 611, 219, 447]
l2 norm of benign user before server clipping 0.004657529050018638
l2 norm of benign user after server clipping 0.004657529050018638
